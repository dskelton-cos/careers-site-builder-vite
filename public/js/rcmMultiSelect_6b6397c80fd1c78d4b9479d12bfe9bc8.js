function RCMMultiSelect(a){this.register();this.init(a)}
RCMMultiSelect.prototype=function(){juic.Logger.getLogger("RCMMultiSelect");return set(new Component,{init:function(a){a.isPicklistMultiSelect=a.isPicklistMultiSelect&&!(a.childPicklistIds&&0<a.childPicklistIds.length||a._childList&&0<a._childList.length||a.parentPicklistId||a._parentId);a.isPicklistMultiSelect&&(a.selectedValue=a.selectedValue?a.hierarchicalMode?Object.keys(a.selectedValue):a.selectedValue:!1,a.goFieldId=a.fieldName,a.showExternalCode=!0,a.dataSource="picklistController",a.returnObject=
!0,a.hasPrimary=a.hasPrimaryValue,a.isFoundationObject=!1,a.fieldCriteriaMgr=new RcmObjFieldCriteriaMgr,a.allValueSelected=a.fieldsMeta.picklist&&a.fieldsMeta.picklist.picklistObjects&&a.fieldsMeta.picklist.picklistObjects.length-1==Object.keys(a.selectedValue).length,a.displaySelectedValues=!0);this._enabled=a.enabled?!0:!1;this._required=a.required?a.required:!1;this._hierarchicalMode=a.hierarchicalMode;this._objectField=a.objectField||a.isPicklistMultiSelect||!1;this._hasPrimaryValue=(this._hierarchicalMode||
a.isPicklistMultiSelect)&&a.hasPrimaryValue?!0:!1;this._primaryValue=a.primaryValue;this._fieldName=a.fieldName;this._toolTipText=a.toolTipText;this._label=a.label;this._isPicklistMultiselect=a.isPicklistMultiSelect?!0:!1;this._selectId=a.selectId?a.selectId:this.id+"_select";this._isOptionsVisible=!1;this._selectedValue=a.selectedValue;this._disableOptions=a.disableOptions;this._optionList=a.optionList?a.optionList:[];this._isInvalid=!!a.invalid;this._displaySelectedValues=a.displaySelectedValues;
this._customHelpIconConfig=a.customHelpIconConfig;this._readOnly=void 0==a.readOnly||null==a.readOnly?!1:a.readOnly;this._model=this._createModel(this._optionList,a);this._newConfig=a._skipEscaping?{_skipEscaping:a._skipEscaping}:!1;this._multiSelectOptions=this._createMultiSelectOptions(a);this._multiSelectOptions.setToggleClass("itemselected");this._model.addEventListener("selectionChanged",this);this._model.addEventListener("selectAllLoaded",this);this._multiSelectOptions.addEventListener("loadSelectAll",
this);this._multiSelectOptions.addEventListener("selectionChanged",this);this._objectField&&(this._model.addEventListener("itemListReady",this),this._multiSelectOptions.addEventListener("selectionCleared",this),this._multiSelectOptions.getList().addEventListener("itemsAvailable",this));this._allSelectedLabel=a.allSelectedLabel||MSGS.RECRUITING_COMMON_ANY;this._inputValue=this._noneSelectedLabel=a.noneSelectedLabel||MSGS.RECRUITING_COMMON_ANY;this._inputDefaultValueNeedsReset=!1;this._showLoadingIcon=
a&&a.showLoadingIcon?!0:!1;this._wrappingDialog=a.wrappingDialog?a.wrappingDialog:null;this._multiSelectOptions.addEventListener("focusSelectAll",this)},_createModel:function(a,b){if(this._objectField||b&&b.isPicklistMultiSelect)return new RCMObjMultiSelectModel(b);if(this._optionList.constructor==Array){var d=this._convertToSelectItemList(a);return this._hierarchicalMode?new RCMDefaultHierarchicalModel(d):new SFDefaultMultiSelectModel(d)}return this._optionList},_createMultiSelectOptions:function(a){return this._objectField||
a&&a.isPicklistMultiSelect?new RCMObjMultiSelect(this._model,a):this._hierarchicalMode?new RCMHeirarchicalMultiSelect(this._model,a):new SFCheckboxMultiSelect(this._model,this._newConfig)},isHierarchicalMode:function(){return this._hierarchicalMode},getPrimaryValue:function(){return this._hierarchicalMode&&this._selectionsComponent&&this._hasPrimaryValue?this._selectionsComponent.getPrimaryValue():this._isPicklistMultiselect&&this._hasPrimaryValue?this._model.getPrimaryInfo()&&this._model.getPrimaryInfo().getValue()?
this._model.getPrimaryInfo().getValue().toString():"":this._primaryValue?this._primaryValue:""},setPrimaryValue:function(a){(this._hierarchicalMode||this._isPicklistMultiselect)&&this._hasPrimaryValue&&(this._primaryValue=a,this._selectionsComponent&&this._selectionsComponent.initPrimaryValue(a))},setEnabled:function(a){this._enabled=a;juic.$(this.id+"_selectInput")&&(juic.$(this.id+"_selectInput").disabled=!a);juic.$(this.id+"_selectButton")&&(juic.$(this.id+"_selectButton").disabled=!a)},setLoadingIcon:function(a){this._showLoadingIcon=
a;var b=juic.$(this.id+"_loadingIcon");b&&(b.className=a?"multiSelectInProgress":"")},setFocus:function(){var a=juic.$(this.id+"_selectInput").parentNode;a.disabled||a.focus()},getModel:function(){return this._model},getMultiSelectOptions:function(){return this._multiSelectOptions},getSelectedValues:function(){return this.getMultiSelectOptions().getSelectedValues()},getSelectId:function(){return this._selectId},getSelectedTextLabels:function(a){a=a?a:!1;var b=[],d=this.getMultiSelectOptions().getSelectedIndices();
if(d&&0<d.length)for(var c=this._model.getItems(),e=0,f=d.length;e<f;e++)b.push(c[d[e]].toString());a&&1<b.length&&b.sort();return b},getHierSelectionsTextAndValue:function(){return this._model.getSelectionsTextAndValue()},clearSelection:function(){this._objectField?this._multiSelectOptions.clear():(this._model.setSelectedIndices(0),this._selectionChanged=!0,this._selectedValue="",this._hierarchicalMode&&this._setSelectedHierarchicalValues(""));this._dispatchSelectionChange()},_convertToSelectItemList:function(a){var b=
[];if(a&&a.length)for(var d=0;d<a.length;d++)""!=a[d].value&&(this._hierarchicalMode?b.push(new RCMDefaultNodeElement(a[d])):b.push(new SFSimpleSelectItem(a[d].value,a[d].label)));return b},setOptionsList:function(a){a&&(this._model=a.constructor==Array?this._createModel(a):a,this._multiSelectOptions.setModel(this._model),this._model.addEventListener("selectionChanged",this),this.setSelectedOptions())},setSelectedOptions:function(){if(this._selectedValue){this._inputDefaultValueNeedsReset=!0;this._hierarchicalMode||
this._selectedValue.constructor==Array||(this._selectedValue=JSON.parse(this._selectedValue));var a=this._getNumOfSelectedValues(this._selectedValue),a=this._selectedValue&&a,b=this._model.size();if(a<=b&&(this.setSelectedValues(this._selectedValue),this._selectionChanged=!0,this._dispatchSelectionChange(),this._disableOptions&&a==b))for(a=0;a<this._model.size();a++)this._multiSelectOptions.setIndexEnabled(a,!1)}},setPreselections:function(a){this._model.setPreSelectedValues(a)},setSelectedValues:function(a){if(this._hierarchicalMode)this._setSelectedHierarchicalValues(a);
else{var b=[];if(a&&0<a.length)for(var d=0,c=this._model.size();d<c;d++){var e=this._model.get(d).getValue();Util.arrayContains(a,e)&&b.push(d)}this._multiSelectOptions.setSelectedIndices(b)}},_setSelectedHierarchicalValues:function(a){this._model.setSelectedValues(a)},isAllSelected:function(){if(this._isPicklistMultiselect)return this._model.isAllSelected();var a=this.getSelectedValues().length,b=this._model.size();return 0<b&&a==b},isOptionsDisabled:function(){return this._selectAll?!this._selectAll.isEnabled():
!1},getReferenceId:function(){return this.id+"_selectInput"},getFieldName:function(){return this._fieldName},showOptions:function(){if(this._objectField)this._clickToggle();else if(this._isOptionsVisible)this._keyPressHandlerWrapper&&(document.removeEventListener("keypress",this._keyPressHandlerWrapper),document.removeEventListener("keydown",this._keyPressHandlerWrapper)),this._optionsDialog.hideOptionsDialog(),this.setFocus();else{if(!this._optionsDialog){var a=this.getSelectedValues().length,b=
this._model.size();this._selectAll=new RCMAccessibleCheckBox(0<b&&a==b,{value:MSGS.RECRUITING_Select_all,label:MSGS.RECRUITING_Select_all,removeFromTabOrder:!0,parentSelection:!0});this._disableOptions&&a==b&&this._selectAll.setEnabled(!1);this._selectAll.addEventListener("change",this);this._selectAll.addEventListener("focusNextListItem",this);this._selectAll.setChangeCommand("_selectAllChange");if(this._hierarchicalMode){this._selectionsComponent||(this._selectionsComponent=new RCMHeirarchicalMultiSelectSelections({hasPrimary:this._hasPrimaryValue,
primaryValue:this._primaryValue}),this._selectionsComponent.addEventListener("primaryValueChanged",this));for(var b=[],d=(a=this._model.getSelectionsTextAndValue())&&a.length,c=0;c<d;c++)b.push(a[c]);this._selectionsComponent.setSelections(b);this._compositeViewComp=new RCMMultiSelectView(this._multiSelectOptions,this._selectionsComponent,{selectAll:this._selectAll,itemCount:this._model.getItemCount()});this._optionsDialog=new RCMSelectOptionsDialog(this._selectId,this._compositeViewComp,null,{wrappingDialog:this._wrappingDialog,
model:this._model,selectedValues:this.getSelectedValues().length})}else this._optionsDialog=new RCMSelectOptionsDialog(this._selectId,this._multiSelectOptions,this._selectAll,{wrappingDialog:this._wrappingDialog,model:this._model,selectedValues:this.getSelectedValues().length});this._optionsDialog.addEventListener("hide",this)}document.addEventListener("keypress",this._keyPressHandlerWrapper);document.addEventListener("keydown",this._keyPressHandlerWrapper);this._selectAll&&(a=this.getSelectedValues()?
this.getSelectedValues().length:0,b=this._model.size(),this._selectAll.setChecked(0<b&&a==b));this._optionsDialog.showOptionsDialog();(a=juic.$(this._selectId))&&a.setAttribute("aria-expanded","true");this._hierarchicalMode&&(a=juic.$(this._selectAll.id))&&(this._model.isAllSelected()?(a.indeterminate=!1,a.checked=!0):this._model.isPartiallySelected()?(a.checked=!1,a.indeterminate=!0):(a.checked=!1,a.indeterminate=!1));this._isOptionsVisible=!0;a=this._optionsDialog.id;if(b=juic.$(a)){b.setAttribute("role",
"listbox");b.setAttribute("aria-label",this._label);if(a=juic.$(a+"_dialogHeader"))a.setAttribute("role","option"),(b=a.children)&&b[0]&&(b[0].checked?a.setAttribute("aria-selected","true"):a.setAttribute("aria-selected","false"));a=document.getElementById(this._multiSelectOptions.id);a.setAttribute("role","none");[].forEach.call(a.children,function(a){a.setAttribute("role","option");var b=a.children;b&&((b=b[0].children)&&b[0].getAttribute("aria-checked")&&"true"===b[0].getAttribute("aria-checked")?
a.setAttribute("aria-selected","true"):a.setAttribute("aria-selected","false"),b[0].removeAttribute("aria-checked"))})}}},handleEvent:function(a){if(!Util.browserInfo.ie||9<=Util.ieVersion())this.handleEventFinal(a);else if(null!=this._eventTimeout){for(var b=!1,d=0;d<this._waiting.length;d++)if(this._waiting[d].type==a.type&&this._waiting[d].target===a.target){b=!0;this._waiting.splice(d,1);this._waiting.push(a);break}!b&&this._waiting.push(a)}else{var c=function(){var a=e._waiting.splice(0,1)[0];
e.handleEventFinal(a);e._eventTimeout=e._waiting.length?setTimeout(c,10):null},e=this;this._waiting=[a];this._eventTimeout=setTimeout(c,10)}},handleEventFinal:function(a){switch(a.type){case "hide":this._keyPressHandlerWrapper&&(document.removeEventListener("keypress",this._keyPressHandlerWrapper),document.removeEventListener("keydown",this._keyPressHandlerWrapper));(a=juic.$(this._selectId))&&a.setAttribute("aria-expanded","false");this.setFocus();this._dispatchSelectionChange();this._isOptionsVisible=
!1;break;case "itemsAvailable":this._itemsAvailable();break;case "itemListReady":this._setAccessibilitySRText();break;case "selectAllLoaded":this.setLoadingIcon(!1);break;case "loadSelectAll":this.setLoadingIcon(!0);break;case "selectionCleared":this._dispatchSelectionChange();break;case "primaryValueChanged":case "selectionChanged":this._selectionChanged=!0;var b=this.getSelectedValues().length,d=this._model.size();if(this._objectField){this._model.getCountOfItemsSelected();var c=this._model.isAllSelected();
this._inputValue=this.getMultiSelectOptions().getSelectedInputText();this._helpTitle=this.getMultiSelectOptions().getHelpTitle(this._label);this._setInputValueInDOM();juic.$(this.id+"_selectButton")&&(juic.$(this.id+"_selectButton").title=this._helpTitle)}else{var e=[];if(this._hierarchicalMode){for(var f=this._model.getSelectionsTextAndValue(),g=f&&f.length,b=0;b<g;b++)e.push(f[b]);this._selectionsComponent&&"selectionChanged"==a.type&&this._selectionsComponent.setSelections(e);b=e&&e.length?e.length:
0}this._hierarchicalMode&&this._compositeViewComp&&this._compositeViewComp.setTotalSelectedItems(b);0==b?(this._inputValue=this._noneSelectedLabel,this._setInputValueInDOM(),juic.$(this.id+"_selectButton")&&(juic.$(this.id+"_selectButton").title=this._label?sfMessageFormat.format(MSGS.RECRUITING_Select_options_for,this._label):MSGS.RECRUITING_Select_options)):(1==b?this._hierarchicalMode?this._inputValue=e&&e[0]?e[0].text:"":(e=this._model.getItems(),f=this.getMultiSelectOptions().getSelectedIndices()[0],
this._inputValue=e[f].toString()):(this._hierarchicalMode&&(d=this._model.isAllSelected()?b:b+1),this._inputValue=b!=d?MSGS.RECRUITING_Multiple_selections+"("+b+")":this._hierarchicalMode?MSGS.COMMON_All+"("+b+")":this._allSelectedLabel),this._setInputValueInDOM(),juic.$(this.id+"_selectButton")&&(juic.$(this.id+"_selectButton").title=MSGS.RECRUITING_Edit_View_options))}if(this._selectAll&&juic.$(this._selectAll.id))if(this._hierarchicalMode){if(d=juic.$(this._selectAll.id))this._model.isAllSelected()?
(d.indeterminate=!1,d.checked=!0):this._model.isPartiallySelected()?(d.checked=!1,d.indeterminate=!0):(d.checked=!1,d.indeterminate=!1)}else c=b==d,this._selectAll.setChecked(c),juic.$(this._selectAll.id).title=c?MSGS.RECRUITING_Clear_all:MSGS.RECRUITING_Select_all;this._objectField&&this.getMultiSelectOptions().changeSelectAll(c);this._inputDefaultValueNeedsReset&&(this._setInputDefaultValueInDOM(),this._inputDefaultValueNeedsReset=!1);this.dispatch("selectionChanged",a);this._setAccessibilitySRText();
(a=document.getElementById(this._multiSelectOptions.id))&&[].forEach.call(a.children,function(a){var b=a.children;b&&((b=b[0].children)&&b[0].getAttribute("aria-checked")&&"true"===b[0].getAttribute("aria-checked")?a.setAttribute("aria-selected","true"):a.setAttribute("aria-selected","false"),b[0].removeAttribute("aria-checked"))});this._selectAll&&(c=this._optionsDialog.id,c=juic.$(c+"_dialogHeader"))&&(c.setAttribute("aria-checked",this._selectAll._checked),c.setAttribute("aria-selected",this._selectAll._checked));
break;case "change":if("_selectAllChange"==a.changeCommand){c=a.checked;this._selectAll.setChecked(c);if(this._objectField)c?(this._model.selectAll(),juic.$(this._selectAll.id).title=MSGS.RECRUITING_Clear_all):(this._model.unselectAll(),juic.$(this._selectAll.id).title=MSGS.RECRUITING_Select_all);else if(c){juic.$(this._selectAll.id).title=MSGS.RECRUITING_Clear_all;c=[];for(d=0;d<this._model.getlength();d++)c.push(d);if(this._hierarchicalMode){d={};for(b=0;b<c.length;b++)d[c[b]]=!0;this._model.setSelectedIndices(d)}else this._model.setSelectedIndices(c)}else juic.$(this._selectAll.id).title=
MSGS.RECRUITING_Select_all,this._model.setSelectedIndices(0);this.dispatch("selectallchange",a);this._setAccessibilitySRText();c=this._selectAll.id;if(c=juic.$(c+"_dialogHeader"))c.setAttribute("aria-checked",a.checked),c.setAttribute("aria-selected",a.checked)}break;case "focusNextListItem":(a=juic.$(this._multiSelectOptions.id+"0")||juic.$("sfCheckboxMultiSelectItem"+this._multiSelectOptions.id+"0"))&&SFDom.setFocus(a);break;case "focusSelectAll":(a=juic.$(this._selectAll.id+"_dialogHeader"))&&
SFDom.setFocus(a)}},renderHtml:function(a){if(this._readOnly)this._objectField&&this._displaySelectedValues&&(a.push("\x3cdiv\x3e\x3cspan id\x3d'"+this._model._goFieldId+"_loadingIndicator' class\x3d'multiSelectInProgress'\x3e\x3c/span\x3e\x3cspan id\x3d'"+this._model._goFieldId+"_displaySelectedItems'\x3e\x3c/span\x3e\x3c/div\x3e"),this._model.fetchObjects());else{var b=this._isInvalid?" invalidInput' aria-invalid\x3d'true' ":"' ";a.push('\x3cspan role\x3d"combobox" class\x3d\'rcmmultiselect rcmmultiselect_accessible ',
this.generateFDClasses("input-group",["control"]),b,'id\x3d"'+this._selectId+"\" aria-label\x3d'",this._label,"'");this._enabled?a.push(" tabindex\x3d'0' aria-haspopup\x3d'listbox' aria-expanded\x3d'false' onkeyup\x3d'",this.fireCode("_keyPressHandler"),"' aria-describedby\x3d'",this.id,"_srText'"):a.push(" tabindex\x3d'-1' disabled\x3d'true' aria-disabled\x3d'true'");b="";if(!this._enabled||this._isPicklistMultiselect&&this._disableOptions)b=' disabled\x3d"true"';a.push("\x3e");var d=this._label?
sfMessageFormat.format(MSGS.RECRUITING_Select_options_for,this._label):MSGS.RECRUITING_Select_options,c=this.getSelectedValues(),e=this._getNumOfSelectedValues(c),f=this._model.size(),f=0<f&&e==f;0<e&&(c=JSON.stringify(c));this._objectField&&(this._inputValue=this.getMultiSelectOptions().getSelectedInputText());a.push("\x3cinput aria-label\x3d'",this._label,"' tabindex\x3d'-1' class\x3d'rcmmultiselectinput rcmmultiselectitem ",this.generateFDClasses("input")," ",this.generateFDClasses("input-group__input"),
"' type\x3d'text'",'id\x3d"'+this.id+'_selectInput"','value \x3d "',this._inputValue?juic.maybeEscapeHTML(this._inputValue):"",'"',b," title \x3d '",d,"' onclick\x3d'",this.fireCode("showOptions"),"' onkeyup\x3d'",this.fireCode("_keyPressHandler"),";'","/\x3e");a.push("\x3cbutton tabindex\x3d'-1' class\x3d'rcmmultiselectbutton ui5 rcmmultiselectbutton_accessible rcmmultiselectitem ",this.generateFDClasses("input-group__addon",["button"]),"' type\x3d'button'",'id\x3d"'+this.id+'_selectButton"',b," title \x3d '",
d,"' onclick\x3d'",this.fireCode("showOptions"),"'aria-label\x3d'",this._label,"'\x3e\x3cspan class\x3d'ui5'\x3e\x26#xe1ef;\x3c/span\x3e\x3c/button\x3e");a.push("\x3cspan id\x3d'"+this.id+"_loadingIcon' class\x3d'"+(this._showLoadingIcon?"multiSelectInProgress":"")+"'\x3e\x3c/span\x3e");a.push("\x3cinput name\x3d'",this._fieldName,"' class\x3d'multiselecthidden' type\x3d'hidden' id\x3d'"+this.id+"_hidden' value\x3d'","object"===typeof c?JSON.stringify(c):c,"' /\x3e");a.push("\x3cinput name\x3d'",
this._fieldName,"SelectAll' class\x3d'multiselecthidden' type\x3d'hidden'","id\x3d'"+this.id+"_hiddenSelectAll' value\x3d'",f&&!0!==this._disableOptions?"true":"false","' /\x3e");a.push("\x3cspan id\x3d'"+this.id+'_srText\' aria-hidden\x3d"true" class\x3d"sr-only"\x3e',this._getAccessibilityMultiselectTitleForSRText(),MSGS.RECRUITING_ACCESSIBLE_MFIELD_NO_SELECTION,"\x3c/span\x3e");a.push("\x3c/span\x3e");this._model._isPicklistMultiselect&&1==this._model.getCountOfItemsSelected()&&this._model._ajaxController.getLabelByPickListOptionId(this._model._fieldsMeta.picklistId,
parseInt(Object.keys(JSON.parse(c))[0]),function(a){juic.$(this.id+"_selectInput").value=a;juic.$(this.id+"_selectInput").defaultValue=a}.bind(this));this._objectField&&((void 0!=this._customHelpIconConfig||null!=this._customHelpIconConfig)&&this._customHelpIconConfig.showHelpText&&a.push("\x3cspan class\x3d'objectHelpText'\x3e\x3ca id\x3d'"+this._customHelpIconConfig.divId+":help' class\x3d'helptext_icon_ui5 sapIcon' tabindex\x3d'0' aria-label\x3d'"+this._customHelpIconConfig.fieldLabel+" "+MSGS.COMMON_Description+
"' onkeydown\x3d'hideBubble(event)' href\x3d'javascript:showHelpIcon(\""+this._customHelpIconConfig.divId+':help","jr","'+this._fieldName+"\")'\x3e\ue1c3\x3c/a\x3e\x3c/span\x3e"),this._displaySelectedValues&&(a.push("\x3cdiv class\x3d'selectedItemList'\x3e\x3cspan id\x3d'"+this._model._goFieldId+"_loadingIndicator' class\x3d'multiSelectInProgress'\x3e\x3c/span\x3e\x3cspan id\x3d'"+this._model._goFieldId+"_displaySelectedItems'\x3e\x3c/span\x3e\x3c/div\x3e"),this._model.fetchObjects()));this._objectField&&
a.addAfterRenderListener&&a.addAfterRenderListener(this,"_objSelectionSetter")}},_setAccessibilitySRText:function(){var a=juic.$(this.id+"_srText");if(a){var b=this._getAccessibilityMultiselectTitleForSRText(),d="";if(this._objectField)d=b+" "+this._multiSelectOptions.getSelectedValueAccessibleText();else if(this._hierarchicalMode){var d=this.getPrimaryValue(),c=this._model.getSelectionsTextAndValue();if(this._model.isAllSelected())d=b+" "+MSGS.RECRUITING_ACCESSIBLE_MFIELD_ALL_SELECTED;else if(c&&
0<c.length){for(var e="",f=0;f<c.length;f++)e+=(""!=e?", ":"")+(c[f].value==d?c[f].text+" ("+MSGS.RCM_MULTISELECT_PRIMARY_VALUE+")":c[f].text);d=1==c.length?b+" "+MSGS.RECRUITING_ACCESSIBLE_MFIELD_SELECTED_VALUE+" "+e:b+" "+MSGS.RECRUITING_ACCESSIBLE_MFIELD_SELECTED_VALUES+" "+e}else d=b+" "+MSGS.RECRUITING_ACCESSIBLE_MFIELD_NO_SELECTION}0<d.length&&(a.innerHTML=d)}},_setInputValueInDOM:function(){var a=juic.$(this.id+"_selectInput");a&&(a.value=this._inputValue)},_setInputDefaultValueInDOM:function(){var a=
juic.$(this.id+"_selectInput");a&&this._inputValue&&(a.defaultValue=this._inputValue)},_getNumOfSelectedValues:function(a){if(a)return Array.isArray(a)?a.length:"object"===typeof a?Object.keys(a).length:-1},_getAccessibilityMultiselectTitleForSRText:function(){var a=this._label?sfMessageFormat.format(MSGS.RECRUITING_ACCESSIBLE_MULTISELECT_TITLE_FOR_TEXT,this._label):MSGS.RECRUITING_ACCESSIBLE_MULTISELECT_TITLE_TEXT;return a+=this._required?" "+MSGS.RECRUITING_FIELD_REQUIRED+". ":""},_clickToggle:function(){this._showPopup()},
_createPopupContents:function(){this._dragResizer=new SFDragResizer(this.getMultiSelectOptions(),{dragByResizing:!0});this._dragResizer.addEventListener("dragResize",this,"_onDragResize");return this._dragResizer},_onDragResize:function(a){this._userWidth=a.dimension.width},_itemsAvailable:function(){this._displaySelectedValues&&this.getMultiSelectOptions().getList().renderSelectedItems(this._model._goFieldId);if(!this._isPopupShown()){this._popup||this._createPopup(this._createPopupContents());this.getMultiSelectOptions().getList().resetDimension();
var a={width:"auto",height:"auto"};if(!this._autoHeight||!this._autoWidth){var b=this.getMultiSelectOptions().getList().getPageDimension();if(!this._autoWidth){var d=this.getMultiSelectOptions().getList().getContainerHeight()>=b.height?17:0,c=juic.$(this.getReferenceId()).offsetWidth+110;a.width=b.width>c-d?b.width+d:c;this._userWidth&&(!a.width||a.width<this._userWidth)&&(a.width=this._userWidth)}this._autoHeight||(a.height=b.height)}this.getMultiSelectOptions().getList().setDimension(a);this._popup.show(this.getReferenceId());
this.getMultiSelectOptions().focusOnSelectAll();this._isPopupShown()&&(!this.fnWrapperUp&&(this.fnWrapperUp=function(a){this._keyUp.call(this,a,this)}.bind(this)),!this.fnWrapperDown&&(this.fnWrapperDown=function(a){this._keyDown.call(this,a,this)}.bind(this)),this.fnWrapperUp&&document.addEventListener("keypress",this.fnWrapperUp),this.fnWrapperDown&&document.addEventListener("keydown",this.fnWrapperDown));this.getMultiSelectOptions().getList()._focusIndex=null;this.setLoadingIcon(!1)}},_isPopupShown:function(){return this._popup&&
this._popup.isShown()},_hidePopup:function(){this._popup&&this._popup.hide();this.fnWrapperUp&&document.removeEventListener("keypress",this.fnWrapperUp);this.fnWrapperDown&&document.removeEventListener("keydown",this.fnWrapperDown);this._dispatchSelectionChange();this.setFocus()},_getPopupOptions:function(){return{}},_showPopup:function(){this._isPopupShown()?this._hidePopup():(this.setLoadingIcon(!0),this._popup&&this._popup.resetCurrentPosition(),this.getMultiSelectOptions().fetchData())},_createPopup:function(a){this._popup=
new SFContextPopup(a,this._getPopupOptions());this._popup.addEventListener("clickedOutsidePopup",this,"_hidePopup")},_objSelectionSetter:function(){if(this._model.getPreSelectedValues()&&0<this._model.getPreSelectedValues().length){juic.$(this.id+"_selectInput")&&(juic.$(this.id+"_selectInput").value=this._multiSelectOptions.getSelectedInputText());juic.$(this.id+"_selectButton")&&(juic.$(this.id+"_selectButton").title=this._multiSelectOptions.getHelpTitle(this._label));var a=this._model.isAllSelected();
juic.$(this.getMultiSelectOptions().getSelectAll().id)&&this.getMultiSelectOptions().changeSelectAll(a)}},_dispatchSelectionChange:function(){if(this._selectionChanged){this._selectionChanged=!1;var a=this.getSelectedValues(),b=this._getNumOfSelectedValues(a),d=this._model.size();!this._model.isAllSelected()&&this._model.isSelectAllDataEnabled&&this._model._isPicklistMultiselect&&(this._model.isSelectAllDataEnabled=!1);d=0<d&&b==d;juic.$(this.id+"_hidden")&&(juic.$(this.id+"_hidden").value=0<b?JSON.stringify(a):
"");juic.$(this.id+"_hiddenSelectAll")&&(juic.$(this.id+"_hiddenSelectAll").value=d&&!this.isOptionsDisabled()?"true":"false");this.dispatch("selectionchange",{values:a})}},_keyPressHandler:function(a,b){b=b||this;if(b._enabled)switch(a.keyCode||a.charCode){case 13:b.showOptions();a.cancelBubble=!0;a.returnValue=!1;a.preventDefault&&(a.preventDefault(),a.stopPropagation());break;case 27:b._optionsDialog&&b._optionsDialog.hideOptionsDialog();a.cancelBubble=!0;a.returnValue=!1;a.preventDefault&&(a.preventDefault(),
a.stopPropagation());break;case 38:case 40:a.altKey&&(b.showOptions(),a.cancelBubble=!0,a.returnValue=!1,a.preventDefault&&(a.preventDefault(),a.stopPropagation()))}},_keyDown:function(a,b){a=a||window.event;var d=SFDOMEvent.getKeyName(a),c=b.getMultiSelectOptions(),e=c.getList();if(/^ARROW(LEFT|RIGHT|UP|DOWN)$/.test(d))if(a.altKey){if(/^ARROW(LEFT|RIGHT|UP|DOWN)$/.test(d)){var f=e.getDimension();switch(d){case "ARROWLEFT":f.width-=10;break;case "ARROWRIGHT":f.width+=10;break;case "ARROWUP":SFDOMEvent.preventDefault(a);
f.height-=10;!c._model._hasPrimary&&e.moveFocusUp();var g=document.activeElement,h=e.getFocusItem()?e.getFocusItem().activateIndex:0;0==h?g.id==e.id+"item0"?(SFDom.setFocus(c.getSelectAll().id+"_dialogHeader"),c=juic.$(g.id),c.classList.remove("item-focused"),c.classList.remove("globalMenuItemFocus")):g.id!=c.getSelectAll().id+"_dialogHeader"&&SFDom.setFocus(juic.$(e.id+"item"+h)):SFDom.setFocus(juic.$(e.id+"item"+h));break;case "ARROWDOWN":SFDOMEvent.preventDefault(a),f.height+=10,g=document.activeElement,
!c._model._hasPrimary&&e.moveFocusDown(),c.getSelectAll()&&g.id===c.getSelectAll().id+"_dialogHeader"?SFDom.setFocus(juic.$(e.id+"item0")):(h=e.getFocusItem()?e.getFocusItem().activateIndex:0,SFDom.setFocus(juic.$(e.id+"item"+h)))}/^ARROW(LEFT|RIGHT)$/.test(d)&&(b._userWidth=f.width);e.setDimension(f);SFDOMEvent.preventDefault(a)}}else switch(d){case "ARROWUP":SFDOMEvent.preventDefault(a);!c._model._hasPrimary&&e.moveFocusUp();g=document.activeElement;h=e.getFocusItem()?e.getFocusItem().activateIndex:
0;0==h?g.id==e.id+"item0"?(SFDom.setFocus(c.getSelectAll().id+"_dialogHeader"),c=juic.$(g.id),c.classList.remove("item-focused"),c.classList.remove("globalMenuItemFocus"),e._focusIndex=null):g.id!=c.getSelectAll().id+"_dialogHeader"&&SFDom.setFocus(juic.$(e.id+"item"+h)):SFDom.setFocus(juic.$(e.id+"item"+h));break;case "ARROWDOWN":SFDOMEvent.preventDefault(a),g=document.activeElement,!c._model._hasPrimary&&e.moveFocusDown(),c.getSelectAll()&&g.id===c.getSelectAll().id+"_dialogHeader"?SFDom.setFocus(juic.$(e.id+
"item0")):(h=e.getFocusItem()?e.getFocusItem().activateIndex:0,SFDom.setFocus(juic.$(e.id+"item"+h)))}else switch(d){case "ESCAPE":b._hidePopup();break;case "ALPHA":case "NUMERIC":case "TAB":c._model&&c._model._hasPrimary?(d=document.activeElement.getAttribute("class")&&-1<document.activeElement.getAttribute("class").indexOf("rcmObjMultiSelectPrimaryItem")?!0:!1,c=document.activeElement.getAttribute("class")&&-1<document.activeElement.getAttribute("class").indexOf("sfCheckBoxInputBox")?!0:!1,a.shiftKey?
c&&e.getFocusItem().checkbox.isChecked()&&!d?(e.moveFocusUp(),juic.$("rcmObjMultiSelectPrimaryItem"+e.id+e.getFocusItem().activateIndex).focus()):e.getFocusItem().checkbox.isChecked()&&d?e.getFocusItem().checkbox.setFocus():(e.moveFocusUp(),c&&e.getFocusItem().checkbox.isChecked()&&!d&&juic.$("rcmObjMultiSelectPrimaryItem"+e.id+e.getFocusItem().activateIndex).focus()):c&&e.getFocusItem().checkbox.isChecked()&&!d?juic.$("rcmObjMultiSelectPrimaryItem"+e.id+e.getFocusItem().activateIndex).focus():e.moveFocusDown()):
(a.shiftKey?e.moveFocusUp():e.moveFocusDown(),e&&e.getFocusItem()&&e.getFocusItem().activateIndex&&SFDom.setFocus(juic.$(e.id+"item"+e.getFocusItem().activateIndex)));break;case "RETURN":case "SPACEBAR":g=document.activeElement;c.getSelectAll()&&g.id===c.getSelectAll().id+"_dialogHeader"&&(e=c.getSelectAll()._checked,this._model.setSelectionChanged(!0),c.getSelectAll().setChecked(e),e?(this._model.isSelectAllDataEnabled=!1,this._model.unselectAll(),juic.$(c.getSelectAll().id).title=MSGS.RECRUITING_Select_all):
(this._model.selectAll(),this._model._displaySelectedValues&&(this.dispatch("loadSelectAll"),this._model.fetchAllObjects()),juic.$(c.getSelectAll().id).title=MSGS.RECRUITING_Clear_all));break;case "BACKSPACE":case "OTHER":"RETURN"!=d&&"SPACEBAR"!=d&&SFDOMEvent.preventDefault(a)}},_keyUp:function(a,b){a=a||window.event;var d=SFDOMEvent.getKeyName(a);b.getMultiSelectOptions();switch(d){case "ESCAPE":b._hidePopup();break;case "ALPHA":case "NUMERIC":case "BACKSPACE":case "OTHER":b._hidePopup(),"RETURN"!=
d&&"SPACEBAR"!=d&&SFDOMEvent.preventDefault(a)}}})}();function RCMSelectOptionsDialog(a,b,d,c){this.register();this.init(a,b,d,c)}
RCMSelectOptionsDialog.prototype=function(){return set(new Component,{init:function(a,b,d,c){this._selectId=a;this._multiSelectOptions=b;this._selectAll=d;this._isFixedHeight=!1;this._focusLoop=new SFFocusLoop(this.id);this._focusMarkers=this._focusLoop.getMarkers();c=c?c:{};this._wrappingDialog=c.wrappingDialog?c.wrappingDialog:null;this._model=c.model;this._selectedValues=c.selectedValues},handleEvent:function(a){switch(a.type){case "positionFixed":var b=Util.getAbsPos(this._selectId).y,d=document.body.clientHeight;
a=a.positionInfo.overlay;var c=a.height,e=a.width,f=document.body.scrollTop,g=c-35;142>e&&(e=142);Util.quirksMode()&&200<g&&(juic.$(this.id+"_multiSelectOptions").style.height="200px");g=a.top>f?a.top:f;g+=2;isNaN(g)||isNaN(a.left)||SFOverlayMgr.css(this,{top:g+"px",left:a.left+"px"});juic.$(this.id+"_multiSelectOptions").style.width=e+"px";f=c+(g<b?Math.abs(d-b+f+10):g-f);f>d&&(d=Math.abs(c-(f-d)-35),c=17,g<b&&Util.ieVersion(!0)&&(c=15),d+=c,juic.$(this.id+"_multiSelectOptions").style.height=d+"px",
juic.$(this.id+"_multiSelectOptions").style.width=e+"px",b=juic.$(a.overlayId).getElementsByTagName("iframe")[0])&&(b.style.height=d+"px")}},showOptionsDialog:function(){!this._outsideClickHandlerWrapper&&(this._outsideClickHandlerWrapper=function(a){this._outsideClickHandler.call(this,a,this)}.bind(this));document.addEventListener("mousedown",this._outsideClickHandlerWrapper);document.addEventListener("wheel",this._outsideClickHandlerWrapper);SFPositionManager.addEventListener("positionFixed",this);
SFPositionManager.show(this,this._selectId);Util.quirksMode()&&SFPositionManager.moveTo(this,null,this._selectId);if(this._selectAll){var a=juic.$(this._selectAll.id+"_dialogHeader");if(!a.disabled)try{a.focus()}catch(b){}}else this.setFocus(!1);this._wrappingDialog&&this._wrappingDialog.removeEscKeyListener()},isDialogOpen:function(){return juic.$(this.id+"_multiSelectOptions")?!0:!1},hideOptionsDialog:function(){this._outsideClickHandlerWrapper&&(document.removeEventListener("mousedown",this._outsideClickHandlerWrapper),
document.removeEventListener("wheel",this._outsideClickHandlerWrapper));SFPositionManager.removeEventListener("positionFixed",this);this.dispatch("hide");this._wrappingDialog&&this._wrappingDialog.addEscKeyListener()},_outsideClickHandler:function(a,b){for(var d=a.target||a.srcElement,c=!1;d&&d!=document.body;){if(d.id==b.id||d.id==b._selectId){c=!0;break}d=d.parentNode}c||b.hideOptionsDialog()},setFocus:function(a){this._focusLoop.setFocus(a)},selectAllKeyDown:function(a){switch(SFDOMEvent.getKeyName(a)){case "ARROWDOWN":SFDOMEvent.preventDefault(a);
this._multiSelectOptions&&SFDom.setFocus("sfCheckboxMultiSelectItem"+this._multiSelectOptions.id+"0");break;case "RETURN":case "SPACEBAR":SFDOMEvent.preventDefault(a),a=document.activeElement,this._selectAll&&a.id===this._selectAll.id+"_dialogHeader"&&(a=this._selectAll._checked,this._selectAll.setChecked(!a),juic.$(this._selectAll.id+"_dialogHeader").setAttribute("aria-checked",a),juic.$(this._selectAll.id+"_dialogHeader").setAttribute("aria-selected",a),a?(this._model.deselectAll(),juic.$(this._selectAll.id).title=
MSGS.RECRUITING_Select_all):(this._model.selectAll(),juic.$(this._selectAll.id).title=MSGS.RECRUITING_Clear_all))}},rcmMultiSelectDialogKeyDown:function(a){switch(SFDOMEvent.getKeyName(a)){case "ESCAPE":this.hideOptionsDialog()}},renderHtml:function(a){var b=this._model.size(),b=0<b&&this._selectedValues==b;a.push("\x3cdiv role\x3d'listbox' onkeydown\x3d'"+this.fireCode("rcmMultiSelectDialogKeyDown")+"' class\x3d'rcmmultiselectdialog sfDialogInline' ","id\x3d'"+this.id+"'\x3e");this._focusMarkers[0].renderHtml(a);
this._selectAll&&(a.push("\x3cdiv role\x3d'option' tabindex\x3d'0' aria-checked\x3d'"+b+"' aria-selected\x3d'"+b+"' onkeydown\x3d'"+this.fireCode("selectAllKeyDown")+"' class\x3d'rcmmultiselectdialogheader' id\x3d'"+this._selectAll.id+"_dialogHeader'\x3e"),this._selectAll.renderHtml(a),a.push("\x3c/div\x3e"));a.push("\x3cdiv ",'id\x3d"'+this.id+"_multiSelectOptions\" style\x3d'overflow-y: auto;'");this._selectAll&&a.push(" class\x3d'rcmmultiselectoptions' ");a.push("\x3e");this._multiSelectOptions.renderHtml(a);
a.push("\x3c/div\x3e");this._focusMarkers[1].renderHtml(a);a.push("\x3c/div\x3e")}})}();