function RCMPaginatedPicklistSingleSelect(a){this.register();this._init(a)}
juic.extend(RCMPaginatedPicklistSingleSelect,juic.Component,{_init:function(a){this._isBackgroundElement=!1;a.useIdForCascading&&(this._isBackgroundElement=!0);this._config=a;this._model=new RCMPaginatedPicklistModel(a);this._model.addEventListener("optionLabelAvailable",this);this._model.addEventListener("firstPageItemsAvailable",this);this._oldValue=this._selectedValue=this.getValue();this._listoptions=this._getListOptions();this._enabled=0==a.enabled||this._model._parentPicklistId&&!this._model._parentOptionId?
!1:!0;this._itemProvider=new RCMPaginatedPicklistProvider(this._model);this._singleSelectList=new SFComboListSelect(this._itemProvider,this._listoptions);this._singleSelectList.addEventListener("itemsAvailable",this);this._singleSelectList.addEventListener("itemSelected",this);this._dragResizer=new SFDragResizer(this._singleSelectList,{dragByResizing:!0});this._inputThreshold=20;this._childList=[]},_getOldValue:function(){return this._oldValue},_setOldValue:function(a){this._oldValue=a},getPicklistId:function(){return this._model.getPicklistId()},
getIdForCascading:function(){return this._model.getIdForCascading()},getSectionElementId:function(){return this._model.getSectionElementId()},getFieldId:function(){return this._model.getFieldId()},getFieldName:function(){return this._model.getFieldName()},setParentOptionId:function(a){a=a&&parseInt(a);this._model.setParentOptionId(a)},getChildList:function(){return this._childList},updateChildList:function(a){this._childList.push(a)},addToPicklistMgr:function(){var a=this.getFieldId()||this.getFieldName(),
b=this.getIdForCascading();paginatedPicklistMgr.addPicklist(this,b?b:a);b&&(a=paginatedPicklistMgr.getParentPicklistObject(this))&&(a.updateChildList(this),(a=a.getSelectedOption())&&this.setEnabled(!0),a&&this.setParentOptionId(a))},_getListOptions:function(){return{pageSize:100,fetchPagesInOrder:!0,noResultsMessage:null,scrollItemTop:!1,fetchPageDelay:250}},setOption:function(a,b,c){a!=this.getValue().value&&(this.setValue({value:a,label:""},b,c),this._model.getLabelByPickListOptionId(this.getPicklistId(),
a))},setValue:function(a,b,c){void 0==a.label&&(a.label="");this.setLabel(a.label);a.value?SFDom.removeClass(juic.$(this.id+"_input"),"invalidInput"):this._config.invalid&&SFDom.addClass(juic.$(this.id+"_input"),"invalidInput");!this._config.required||a.value&&""!==a.value||SFDom.addClass(juic.$(this.id+"_input"),"invalidInput");if(a.value!=this._getOldValue().value){this._setOldValue(a);this._model.setValue(a);var d=juic.$(this._model.getValueFormElement());d&&(d.value=a.value);this.dispatch("_picklistChanged",
{picklist:this,picklistId:this.getPicklistId(),selectedOptionId:this.getSelectedOption(),ignoreChildUpdate:b});this.dispatch("change",{value:this.getSelectedOption(),fromRules:c})}},resize:function(a){void 0!=a&&0<a.length&&(juic.$(this.id+"_input").size=Math.max(this._inputThreshold,a.length))},getLabel:function(){return this._model.getLabel()},setLabel:function(a){var b=juic.$(this.id+"_input");b&&(b.value=a,b.setAttribute("title",a),this.resize(a))},handleOptionLabel:function(a){var b=juic.$(this.id+
"_input");b?(this.setLabel(a),this._getOldValue().value==this.getValue().value&&(b.defaultValue=a)):(a=juic.createRenderContext(),this.renderInner(a),(b=juic.$(this.id+"_selectContainer"))&&(b.innerHTML=a.join("")))},setEnabled:function(a){this._enabled=a;var b=juic.$(this.id+"_input");b&&(b.disabled=!a);if(b=juic.$(this.id+"_selectButton"))b.disabled=!a},setFocus:function(){var a=juic.$(this.id+"_input");a&&a.focus()},getValue:function(){return this._model.getValue()},fetchFirstPageItems:function(){this._model.fetchItems({endIndex:99,
filterType:null,filterValue:null,pageIndex:0,pageNumber:1,pageSize:100,startIndex:0,fetchFirstPageItems:!0})},getChildFieldIds:function(){return this._model.getChildFieldIds()},getParentPicklistId:function(){return this._model.getParentPicklistId()},getSelectedOption:function(){return this._model.getValue().value},_getReferenceId:function(){return this.id+"_input"},_click:function(a){switch(a.type){case "click":this.dispatch("action",{actionCommand:"_click",picklistComp:this,parentPicklistId:this.getParentPicklistId()});
break;case "keydown":this._keyDown(a);break;case "keyup":this._keyUp(a)}},_onBlur:function(a){this._isPopupShown()||this.getValue().label==a.target.value||(0<a.target.value.length?this.setValue(this.getValue()):this.setValue({label:"",value:""}));this._isPopupShown()||this.dispatch("blur")},handleEvent:function(a){switch(a.type){case "firstPageItemsAvailable":2===a.items.length&&this.setValue({value:a.items[1].value,label:a.items[1].label});break;case "itemsAvailable":this._popup.show(this._getReferenceId());
var b=juic.$(this.id+"_autocompleteStatus");b&&(b.innerText=a.items&&a.items.length?MSGS.RCM_SELECT_USER_AUTOCOMPLIST_EXPANDED:MSGS.COMMON_No_Results);this._singleSelectList.changeItemFocus(this._itemProvider.indexOf(this.getValue()));if(a=juic.$(this._singleSelectList.getFocusItemId())){a.tabIndex=-1;a.focus();var c=this;setTimeout(function(){c.setFocus()},0)}break;case "itemSelected":null!=a.item.value&&null==a.item.label&&(a.item.label=a.item.value);this.setValue({value:a.item.value,label:a.item.label});
this._popup.hide();this.setFocus();break;case "optionLabelAvailable":this.handleOptionLabel(a.label)}},renderHtml:function(a){a.push('\x3cdiv id\x3d"',this.id,'_selectContainer" class\x3d"paginatedPicklistContainer ',this.generateFDClasses("input-group",["control"])," ",'"\x3e');this.renderInner(a);a.push("\x3c/div\x3e")},renderInner:function(a){var b=this._model.getToolTipText(),c=this._config.invalid?"invalidInput":"";a.push('\x3cdiv class\x3d"sr-only"\x3e\x3cdiv id\x3d"',this.id,'_autocompleteStatus" role\x3d"status" aria-atomic\x3d"true" aria-live\x3d"polite"\x3e\x3c/div\x3e\x3c/div\x3e');
a.push('\x3cinput role\x3d"combobox" aria-label\x3d"',this._config.label,'" autocomplete\x3d"chrome-off" type\x3d"text" placeholder\x3d"',MSGS.COMMON_NO_SELECTION,'" title\x3d"',b,'" aria-owns\x3d"',this._singleSelectList.getDomId(),'" ');this._enabled||a.push(' disabled\x3d"true"');this._config.required&&a.push(' aria-required\x3d"true"');a.push('class\x3d"rcmpaginatedselectinput rcmpaginatedselectitem rcmpaginatedselect_accessible ',this.generateFDClasses("input")," ",this.generateFDClasses("input-group__input"),
" ",c,'"');this._renderAccessibilityAttributes(a);this.getValue().label&&a.push(' value\x3d"',juic.maybeEscapeHTML(this.getValue().label));a.push('" onclick\x3d"',this.fireCode("_click"),'" aria-expanded\x3d"false" id\x3d"',this.id,'_input"',' onblur\x3d "',this.fireCode("_onBlur"),'" onkeyup\x3d "',this.fireCode("_click"),'" onkeydown\x3d "',this.fireCode("_click"),'" \x3e');a.push("\x3cbutton aria-label\x3d'",this._config.label,"' tabindex\x3d'-1' class\x3d'rcmpaginatedselectbutton rcmpaginatedselectbutton_accessible rcmpaginatedselectitem ",
this.generateFDClasses("select__button")," ",this.generateFDClasses("input-group__button")," ",this.generateFDClasses("button",["transparent"]),"'");this._enabled||a.push(' disabled\x3d"true"');a.push(" type\x3d'button'",'id\x3d"'+this.id+'_selectButton"',""," title \x3d '",b,"' onclick\x3d'",this.fireCode("_click"),"'\x3e\x3cspan class\x3d'ui5'\x3e\x26#xe1ef;\x3c/span\x3e\x3c/button\x3e")},_renderAccessibilityAttributes:function(a){this._model.isRequired()&&a.push(' aria-required\x3d"true"');this._model.getLabel()&&
"string"===typeof this._model.getLabel()&&(a.push(' aria-label\x3d"',this._model.getLabel()),this._model.isRequired()&&a.push(" "+MSGS.RECRUITING_FIELD_REQUIRED),this._selectedValue.label&&a.push(" "+juic.maybeEscapeHTML(this._selectedValue.label)),this._model.isInvalid()&&a.push(". "+MSGS.RECRUITING_JOB_REQUISITION_INVALID_ENTRY),a.push('"'));this._model.isInvalid()&&a.push('aria-invalid\x3d"true"')},_getInputValue:function(){var a=juic.$(this.id+"_input");return a?a.value:""},getInputId:function(){return this.id+
"_input"},_isPopupShown:function(){return this._popup&&this._popup.isShown()},_showPopup:function(a){this._isPopupShown()&&this._hidePopup();this._popup?this._popup.resetCurrentPosition():this._clickToggle();a?this._singleSelectList.setFilter("contains",a):this._singleSelectList.clearFilter()},_clickToggle:function(){this._popup?this._isPopupShown()||this._showPopup():this.createPopup()},clearValue:function(){this._model.setValue("");var a=juic.$(this.id+"_input");if(a)return a.value="";if(a=juic.$(this._model.getValueFormElement()))a.value=
""},updateAttribute:function(a,b){var c=juic.$(this._getReferenceId());c&&c.setAttribute(a,b)},_getListFocusIndex:function(){var a=this._singleSelectList._focusIndex;return-1<a?this._singleSelectList.id+"item"+a:""},_keyDown:function(a){a=a||window.event;switch(SFDOMEvent.getKeyName(a)){case "ESCAPE":this._hidePopup();break;case "TAB":this._hidePopup();a=this.getValue();this._getInputValue()!=a.label&&this.clearValue();break;case "RETURN":SFDOMEvent.preventDefault(a);SFDOMEvent.stopPropagation(a);
this.dispatch("action",{actionCommand:"_keyDown",picklistComp:this,parentPicklistId:this.getParentPicklistId()});break;case "ARROWDOWN":case "SPACEBAR":this.dispatch("action",{actionCommand:"_keyDown",picklistComp:this,parentPicklistId:this.getParentPicklistId()});break;case "ALPHA":case "NUMERIC":case "BACKSPACE":case "OTHER":this.noTypeAhead&&"TAB"!=keyName&&SFDOMEvent.preventDefault(a)}},_keyUp:function(a){a=a||window.event;switch(SFDOMEvent.getKeyName(a)){case "ESCAPE":this._hidePopup();break;
case "ARROWUP":a.altKey||(this._singleSelectList.moveFocusUp(),this.updateAttribute("aria-activedescendant",this._getListFocusIndex()));break;case "ARROWDOWN":a.altKey||(this._singleSelectList.moveFocusDown(),this.updateAttribute("aria-activedescendant",this._getListFocusIndex()));break;case "RETURN":this._isPopupShown()?Util.browserInfo.ios?this._singleSelectList.selectOnlyValue():this._singleSelectList.selectFocus():this.dispatch("action",{actionCommand:"_keyUp",picklistComp:this,parentPicklistId:this.getParentPicklistId()});
break;case "ALPHA":case "NUMERIC":case "SPACEBAR":case "BACKSPACE":case "OTHER":this.noTypeAhead?SFDOMEvent.preventDefault(a):(this._hidePopup(),a=juic.$(this._getReferenceId()).value,this.dispatch("action",{actionCommand:"_keyUp",picklistComp:this,parentPicklistId:this.getParentPicklistId(),filterValue:a}))}},postAction:function(a){if("action"==a.type)switch(a.actionCommand){case "_click":this.createPopup();this.setFocus();break;case "_keyDown":this._clickToggle();break;case "_keyUp":this._showPopup(a.filterValue)}},
createPopup:function(){this._popup||(this._popup=new SFContextPopup(this._dragResizer,this._getPopupOptions()));this._singleSelectList.clearFilter();this._popup.addEventListener("clickedOutsidePopup",this,"_hidePopup");var a=juic.$(this.id+"_input");a&&a.setAttribute("aria-expanded","true")},_getPopupOptions:function(){return{}},_hidePopup:function(){if(this._popup){this._popup.hide();var a=juic.$(this.id+"_input");a&&a.setAttribute("aria-expanded","false")}}});
function RCMJobReqPaginatedPicklistMgr(){this._picklistArray={}}
RCMJobReqPaginatedPicklistMgr.prototype=function(){return set(new juic.EventTarget,{addPicklist:function(a,b){var c=a.getSectionElementId()+b+a.getPicklistId();this._picklistArray[c]=a;a.addEventListener("action",this);a.addEventListener("_picklistChanged",this)},handleEvent:function(a){switch(a.type){case "_picklistChanged":this.updateChild(a);break;case "action":var b=a.picklistComp;this.setParentOptionIdForChild(b);b&&b.postAction(a)}},updateChild:function(a){var b=a.picklist;if(b.getIdForCascading())for(var c=
b.getChildList(),d,b=0;b<c.length;b++)d=c[b],this.enableAndSetChildPicklist(d,a.selectedOptionId);else for(c=this.getChildPicklistObjects(b),b=0;b<c.length;b++)this.enableAndSetChildPicklist(c[b],a.selectedOptionId,a.ignoreChildUpdate)},enableAndSetChildPicklist:function(a,b,c){b?(a.setEnabled(!0),a.setParentOptionId(b),a.fetchFirstPageItems()):a.setEnabled(!1);c||a.setValue({value:"",label:""})},setParentOptionIdValue:function(a){var b=this.getParentPicklistObject(a);b&&a.setParentOptionId(b.getValue().value)},
setParentOptionIdForChild:function(a){if(a&&a.getIdForCascading())for(var b=a.getChildList(),c,d=0;d<b.length;d++)c=b[d],c.setParentOptionId(a.getValue().value);else this.setParentOptionIdValue(a)},getChildPicklistObjects:function(a){var b=a.getPicklistId();a=a.getChildFieldIds()||[];var c=[],d;for(d in this._picklistArray)b===this._picklistArray[d].getParentPicklistId()&&a.includes(this._picklistArray[d].getFieldName())&&c.push(this._picklistArray[d]);return c},getParentPicklistObject:function(a){if(a){var b=
a.getFieldId()||a.getFieldName(),c=a.getIdForCascading(),d=a.getSectionElementId();a=a.getParentPicklistId();var b=c?c:b,e;for(e in this._picklistArray)if(this._picklistArray[e].getPicklistId()===a&&this._picklistArray[e].getSectionElementId()===d&&this._picklistArray[e].getChildFieldIds()&&0<this._picklistArray[e].getChildFieldIds().length&&this._picklistArray[e].getChildFieldIds().includes(b))return this._picklistArray[e]}}})}();window.paginatedPicklistMgr=new RCMJobReqPaginatedPicklistMgr;