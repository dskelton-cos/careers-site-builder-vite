function SFDataGridMatrix(a,b){this.register(),this._init(a,b)}(function(){var a=Math.max;function b(a,b,c){return a&&null!=a[b]?a[b]:c}function c(){this.register(),this._init.apply(this,arguments)}function d(){return l=f(l,"99999")}function e(){return m=f(m,"100000")}function f(a,b){return a||(a=document.createElement("div"),document.body.firstChild?document.body.insertBefore(a,document.body.firstChild):document.body.appendChild(a),a.onselectstart=function(){return!1},a.unselectable="on",a.style.display="none",a.style.position="absolute",a.style.zIndex=b),a}function g(a,b){for(var c,d=a.getCellManager(),e=d.size(),f=0;f<e.width;f++)if(c=d.get(0,f),c===b){return f;break}}function h(a,b,c){a&&a.addEventListener&&c&&c.handleEvent&&(!a._allowedEvents||a._allowedEvents[b])&&a.addEventListener(b,c)}var i={className:"headerRow",fixedSize:23,header:!0,frozen:!0},j={fixedSize:23},k=Util.browserInfo.ios?20:3;SFDOMEvent.ready(function(){if(Util.isFioriFDEnabled()){var a=Util.isCompactMode()?35:47;i.fixedSize=a,j.fixedSize=a}}),juic.extend(SFDataGridMatrix,juic.Component,{_init:function(a,c){var d=UIVersion.getCurrentInstance();this._themable=d&&0<=d.compareTo(UIVersion.V12),this._draggableColumns=c&&c.draggableColumns,this._dimension=c&&c.dimension,this._autoResize=c&&c.autoResize,this._ellipsis=c&&c.ellipsis;for(var e,f=c&&c.rows,g=c&&c.rowSpacing,h=c&&c.columnOptions||{adjustmentType:"simple"},j=[i],l=[[]],m=[],n=0;n<a.length;n++)e=a[n],m.push(this._createDataGridColumn(e)),l[0].push(this._createHeaderComponent(e));if(f)for(var o=0;o<f.length;o++){for(var p=f[o]||[],q=this._createRowSpacing(o,g&&g[o]),r=[],n=0;n<a.length;n++)r[n]=this._createContentComponent(p[n],o);j.push(q),l.push(r)}this._matrixLayout=new SFMatrixLayout(l,{rowSpacing:j,columnSpacing:m,columnOptions:h,scrollableCells:!1,dragByResizing:c&&c.dragByResizing,minimizeSpace:c&&c.minimizeSpace,dimension:this._dimension,adjusterSize:b(c,"adjusterSize",k),useCustomScrollBar:c&&c.useCustomScrollBar,className:"gridMatrix"+(this._themable?" globalTable":"")}),this._matrixLayout.addEventListener("dimensionAdjusted",this),this._cellManager=this._matrixLayout.getCellManager();for(var s=this._cellManager.size(),o=0;o<s.height;o++)for(var n=0;n<s.width;n++)this._cellManager.get(o,n).setMatrixLayout(this._matrixLayout)},renderHtml:function(a){this._matrixLayout.renderHtml(a)},handleEvent:function(a){switch(a.type){case"adjustHeight":this._handleAdjustHeight(a.target);break;case"columnDrop":case"dimensionAdjusted":this.dispatchEvent(a);break;case"sort":var b=g(this._matrixLayout,a.target);if(this._sortedHeader!=a.target){if(this._sortedHeader){this._sortedHeader.setDirection(null);var c=g(this._matrixLayout,this._sortedHeader);0<=c&&c<this._cellManager.size().width&&this._cellManager.setSpacingOption("x",c,"className","cell "+this.generateFDClasses("table__cell"))}this._cellManager.setSpacingOption("x",b,"className","sort cell "+this.generateFDClasses("table__cell"))}this._sortedHeader=a.target,this.dispatch("sort",{column:b,direction:a.target.getDirection()});}},appendRow:function(a,b){this.insertRow(null,a,b)},appendRows:function(a,b){this.insertRows(null,a,b)},insertRow:function(a,b,c){this.insertRows(a,[b],c&&[c])},insertRows:function(a,b,c){var d=this._cellManager.size(),e=[],f=[],g=b.length;a=null==a?d.height-1:a;for(var h,i=0;i<g;i++){h=e[i]=[];for(var j=0;j<d.width;j++)h[j]=this._createContentComponent(b[i][j],a+i);f[i]=this._createRowSpacing(a+i,c&&c[i])}this._cellManager.insertMultipleInto("y",a+1,e,f);for(var i=0;i<g;i++)for(var j=0;j<d.width;j++)e[i][j].adjustDOM();this._updateRowIndices(a+g+1)},resetRows:function(a){this.removeRows(0,this._cellManager.size().height-1,a)},removeRow:function(a,b){this.removeRows(a,1,b)},removeRows:function(a,b,c){if(c)for(var d=this._cellManager.size(),e=0;e<b;e++)for(var f=0;f<d.width;f++)this._cellManager.get(a+e+1,f).cleanupComponent();this._cellManager.remove("y",a+1,b,!0),this._updateRowIndices(a+1)},moveRow:function(b,c,d){b++,c++;var e=this._cellManager.size().width;this._cellManager.move("y",b,c,d);var f=Math.min(b,c),g=a(b,c,c+d-1);this._updateRowIndices(f,g+1)},appendColumn:function(a,b){this.insertColumn(null,a,b)},insertColumn:function(a,b,c){var d=[],e=this._cellManager.size();c=this._createDataGridColumn(c),a=null==a?e.width:a,d.push(this._createHeaderComponent(c));for(var f=this._cellManager.size().height-1,g=0;g<f;g++)d.push(this._createContentComponent(b[g],g));this._cellManager.insertInto("x",a,d,c)},removeColumn:function(a,b){this.removeColumns(a,1,b)},removeColumns:function(a,b,c){if(c)for(var d=this._cellManager.size(),e=0;e<b;e++)for(var f=0;f<d.height;f++)this._cellManager.get(f,a+e).cleanupComponent();this._cellManager.remove("x",a,b,!0)},moveColumn:function(a,b,c){this._cellManager.move("x",a,b,c)},setRowClassName:function(a,b){this._cellManager.setSpacingOption("y",a+1,"className",this._getRowClassName(a,b))},setColumnClassName:function(a,b){this._cellManager.setSpacingOption("y",a,"className",b)},setRowSize:function(a,b){this._matrixLayout.setSingleDimension("y",a+1,b)},getRowSize:function(a){return this._matrixLayout.getSingleDimension("y",a+1)},setColumnSize:function(a,b){this._matrixLayout.setSingleDimension("x",a,b)},getColumnSize:function(a){return this._matrixLayout.getSingleDimension("x",a)},setDimension:function(a){this._dimension=a,this._matrixLayout.setDimension(a)},adjustDOM:function(){this._dimension||this._matrixLayout.adjustDOM(),(this._autoResize||this._ellipsis)&&this._matrixLayout.broadcast("adjustDOM")},broadcast:function(){this._matrixLayout.broadcast("call",arguments)},scrollTo:function(a,b){this._matrixLayout.scrollTo(a+1,b)},scrollToAxis:function(a,b){this._matrixLayout.scrollToAxis(a,b)},scrollToRow:function(a){this._matrixLayout.scrollToAxis("y",a+1)},scrollToColumn:function(a){this._matrixLayout.scrollToAxis("x",a)},cleanup:function(){this._matrixLayout.broadcast("cleanupComponent"),this._matrixLayout.cleanup(!0),this.unregister()},sortedBy:function(a,b){var c=null;this._sortedHeader&&(c=g(this._matrixLayout,this._sortedHeader)),null!=c&&c!=a&&(this._sortedHeader.setDirection(null),this._cellManager.setSpacingOption("x",c,"className",null)),this._sortedHeader=this._cellManager.get(0,a),this._sortedHeader.setDirection(b),this._cellManager.setSpacingOption("x",a,"className","sort cell")},getComponent:function(a,b){return this._cellManager.get(a+1,b).getComponent()},getColumnOffsets:function(){return this._matrixLayout.getPageOffsets("x")},getColumnOffset:function(a){return this._matrixLayout.getPageOffset("x",a)},getRowOffsets:function(){var a=this._matrixLayout.getPageOffsets("y");return a.splice(0,1),a},getRowOffset:function(a){return this._matrixLayout.getPageOffset("y",a+1)},getDimension:function(){return this._matrixLayout.getDimension()},getAutoScroller:function(){return this._matrixLayout.getAutoScroller()},getRowCount:function(){return this._matrixLayout.getCellManager().size().height-1},getRowAt:function(a){for(var b=[],c=this._matrixLayout.getCellManager(),d=c.size().width,e=0;e<d;e++)b.push(c.get(a+1,e).getComponent());return b},getColumnWidths:function(){return this._matrixLayout.getAxisSizes("x")},setColumnWidths:function(a){this._matrixLayout.setAxisSizes("x",a)},_handleAdjustHeight:function(a){this._adjustRows||(this._adjustRows=[]);var b=a.getRowIndex();this._adjustRows.contains(b)||this._adjustRows.push(b),this._handleAdjustId||(this._handleAdjustId=setTimeout(Util.createCallback(this,"_batchHandleAdjustHeight"),0))},_batchHandleAdjustHeight:function(){if(this._adjustRows)for(var b=this._cellManager.size(),c=0;c<this._adjustRows.length;c++){for(var d,e=this._adjustRows[c],f=0,g=0;g<b.width;g++)d=this._cellManager.get(e,g).getActualHeight(),f=a(f,d);var h=this._matrixLayout.getSingleDimension("y",e);f!=h&&(this._matrixLayout.setSingleDimension("y",e,f),this._cellManager.getSpacingManager("y").setBounds(e,{minSize:f}))}this._adjustRows=[],this._handleAdjustId=null},_updateRowIndices:function(a,b){var c=this._cellManager.size();b=b||c.height;for(var d=a;d<b;d++){this._cellManager.setSpacingOption("y",d,"className",this._getRowClassName(d));for(var e=0;e<c.width;e++)this._cellManager.get(d,e).setRowIndex(d)}},_createRowSpacing:function(a,b){var c=juic.set({},b||j);return c.className=this._getRowClassName(a,b&&b.className),c},_createDataGridColumn:function(a){var a=juic.set({},a);return a.className=(a.className?a.className+" ":"")+"cell",a},_getRowClassName:function(a,b){var c;return c=this._themable?0==a%2?"row":"alterRow":0==a%2?"b":"a",c+(b?" "+b:"")},_createHeaderComponent:function(a){var b=new c(a.label,{className:"gridHeader",sortable:a.sortable,draggable:this._draggableColumns&&!a.frozen,autoResize:this._autoResize,ellipsis:this._ellipsis});return b.addEventListener("columnDrop",this),b.addEventListener("adjustHeight",this),b.addEventListener("sort",this),b.setMatrixLayout(this._matrixLayout),b.setRowIndex(0),b},_createContentComponent:function(a,b){var d=new c(a,{className:"gridRow",autoResize:this._autoResize,ellipsis:this._ellipsis});return d.addEventListener("adjustHeight",this),d.setMatrixLayout(this._matrixLayout),d.setRowIndex(b+1),d}}),c.prototype=function(){return juic.set(new juic.Component,{_init:function(a,b){this._component=a,this._options=b,h(this,"resize",this._component)},renderHtml:function(a){a.push("<div id=\"",this.id,"\"");var b=this._options&&this._options.className,c=this._options&&this._options.draggable,d=this._options&&this._options.ellipsis,e=[b],f=0>=this.getRowCount();if(c&&!f&&(e.push("draggable"),a.push(" unselectable=\"on\" onselectstart=\"return false;\" onmousedown=\""),a.push(this.fireCode("_fireDragStart"),"\" ontouchstart=\"",this.fireCode("_fireDragStart"),"\"")),d&&e.push("no-wrap"),a.push(" class=\"",e.join(" "),"\"><div class=\"gridCell\">"),this._options.sortable&&(a.push("<a href=\"javascript:void(0);\" rel=\"noopener\" onclick=\"",this.fireCode("_fireSort")),a.push("return false;\" class=\"link ",this.generateFDClasses("link"),"\">")),this._component&&this._component.renderHtml?this._component.renderHtml(a):a.push(this._component?juic.escapeHTML(this._component.toString()):""),this._options.sortable){var g="&nbsp;";AccessibilityPrefs.isLowVisionEnabled()&&this._direction&&(g="up"==this._direction?"&uArr;":"&dArr;");var h=this._direction?"sort"+this._direction:"";a.push("<span id=\"",this.id,"arrow\" class=\"",h,"\">"+g+"</span></a>")}a.push("</div>"),d&&a.push("<div class=\"ellipsis cellColors\">...</div>"),a.push("</div>")},_getXpoint:function(a){return Util.isRTL()?SFDom.getViewportWidth()-a:a},handleDragEvent:function(a){var b=d(),c="left";switch(Util.isRTL()&&(c="right"),a.type){case"dragStart":{this._dragging=!0;var f=this._cellManager.size();this._originIndex=g(this._matrixLayout,this),this._originSection=this._matrixLayout.getSectionName("x",this._originIndex);var h=juic.$(this.id);this._originPosition={top:this._matrixLayout.getPageOffset("y",0),left:this._matrixLayout.getPageOffset("x",this._originIndex)};var i={top:this._originPosition.top+"px",width:this._dimension.width+"px",height:this._dimension.height+"px",display:""};i[c]=this._originPosition.left,b.className="gridHeaderProxy",b.innerHTML=h.innerHTML,juic.set(b.style,i),this._lastPoint=a.origin,this._movePointer();break}case"drag":b.style.top=this._originPosition.top-a.origin.y+a.point.y+"px",b.style[c]=this._originPosition.left-this._getXpoint(a.origin.x)+this._getXpoint(a.point.x)+"px",this._originSection==SFMatrixLayout.MIDDLE_SECTION&&this._autoScroller.autoScrollAxis(a.point,"x"),this._lastPoint=a.point,this._movePointer();break;case"dragEnd":{var j=this._originIndex,k=this._dropPosition;j<k&&k--;var l=e();l.style.display="none",this._cellManager.move("x",j,k,1),this.dispatch("columnDrop",{index0:j,index1:k});var m=new SFPoint(this._matrixLayout.getPageOffset("x",k),this._originPosition.top);this._autoScroller.stopScrolling();var n={top:m.y};n[c]=m.x,SFAnimUtil.animate(b,n,{duration:.3,easing:"easeOut",complete:function(){b.style.display="none",b.innerHTML="",b.style.width=""}}),this._dragging=!1;break}}},handleEvent:function(a){switch(a.type){case"resize":this.setDimension(a);break;case"autoScroll":this._handleAutoScroll();}},adjustDOM:function(){var b=juic.$(this.id);if(b&&this._dimension)if(this._options.autoResize){this._heightPadding||(this._heightPadding=parseInt(SFDom.getStyle(b,"padding-top")),this._heightPadding+=parseInt(SFDom.getStyle(b,"padding-bottom"))),b.style.height=a(0,this._dimension.height-this._heightPadding)+"px";var c=b.firstChild.offsetHeight+this._heightPadding,d=this._actualHeight&&this._actualHeight!=c||c>this._dimension.height;this._actualHeight=c,d&&this.dispatch("adjustHeight")}else if(this._options.ellipsis){this._widthPadding||(this._widthPadding=SFDom.getPadding(b,"x"));var e=b.firstChild.scrollWidth+this._widthPadding,f=this._dimension.width<e;SFDom[f?"addClass":"removeClass"](b,"show-ellipsis")}},getActualHeight:function(){return this._actualHeight},setDimension:function(a){this._dimension={width:a.width,height:a.height},this.dispatch("resize",this._dimension),this.adjustDOM()},getDirection:function(){return this._direction},setDirection:function(a){this._direction=a;var b=juic.$(this.id+"arrow");b&&(b.className=this._direction?"sort"+this._direction:"")},setMatrixLayout:function(a){a&&(this._matrixLayout=a,this._cellManager=a.getCellManager(),this._options&&this._options.draggable&&(this._autoScroller=this._matrixLayout.getAutoScroller(),this._autoScroller.addEventListener("autoScroll",this)))},setRowIndex:function(a){this._rowIndex=a},getRowIndex:function(){return this._rowIndex},getRowCount:function(){return this._cellManager.size().height-1},getComponent:function(){return this._component},cleanupComponent:function(){this._component&&this._component.cleanup&&this._component.cleanup(),delete this._component},setOptions:function(a){juic.set(this._options,a);var b=juic.$(this.id);b&&(b.className=this._options.className)},call:function(a,b){this._component[a]&&this._component[a].apply(this._component,b?b:[])},_fireSort:function(){this.setDirection("up"==this._direction?"down":"up"),this.dispatch("sort",{direction:this._direction})},_movePointer:function(){var a=Math.abs,b=Number.POSITIVE_INFINITY,c=0,d="left",f=1;Util.isRTL()&&(d="right",f=-1);var g=b;if(this._originSection==SFMatrixLayout.MIDDLE_SECTION){var h=this._autoScroller.getScrollEl();c=SFDom.getX(h),g=c+h.offsetWidth}for(var i,j=this._matrixLayout.getPageOffsets("x"),k=b,l=0;l<j.length;l++)if(!(this._originSection!=this._matrixLayout.getSectionName("x",l)||this._cellManager.isHidden("x",l))&&j[l]>=c&&j[l]<=g){var m=a(j[l]-this._getXpoint(this._lastPoint.x));m<k&&(k=m,this._dropPosition=l),i=l}this._pointerOffset=j[this._dropPosition];var n=j[i]+this._matrixLayout.getSingleDimension("x",i);if(n>=c&&n<=g){var m=a(j[l]-this._getXpoint(this._lastPoint.x));m<k&&(this._pointerOffset=n,this._dropPosition+=f)}var o=e();"none"==o.style.display&&(o.className="gridDropPointer",o.innerHTML="&nbsp;",juic.set(o.style,{display:"",top:this._originPosition.top+"px"})),o.style[d]=this._pointerOffset+"px"},_handleAutoScroll:function(){this._dragging&&this._movePointer()},_fireDragStart:function(a){SFDragDropMgr.handleMouseDown(a,this,{useShim:!0,shimCursor:"move"})}})}();var l=null,m=null})();