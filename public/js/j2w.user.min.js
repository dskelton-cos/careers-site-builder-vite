var j2w=j2w||{};
j2w.User=function(){var h={},k=!1,f={},n=function(a,b){if(!b||!b.hasOwnProperty("values")||!b.values.length)return a;var c=b.values[0];a.setID(c.id);a.setFirstName(c.firstName);a.setLastName(c.lastName);a.setProfileURL(c.publicProfileUrl);if(c.headline){var d=c.headline.split(/ at /i);d[0]&&a.setTitle(d[0]);d[1]&&a.setEmployer(d[1])}c.location&&(a.setLocation(c.location.name),a.setCountry(c.location.country.code));c.educations&&c.educations.values&&c.educations.values.length&&$.each(c.educations.values,function(b,
c){var d=new l;c.degree&&d.setDegree(c.degree);c.fieldOfStudy&&d.setFieldOfStudy(c.fieldOfStudy);c.schoolName&&d.setSchoolName(c.schoolName);a.addEducation(d)});c.positions&&c.positions.values&&c.positions.values.length&&$.each(c.positions.values,function(b,c){var d=new g;c.company&&c.company.name&&d.setCompany(c.company.name);c.isCurrent&&d.setCurrent(c.isCurrent);c.title&&d.setTitle(c.title);c.startDate&&(c.startDate.month&&d.setStartDateMonth(c.startDate.month),c.startDate.year&&d.setStartDateYear(c.startDate.year));
c.endDate&&(c.endDate.month&&d.setEndDateMonth(c.endDate.month),c.endDate.year&&d.setEndDateYear(c.endDate.year));a.addEmployment(d)});c.skills&&c.skills.values&&c.skills.values.length&&$.each(c.skills.values,function(c,b){var d=new m;b.name&&oEd.setName(b.name);a.addSkill(d)});a.createKeywords();return a},p=function(a,b){if(!b)return a;a.setSource("sk");a.setID(b.id);a.setFirstName(b.applicantInfo.firstName);a.setLastName(b.applicantInfo.lastName);b.applicantInfo.emailAddress&&a.setEmailAddressIfNotAlreadySet(b.applicantInfo.emailAddress);
b.resume.link&&a.setProfileURL(b.resume.link);if(b.applicantInfo.workHistory&&b.applicantInfo.workHistory.length){var c=b.applicantInfo.workHistory[0];c.jobTitle&&c.jobTitle.length&&a.setTitle(c.jobTitle);c.companyName&&c.companyName.length&&a.setEmployer(c.companyName)}b.applicantInfo.currentLocation&&b.applicantInfo.currentLocation.description&&a.setLocation(b.applicantInfo.currentLocation.description);b.applicantInfo.workHistory&&b.applicantInfo.workHistory.length&&$.each(b.applicantInfo.workHistory,
function(c,b){var e=new g;e.setCompany(b.companyName);b.jobTitle&&e.setTitle(b.jobTitle);b.from&&b.from.length&&("0000"!==b.from.split("-")[0]&&e.setStartDateYear(b.from.split("-")[0]),"00"!==b.from.split("-")[1]&&e.setStartDateMonth(b.from.split("-")[1]));b.to&&b.to.length&&("0000"!==b.to.split("-")[0]&&e.setEndDateYear(b.to.split("-")[0]),"00"!==b.to.split("-")[1]&&e.setEndDateMonth(b.to.split("-")[1]));a.addEmployment(e)});a.createKeywords();return a},q=function(){this.action="";this.agent=null;
this.frequency=7;this.cleanTitle=this.cleanLocation="";this.education=[];this.employer=this.emailAddress="";this.employment=[];this.id="";this.jobs=[];this.keywords="";this.locale="en_US";this.location={city:"",country:"",general:"",state:""};this.name={first:"",last:""};this.rawPayload=this.profileURL="";this.skills=[];this.title=this.source="";this.getAction=function(){return this.action};this.setAction=function(a){this.action=a};this.getAgent=function(){return this.agent};this.setAgent=function(a){this.agent=
a};this.getFrequency=function(){return this.frequency};this.setFrequency=function(a){this.frequency=a};this.getCity=function(){return this.location.city};this.setCity=function(a){this.location.city=a};this.getCleanLocation=function(){return this.cleanLocation};this.setCleanLocation=function(a){this.cleanLocation=a};this.getCleanTitle=function(){return this.cleanTitle};this.setCleanTitle=function(a){this.cleanTitle=a};this.getCountry=function(){return this.location.country};this.setCountry=function(a){this.location.country=
a};this.getEducation=function(){return this.education};this.getEmailAddress=function(){return this.emailAddress};this.setEmailAddress=function(a){this.emailAddress=a};this.getEmployer=function(){return this.employer};this.setEmployer=function(a){this.employer=a};this.getEmployment=function(){return this.employment};this.getFirstName=function(){return this.name.first};this.setFirstName=function(a){this.name.first=a};this.getID=function(){return this.id};this.setID=function(a){this.id=a};this.getJobs=
function(){return this.jobs};this.setJobs=function(a){this.jobs=a};this.getKeywords=function(){return this.keywords};this.setKeywords=function(a){this.keywords=a};this.getLastName=function(){return this.name.last};this.setLastName=function(a){this.name.last=a};this.getLocale=function(){return this.locale};this.setLocale=function(a){this.locale=a};this.getLocation=function(){return this.location.general};this.setLocation=function(a){this.location.general=a};this.getProfileURL=function(){return this.profileURL};
this.setProfileURL=function(a){this.profileURL=a};this.getRawPayload=function(){return this.rawPayload};this.setRawPayload=function(a){this.rawPayload=a};this.getSkills=function(){return this.skills};this.getSource=function(){return this.source};this.setSource=function(a){this.source=a};this.getState=function(){return this.location.state};this.setState=function(a){this.location.state=a};this.getTitle=function(){return this.title};this.setTitle=function(a){this.title=a};this.addEducation=function(a){this.education.push(a)};
this.addEmployment=function(a){this.employment.push(a)};this.addSkill=function(a){this.skills.push(a)};this.createKeywords=function(){var a=this.getTitle().split(" ");this.getEducation().length&&$.each(this.getEducation(),function(b,c){c.getDegree().length&&(a=a.concat(c.getDegree().split(" ")));c.getFieldOfStudy().length&&(a=a.concat(c.getFieldOfStudy().split(" ")))});this.getSkills()&&$.each(this.getSkills(),function(b,c){c.getName().length&&(a=a.concat(c.getName().split(" ")))});this.setKeywords(a.join().toLowerCase())};
this.setEmailAddressIfNotAlreadySet=function(a){!this.getEmailAddress().length&&a.length&&this.setEmailAddress(a)};this.getWholeProfile=function(){f=j2w.Args.collect();var a={context:{action:this.getAction(),locale:this.argsHandler("locale"),source:this.getSource(),categoryID:0!=this.argsHandler("categoryid")?this.argsHandler("categoryid"):"",jobID:0!=this.argsHandler("jobid")?this.argsHandler("jobid"):"",brand:j2w.Args.get("brand"),email:this.getEmailAddress()},sourceData:this.getRawPayload()?JSON.stringify(this.getRawPayload()).replace(/["]/g,
'"'):""};a.agent=this.getAgentProfileForExport();!a.agent.keywords.length&&this.getKeywords().length&&(a.agent.keywords=a.agent.q=this.getKeywords());!a.agent.location.length&&this.getLocation().length&&(a.agent.location=this.getLocation());return a};this.getAgentProfileForExport=function(){function a(){var a=c(),b=d.getAgent();a.keywords=b.getKeywords();a.location=b.getLocation();a.q=b.getKeywords();a.geoLocation=b.getGeolocation();a.longitude=b.getLongitude();a.latitude=b.getLatitude();a.distance=
b.getRadius();a.units=b.getUnits();a.frequency=b.getFrequency();a.filterString=d.getFilterStringCalculated();return a}function b(){var a=c();a.keywords=d.argsHandler("q");a.location=d.argsHandler("location");a.q=d.argsHandler("q");a.locationSearch=d.argsHandler("locationsearch");a.geoLocation=d.argsHandler("geolocation");a.longitude=d.argsHandler("lon");a.latitude=d.argsHandler("lat");a.distance=d.argsHandler("d");a.units=d.getAgentUnits();a.frequency=d.getFrequency();a.filterString=d.getFilterStringCalculated();
return a}function c(){return{keywords:"",location:"",q:"",locationSearch:"",geoLocation:"",longitude:"",latitude:"",distance:"",units:"",country:"",frequency:"",filterString:""}}var d=this;return this.getAgent()?a():b()};this.argsHandler=function(a){var b=f[a];if(void 0===b)switch(a){case "jobid":b=f.jobID;break;case "categoryid":b=f.categoryId}return void 0!==b?b:""};this.getAgentUnits=function(){if(this.argsHandler("d")){var a=$("select[id^='geolocation-distance-options-select-']:visible").first();
if(a.length)return a.attr("id").split("-").pop()}return""};this.getFilterStringCalculated=function(){var a="";this.argsHandler("optionsFacetsDD_location")&&(a=a+"location:"+this.argsHandler("optionsFacetsDD_location")+",");this.argsHandler("optionsFacetsDD_city")&&(a=a+"city:"+this.argsHandler("optionsFacetsDD_city")+",");this.argsHandler("optionsFacetsDD_state")&&(a=a+"state:"+this.argsHandler("optionsFacetsDD_state")+",");this.argsHandler("optionsFacetsDD_country")&&(a=a+"country:"+this.argsHandler("optionsFacetsDD_country")+
",");this.argsHandler("optionsFacetsDD_zip")&&(a=a+"zip:"+this.argsHandler("optionsFacetsDD_zip")+",");this.argsHandler("optionsFacetsDD_title")&&(a=a+"title:"+this.argsHandler("optionsFacetsDD_title")+",");this.argsHandler("optionsFacetsDD_shifttype")&&(a=a+"shifttype:"+this.argsHandler("optionsFacetsDD_shifttype")+",");this.argsHandler("optionsFacetsDD_facility")&&(a=a+"facility:"+this.argsHandler("optionsFacetsDD_facility")+",");this.argsHandler("optionsFacetsDD_department")&&(a=a+"department:"+
this.argsHandler("optionsFacetsDD_department")+",");this.argsHandler("optionsFacetsDD_dept")&&(a=a+"dept:"+this.argsHandler("optionsFacetsDD_dept")+",");this.argsHandler("optionsFacetsDD_joblocale")&&(a=a+"joblocale:"+this.argsHandler("optionsFacetsDD_joblocale")+",");this.argsHandler("optionsFacetsDD_lang")&&(a=a+"lang:"+this.argsHandler("optionsFacetsDD_lang")+",");this.argsHandler("optionsFacetsDD_customfield1")&&(a=a+"customfield1:"+this.argsHandler("optionsFacetsDD_customfield1")+",");this.argsHandler("optionsFacetsDD_customfield2")&&
(a=a+"customfield2:"+this.argsHandler("optionsFacetsDD_customfield2")+",");this.argsHandler("optionsFacetsDD_customfield3")&&(a=a+"customfield3:"+this.argsHandler("optionsFacetsDD_customfield3")+",");this.argsHandler("optionsFacetsDD_customfield4")&&(a=a+"customfield4:"+this.argsHandler("optionsFacetsDD_customfield4")+",");this.argsHandler("optionsFacetsDD_customfield5")&&(a=a+"customfield5:"+this.argsHandler("optionsFacetsDD_customfield5")+",");this.argsHandler("optionsFacetsDD_referencedate")&&
(a=a+"referencedate:"+this.argsHandler("optionsFacetsDD_referencedate")+",");this.argsHandler("optionsFacetsDD_brand")&&(a=a+"brand:"+this.argsHandler("optionsFacetsDD_brand")+",");return a.substr(0,a.length-1)};this.toJSON=function(){return JSON.stringify(this.getWholeProfile())};return!0},l=function(){this.schoolName=this.fieldOfStudy=this.degree="";this.getDegree=function(){return this.degree};this.setDegree=function(a){this.degree=a};this.getFieldOfStudy=function(){return this.fieldOfStudy};this.setFieldOfStudy=
function(a){this.fieldOfStudy=a};this.getSchoolName=function(){return this.schoolName};this.setSchoolName=function(a){this.schoolName=a};return!0},g=function(){this.title=this.company="";this.current=!1;this.startDate={month:"",year:""};this.endDate={month:"",year:""};this.getCompany=function(){return this.company};this.setCompany=function(a){this.company=a};this.getCurrent=function(){return this.current};this.setCurrent=function(a){this.current=a};this.getEndDateMonth=function(){return this.endDate.month};
this.setEndDateMonth=function(a){this.endDate.month=a};this.getEndDateYear=function(){return this.endDate.year};this.setEndDateYear=function(a){this.endDate.year=a};this.getStartDateMonth=function(){return this.startDate.month};this.setStartDateMonth=function(a){this.startDate.month=a};this.getStartDateYear=function(){return this.startDate.year};this.setStartDateYear=function(a){this.startDate.year=a};this.getTitle=function(){return this.title};this.setTitle=function(a){this.title=a};this.formatDate=
function(a,b){var c=[];"undefined"===typeof a&&(a="");"undefined"===typeof b&&(b="");a.toString().length&&c.push(a);b.toString().length&&c.push(b);return c.join("/")};this.getEndDateFormatted=function(){return this.formatDate(this.getEndDateMonth(),this.getEndDateYear())};this.getStartDateFormatted=function(){return this.formatDate(this.getStartDateMonth(),this.getStartDateYear())};return!0},m=function(){this.name="";this.getName=function(){return this.name};this.setName=function(a){this.name=a};
return!0};return{init:function(a){k?a=!1:(h=a,a=k=!0);return a},Args:{get:function(a){return j2w.Args.get(a,h)}},profileImport:function(a,b,c){a=$.extend({action:"",socialSrc:"",frequency:7,emailAddress:""},a);var d=new q;a.hasOwnProperty("agent")&&d.setAgent(a.agent);d.setSource(a.socialSrc);d.setAction(a.action);d.setFrequency(a.frequency);d.setEmailAddress(a.emailAddress);d.setRawPayload(b);a.hasOwnProperty("location")&&d.setLocation(a.location);a.hasOwnProperty("keywords")&&d.setKeywords(a.keywords);
if(!0===c)switch(a.socialSrc){case "li":n(d,b);break;case "sk":p(d,b);break;case "xi":b&&(d.setSource("xi"),d.setID(b.id),d.setFirstName(b.first_name),d.setLastName(b.last_name),b.active_email&&d.setEmailAddressIfNotAlreadySet(b.active_email),b.permalink&&d.setProfileURL(b.permalink),b.business_address&&b.business_address.city&&d.setLocation(b.business_address.city),b.professional_experience&&b.professional_experience.primary_company&&(a=b.professional_experience.primary_company,a.title&&d.setTitle(a.title),
a.name&&d.setEmployer(a.name),b=new g,b.setCompany(a.name),a.title&&b.setTitle(a.title),d.addEmployment(b)),d.createKeywords())}return d}}}();
