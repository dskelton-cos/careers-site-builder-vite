function SFPersonAutoCompleteWrapper(a,b){this.register(),this._init(a,b)}(function(){function a(a,b){var c=a.join(","),e=d[c];e||(e=d[c]=[]),e.push(b),1==e.length&&SMRF.load(a,function(){for(var a=0;a<e.length;a++)e[a]();d[c]=null})}var b={1:{dependency:"/ui/sfgrp/js/juicCommonFormElements.js",constructorName:"SFAutoComplete"},2:{arguments:{},dependency:"/ui/juic/js/components/sfPersonAutoComplete.js",constructorName:"SFPersonAutoComplete"},3:{arguments:[null,{hideQuickcardDisplay:!0,isV12Plus:!0}],dependency:"/ui/quickcard/js/quickcard.js",constructorName:"QuickcardPeopleSearch"}},c=["setAriaLabelledBy","showResetButton","hideResetButton","showElement","hideElement","setFocus","displayErrorMesage","validate","setAuxiliaryQuery","setAdditionalCriteria","appendAdditionalCriteria"];juic.extend(SFPersonAutoCompleteWrapper,Component,{_init:function(a,d){var e=juic.$("autocomplete.personBased"),f=[];if(!juic.Config.validate(a,[null,juic.Config.arrayType({version:"number",dependency:["string",juic.Config.arrayType("string"),null],constructorName:["string","function",null],arguments:["object",juic.Config.arrayType(),null]})],f))throw f.forEach(function(a){surj.Logger.error.apply(surj.Logger,a)}),new Error("SFPersonAutoCompleteWrapper: Invalid configs");this._options=new juic.Config(d,{version:e&&"true"===e.content?2:1},{version:[null,"number"],userIdInputId:[null,"string"],userIdInputName:[null,"string"],userDisplayValueInputId:[null,"string"],userDisplayValueInputName:[null,"string"]});var g;if(this._version=this._options.version,this._options.useVersion3&&1==this._version&&(this._version=3),Array.isArray(a))for(var h,j=0;j<a.length;j++)if(h=a[j],h.version==this._version){g=h;break}g=this._config=new juic.Config(g,b[this._version]);var k=g.arguments;if(!Array.isArray(k)){var l=k;k=[],"undefined"!=typeof l&&k.push(l),g.arguments=k}window[g.constructorName]?this._createWidget():this._loadDependency();for(var m,j=0;j<c.length;j++)m=this,function(a){m[a]=function(){if(this._widget&&"function"==typeof this._widget[a])return this._widget[a].apply(this._widget,arguments)}}(c[j])},cleanup:function(){this._widget&&this._widget.cleanup(),this._super()},renderHtml:function(a){a.push("<span id=\"",this.id,"\">"),a.push("<span id=\"",this.getContainerId(),"\">"),this._widget&&this._widget.renderHtml(a),a.push("</span>");var b=this.getUserIdInputId();if(b){var c=this.getUserIdInputName();a.push("<input id=\"",b,"\" name=\"",c,"\" type=\"hidden\" onchange=\"",this.fireCode("_pullHiddenFields"),"\">")}var d=this.getUserDisplayValueInputId();if(d){var e=this.getUserDisplayValueInputName();a.push("<input id=\"",d,"\" name=\"",e,"\" type=\"hidden\" onchange=\"",this.fireCode("_pullHiddenFields"),"\">")}if(b||d)if("function"==typeof a.addAfterRenderListener)a.addAfterRenderListener(this,"_pushHiddenFields");else if(null==this._renderTimeout){function a(){f.isRegistered()&&(juic.$(f.id)?(f._renderTimeout=null,f._pushHiddenFields()):setTimeout(a,1e3))}var f=this;this._renderTimeout=setTimeout(a,100)}a.push("</span>")},_pushHiddenFields:function(){if(!this._activePull&&this._widget){this._activePush=!0;var a=this.getValue(),b=this.getUserIdInputId();if(b){var c=juic.$(b);c&&(c.value=a||"")}var d=this.getUserObject(),e=d&&d.FullName,f=this.getUserDisplayValueInputId();if(f){var c=juic.$(f);c&&(c.value=e||"")}this._activePush=!1}},_pullHiddenFields:function(a){if(!this._activePush)if(!0===a){this._synchHiddenTimeout=null;var b,c,d=this.getUserIdInputId();if(d){var e=juic.$(d);b=e&&e.value}var f=this.getUserDisplayValueInputId();if(f){var e=juic.$(f);c=e&&e.value}this._activePull=!0,this.setValue(b?{userId:b,userDisplayValue:c||""}:null),this._activePull=!1}else if(null==this._synchHiddenTimeout){var g=this;this._synchHiddenTimeout=setTimeout(function(){g._pullHiddenFields(!0)},10)}},_loadDependency:function(){var b=this,c=this._config.dependency;if("string"==typeof c)c=[c];else if(!Array.isArray(c))throw new Error("SFPersonAutoCompleteWrapper: Dependency was not string or array");a(c,function(){b._createWidget()})},_createWidget:function(){if(this.isRegistered()){var a=window[this._config.constructorName];if(a){var b=this._config.arguments;switch(this._widget=new a(b[0],b[1],b[2]),this._version){case 3:case 2:this._widget.addEventListener("action",this,"_onPersonAction"),this._widget.addEventListener("change",this,"_onPersonChange"),this._widget.addEventListener("itemSelected",this,"_onPersonItemSelected"),this._widget.addEventListener("itemRemoved",this,"_onPersonItemRemoved");break;default:this._widget.addEventListener("change",this,"dispatchEvent"),this._widget.addEventListener("action",this,"_onEmploymentAction"),this._widget.addEventListener("blur",this,"dispatchEvent");}var c=juic.$(this.getContainerId());c&&this._widget.render(c),this._initialValue&&this.setValue(this._initialValue)}else{var d="SFPersonAutoCompleteWrapper: The constructor "+this._config.constructorName+" was not found. The dependency must not have defined it properly: "+this._config.dependency;throw juic.Logger.error(d),new Error(d)}}},_onEmploymentAction:function(a){"itemSelect"==a.actionCommand&&this._pushHiddenFields(),this.dispatchEvent(a)},_onPersonChange:function(){this._pushHiddenFields(),this.dispatch("change"),this.dispatch("action",{actionCommand:"change"})},_onPersonAction:function(a){switch(a.actionCommand){case"blur":this.dispatch("blur");break;default:this.dispatchEvent(a);}},_getPerson:function(){if(this._widget)switch(this._version){case 3:return this._widget.getValueObject();case 2:return this._widget.getValue();}return null},_onPersonItemSelected:function(){var a=this._getPerson();this.dispatch("action",{actionCommand:"itemSelect",actionData:a?{userId:a.userId,userDisplayValue:a.name,person:a}:null})},_onPersonItemRemoved:function(){var a=this._getPerson();this.dispatch("action",{actionCommand:"itemRemoved",actionData:a?{userId:a.userId,userDisplayValue:a.name,person:a}:null})},getValue:function(){if(!this._widget)return null;if(2==this._version){var a=this._widget.getValue();return a?a.userId:""}return this._widget.getValue()},getUserObject:function(){if(this._widget)switch(this._version){case 3:case 2:var a=this._getPerson();return{FullName:a?a.name:"",FirstName:a?a.firstName:"",LastName:a?a.lastName:"",UserName:a?a.userName:"",Location:"",Department:"",UserId:a?a.userId:"",MiddleInitial:"",Count:"",photoMod:a?a.photoMod:""};default:return this._widget.getUserObject();}},getSelectedObject:function(){if(this._widget){switch(this._version){case 3:case 2:var a=this._getPerson();return a?[a.name,a.firstName,a.lastName,null,null,a.userId,"",null,null]:void 0;default:return this._widget.getSelectedObject();}if(2==this._version){var a=this._widget.getValue();return a?[a.name,a.firstName,a.lastName,null,null,a.userId,"",null,null]:void 0}return this._widget.getSelectedObject()}},setSelectedObject:function(a){if(this._widget)switch(this._version){case 3:case 2:this._widget.setValue({userId:a[6],name:a[0],firstName:a[1],lastName:a[2]});break;default:this._widget.setSelectedObject(a);}},setDisabled:function(a){if(this._widget)switch(this._version){case 3:case 2:this._widget.setEnabled(!a);break;default:this._widget.setDisabled(a);}},isDisabled:function(){if(this._widget)switch(this._version){case 3:case 2:return!this._widget.isEnabled();break;default:return this._widget.isDisabled();}},clearSearch:function(){if(this._widget)switch(this._version){case 3:case 2:this._widget.clearValue(),this.dispatch("action",{actionCommand:"hideNoResults"});break;default:this._widget.clearSearch();}},setValue:function(a){if(this._widget)switch(this._version){case 3:case 2:this._widget.setValue(a?{userId:a.userId,name:a.userDisplayValue}:null);break;default:this._widget.setValue(a);}else this._initialValue=a},getInputValue:function(){return this.getValue()},getContainerId:function(){return this.id+"container"},getVersion:function(){return this._version},getUserIdInputId:function(){return this._options.userIdInputId},getUserIdInputName:function(){return this._options.userIdInputName||this.getUserIdInputId()},getUserDisplayValueInputId:function(){return this._options.userDisplayValueInputId},getReferenceId:function(){return this._widget?this._widget.getReferenceId():this._super()},getUserDisplayValueInputName:function(){return this._options.userDisplayValueInputName||this.getUserDisplayValueInputId()}});var d={}})();