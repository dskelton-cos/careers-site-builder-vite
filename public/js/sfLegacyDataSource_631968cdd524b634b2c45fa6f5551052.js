(function(){var util=juic.legacyUtil;util.DataSourceBase=function(e,a){if(null!==e&&void 0!==e){if(this.liveData=e,this._oQueue={interval:null,conn:null,requests:[]},this.responseSchema={},a&&a.constructor==Object)for(var t in a)t&&(this[t]=a[t]);var n=this.maxCacheEntries;("number"!=typeof n||!isFinite(n)||0>n)&&(n=0),this._aIntervals=[],this.createEvent("cacheRequestEvent"),this.createEvent("cacheResponseEvent"),this.createEvent("requestEvent"),this.createEvent("responseEvent"),this.createEvent("responseParseEvent"),this.createEvent("responseCacheEvent"),this.createEvent("dataErrorEvent"),this.createEvent("cacheFlushEvent");var r=util.DataSourceBase;this._sName="DataSource instance"+r._nIndex,r._nIndex++}};var DS=util.DataSourceBase;Object.assign(DS,{TYPE_UNKNOWN:-1,TYPE_JSARRAY:0,TYPE_JSFUNCTION:1,TYPE_XHR:2,TYPE_JSON:3,TYPE_XML:4,TYPE_TEXT:5,TYPE_HTMLTABLE:6,TYPE_SCRIPTNODE:7,TYPE_LOCAL:8,ERROR_DATAINVALID:"Invalid data",ERROR_DATANULL:"Null data",_nIndex:0,_nTransactionId:0,_cloneObject:function(e){if(!Util.isValue(e))return e;var a={};if("[object RegExp]"===Object.prototype.toString.apply(e))a=e;else if("function"==typeof e)a=e;else if(Array.isArray(e)){for(var t=[],n=0,r=e.length;n<r;n++)t[n]=DS._cloneObject(e[n]);a=t}else if(e&&("object"==typeof e||"function"==typeof e)){for(var s in e)if(e.hasOwnProperty&&e.hasOwnProperty(s)){var o=e[s];a[s]=o&&("object"==typeof o||"function"==typeof o)||Array.isArray(o)?DS._cloneObject(o):o}}else a=e;return a},_getLocationValue:function(e,a){var t,n,r=e.locator||e.key||e,s=a.ownerDocument||a,o=null;try{if("undefined"!=typeof s.evaluate)for(t=s.evaluate(r,a,s.createNSResolver(a.ownerDocument?a.ownerDocument.documentElement:a.documentElement),0,null);n=t.iterateNext();)o=n.textContent;else s.setProperty("SelectionLanguage","XPath"),t=a.selectNodes(r)[0],o=t.value||t.text||null;return o}catch(a){}},issueCallback:function(e,a,t,n){if("function"==typeof e)e.apply(n,a);else if(e&&("object"==typeof e||"function"==typeof e)){n=e.scope||n||window;var r=e.success;t&&(r=e.failure),r&&r.apply(n,a.concat([e.argument]))}},parseString:function(e){if(!Util.isValue(e))return null;var a=e+"";return"string"==typeof a?a:null},parseNumber:function(e){if(!Util.isValue(e)||""===e)return null;var a=1*e;return"number"==typeof a&&isFinite(a)?a:null},convertNumber:function(e){return DS.parseNumber(e)},parseDate:function(e){var a=null;if(Util.isValue(e)&&!(e instanceof Date))a=new Date(e);else return e;return a instanceof Date?a:null},convertDate:function(e){return DS.parseDate(e)}}),DS.Parser={string:DS.parseString,number:DS.parseNumber,date:DS.parseDate},DS.prototype={_sName:null,_aCache:null,_oQueue:null,_aIntervals:null,maxCacheEntries:0,liveData:null,dataType:DS.TYPE_UNKNOWN,responseType:DS.TYPE_UNKNOWN,responseSchema:null,useXPath:!1,cloneBeforeCaching:!1,toString:function(){return this._sName},getCachedResponse:function(e,a,t){var n=this._aCache;if(!(0<this.maxCacheEntries))n&&(this._aCache=null);else if(!n)this._aCache=[];else{var r=n.length;if(0<r){var s=null;this.fireEvent("cacheRequestEvent",{request:e,callback:a,caller:t});for(var o,l=r-1;0<=l;l--)if(o=n[l],this.isCacheHit(e,o.request)){s=o.response,this.fireEvent("cacheResponseEvent",{request:e,response:s,callback:a,caller:t}),l<r-1&&(n.splice(l,1),this.addToCache(e,s)),s.cached=!0;break}return s}}return null},isCacheHit:function(e,a){return e===a},addToCache:function(e,a){var t=this._aCache;if(t){for(;t.length>=this.maxCacheEntries;)t.shift();a=this.cloneBeforeCaching?DS._cloneObject(a):a;var n={request:e,response:a};t[t.length]=n,this.fireEvent("responseCacheEvent",{request:e,response:a})}},flushCache:function(){this._aCache&&(this._aCache=[],this.fireEvent("cacheFlushEvent"))},setInterval:function(e,a,t,n){if("number"==typeof e&&isFinite(e)&&0<=e){var r=this,s=setInterval(function(){r.makeConnection(a,t,n)},e);return this._aIntervals.push(s),s}},clearInterval:function(e){for(var a=this._aIntervals||[],t=a.length-1;-1<t;t--)a[t]===e&&(a.splice(t,1),clearInterval(e))},clearAllIntervals:function(){for(var e=this._aIntervals||[],a=e.length-1;-1<a;a--)clearInterval(e[a]);e=[]},sendRequest:function(e,a,t){var n=this.getCachedResponse(e,a,t);return n?(DS.issueCallback(a,[e,n],!1,t),null):this.makeConnection(e,a,t)},makeConnection:function(e,a,t){var n=DS._nTransactionId++;this.fireEvent("requestEvent",{tId:n,request:e,callback:a,caller:t});var r=this.liveData;return this.handleResponse(e,r,a,t,n),n},handleResponse:function(oRequest,oRawResponse,oCallback,oCaller,tId){var _Mathmax=Math.max;this.fireEvent("responseEvent",{tId:tId,request:oRequest,response:oRawResponse,callback:oCallback,caller:oCaller});var xhr=!(this.dataType!=DS.TYPE_XHR),oParsedResponse=null,oFullResponse=oRawResponse;if(this.responseType===DS.TYPE_UNKNOWN){var ctype=oRawResponse&&oRawResponse.getResponseHeader?oRawResponse.getResponseHeader["Content-Type"]:null;ctype?-1<ctype.indexOf("text/xml")?this.responseType=DS.TYPE_XML:-1<ctype.indexOf("application/json")?this.responseType=DS.TYPE_JSON:-1<ctype.indexOf("text/plain")&&(this.responseType=DS.TYPE_TEXT):Array.isArray(oRawResponse)?this.responseType=DS.TYPE_JSARRAY:oRawResponse&&oRawResponse.nodeType&&(9===oRawResponse.nodeType||1===oRawResponse.nodeType||11===oRawResponse.nodeType)?this.responseType=DS.TYPE_XML:oRawResponse&&oRawResponse.nodeName&&"table"==oRawResponse.nodeName.toLowerCase()?this.responseType=DS.TYPE_HTMLTABLE:oRawResponse&&("object"==typeof oRawResponse||"function"==typeof oRawResponse)?this.responseType=DS.TYPE_JSON:"string"==typeof oRawResponse&&(this.responseType=DS.TYPE_TEXT)}switch(this.responseType){case DS.TYPE_JSARRAY:xhr&&oRawResponse&&oRawResponse.responseText&&(oFullResponse=oRawResponse.responseText);try{if("string"==typeof oFullResponse){var parseArgs=[oFullResponse].concat(this.parseJSONArgs);if(window.JSON&&JSON.parse)oFullResponse=JSON.parse.apply(JSON,parseArgs);else if(oFullResponse.parseJSON)oFullResponse=oFullResponse.parseJSON.apply(oFullResponse,parseArgs.slice(1));else{for(;0<oFullResponse.length&&"{"!=oFullResponse.charAt(0)&&"["!=oFullResponse.charAt(0);)oFullResponse=oFullResponse.substring(1,oFullResponse.length);if(0<oFullResponse.length){var arrayEnd=_Mathmax(oFullResponse.lastIndexOf("]"),oFullResponse.lastIndexOf("}"));oFullResponse=oFullResponse.substring(0,arrayEnd+1),oFullResponse=eval("("+oFullResponse+")")}}}}catch(e){}oFullResponse=this.doBeforeParseData(oRequest,oFullResponse,oCallback),oParsedResponse=this.parseArrayData(oRequest,oFullResponse);break;case DS.TYPE_JSON:xhr&&oRawResponse&&oRawResponse.responseText&&(oFullResponse=oRawResponse.responseText);try{if("string"==typeof oFullResponse){var parseArgs=[oFullResponse].concat(this.parseJSONArgs);if(window.JSON&&JSON.parse)oFullResponse=JSON.parse.apply(JSON,parseArgs);else if(oFullResponse.parseJSON)oFullResponse=oFullResponse.parseJSON.apply(oFullResponse,parseArgs.slice(1));else{for(;0<oFullResponse.length&&"{"!=oFullResponse.charAt(0)&&"["!=oFullResponse.charAt(0);)oFullResponse=oFullResponse.substring(1,oFullResponse.length);if(0<oFullResponse.length){var objEnd=_Mathmax(oFullResponse.lastIndexOf("]"),oFullResponse.lastIndexOf("}"));oFullResponse=oFullResponse.substring(0,objEnd+1),oFullResponse=eval("("+oFullResponse+")")}}}}catch(a){}oFullResponse=this.doBeforeParseData(oRequest,oFullResponse,oCallback),oParsedResponse=this.parseJSONData(oRequest,oFullResponse);break;case DS.TYPE_HTMLTABLE:if(xhr&&oRawResponse.responseText){var el=document.createElement("div");el.innerHTML=oRawResponse.responseText,oFullResponse=el.getElementsByTagName("table")[0]}oFullResponse=this.doBeforeParseData(oRequest,oFullResponse,oCallback),oParsedResponse=this.parseHTMLTableData(oRequest,oFullResponse);break;case DS.TYPE_XML:xhr&&oRawResponse.responseXML&&(oFullResponse=oRawResponse.responseXML),oFullResponse=this.doBeforeParseData(oRequest,oFullResponse,oCallback),oParsedResponse=this.parseXMLData(oRequest,oFullResponse);break;case DS.TYPE_TEXT:xhr&&"string"==typeof oRawResponse.responseText&&(oFullResponse=oRawResponse.responseText),oFullResponse=this.doBeforeParseData(oRequest,oFullResponse,oCallback),oParsedResponse=this.parseTextData(oRequest,oFullResponse);break;default:oFullResponse=this.doBeforeParseData(oRequest,oFullResponse,oCallback),oParsedResponse=this.parseData(oRequest,oFullResponse);}oParsedResponse=oParsedResponse||{},oParsedResponse.results||(oParsedResponse.results=[]),oParsedResponse.meta||(oParsedResponse.meta={}),oParsedResponse.error?(oParsedResponse.error=!0,this.fireEvent("dataErrorEvent",{request:oRequest,response:oRawResponse,callback:oCallback,caller:oCaller,message:DS.ERROR_DATANULL})):(oParsedResponse=this.doBeforeCallback(oRequest,oFullResponse,oParsedResponse,oCallback),this.fireEvent("responseParseEvent",{request:oRequest,response:oParsedResponse,callback:oCallback,caller:oCaller}),this.addToCache(oRequest,oParsedResponse)),oParsedResponse.tId=tId,DS.issueCallback(oCallback,[oRequest,oParsedResponse],oParsedResponse.error,oCaller)},doBeforeParseData:function(e,a){return a},doBeforeCallback:function(e,a,t){return t},parseData:function(e,a){if(Util.isValue(a)){return{results:a,meta:{}}}return null},parseArrayData:function(e,a){if(Array.isArray(a)){var t,n,r,s,o,l=[];if(Array.isArray(this.responseSchema.fields)){var c=this.responseSchema.fields;for(t=c.length-1;0<=t;--t)"object"!=typeof c[t]&&(c[t]={key:c[t]});var d,u={};for(t=c.length-1;0<=t;--t)d=("function"==typeof c[t].parser?c[t].parser:DS.Parser[c[t].parser+""])||c[t].converter,d&&(u[c[t].key]=d);var g=Array.isArray(a[0]);for(t=a.length-1;-1<t;t--){var T={};if(r=a[t],"object"==typeof r)for(n=c.length-1;-1<n;n--)s=c[n],o=g?r[n]:r[s.key],u[s.key]&&(o=u[s.key].call(this,o)),void 0===o&&(o=null),T[s.key]=o;else if("string"==typeof r)for(n=c.length-1;-1<n;n--)s=c[n],o=r,u[s.key]&&(o=u[s.key].call(this,o)),void 0===o&&(o=null),T[s.key]=o;l[t]=T}}else l=a;var y={results:l};return y}return null},parseTextData:function(e,a){if("string"==typeof a&&"string"==typeof this.responseSchema.recordDelim&&"string"==typeof this.responseSchema.fieldDelim){var t={results:[]},n=this.responseSchema.recordDelim,r=this.responseSchema.fieldDelim;if(0<a.length){var s=a.length-n.length;if(a.substr(s)==n&&(a=a.substr(0,s)),0<a.length)for(var o=a.split(n),l=0,c=o.length,d=0;l<c;++l){var u=!1,p=o[l];if("string"==typeof p&&0<p.length){var g=o[l].split(r),T={};if(Array.isArray(this.responseSchema.fields))for(var y=this.responseSchema.fields,f=y.length-1;-1<f;f--)try{var m=g[f];if("string"==typeof m){"\""==m.charAt(0)&&(m=m.substr(1)),"\""==m.charAt(m.length-1)&&(m=m.substr(0,m.length-1));var S=y[f],h=Util.isValue(S.key)?S.key:S;!S.parser&&S.converter&&(S.parser=S.converter);var E="function"==typeof S.parser?S.parser:DS.Parser[S.parser+""];E&&(m=E.call(this,m)),void 0===m&&(m=null),T[h]=m}else u=!0}catch(a){u=!0}else T=g;u||(t.results[d++]=T)}}}return t}return null},parseXMLResult:function(e){var a={},t=this.responseSchema;try{for(var n=t.fields.length-1;0<=n;n--){var r=t.fields[n],s=Util.isValue(r.key)?r.key:r,o=null;if(this.useXPath)o=juic.legacyUtil.DataSource._getLocationValue(r,e);else{var l=e.attributes.getNamedItem(s);if(l)o=l.value;else{var c=e.getElementsByTagName(s);if(c&&c.item(0)){var i=c.item(0);if(o=i?i.text?i.text:i.textContent?i.textContent:null:null,!o){for(var d=[],u=0,p=i.childNodes.length;u<p;u++)i.childNodes[u].nodeValue&&(d[d.length]=i.childNodes[u].nodeValue);0<d.length&&(o=d.join(""))}}}}null===o&&(o=""),!r.parser&&r.converter&&(r.parser=r.converter);var g="function"==typeof r.parser?r.parser:DS.Parser[r.parser+""];g&&(o=g.call(this,o)),o===void 0&&(o=null),a[s]=o}}catch(a){}return a},parseXMLData:function(e,a){var t,n,r,s,o=!1,l=this.responseSchema,c={meta:{}},d=null,u=l.metaNode,p=l.metaFields||{};try{if(this.useXPath)for(n in p)c.meta[n]=juic.legacyUtil.DataSource._getLocationValue(p[n],a);else if(u=u?a.getElementsByTagName(u)[0]:a,u)for(n in p)p.hasOwnProperty&&p.hasOwnProperty(n)&&(r=p[n],s=u.getElementsByTagName(r)[0],s?s=s.firstChild.nodeValue:(s=u.attributes.getNamedItem(r),s&&(s=s.value)),Util.isValue(s)&&(c.meta[n]=s));d=l.resultNode?a.getElementsByTagName(l.resultNode):null}catch(a){}if(!d||!Array.isArray(l.fields))o=!0;else for(c.results=[],t=d.length-1;0<=t;--t){var g=this.parseXMLResult(d.item(t));c.results[t]=g}return o&&(c.error=!0),c},parseJSONData:function(e,a){var t={results:[],meta:{}};if(a&&("object"==typeof a||"function"==typeof a)&&this.responseSchema.resultsList){var n,s,o,l,c,d,u,g=this.responseSchema,T=g.fields,y=a,f=[],m=g.metaFields||{},S=[],h=[],E=[],D=!1,_=function(e){var a=null,t=[],n=0;if(e&&(e=e.replace(/\[(['"])(.*?)\1\]/g,function(e,a,r){return t[n]=r,".@"+n++}).replace(/\[(\d+)\]/g,function(e,a){return t[n]=0|parseInt(a,10),".@"+n++}).replace(/^\./,""),!/[^\w\.\$@]/.test(e)))for(a=e.split("."),n=a.length-1;0<=n;--n)"@"===a[n].charAt(0)&&(a[n]=t[parseInt(a[n].substr(1),10)]);return a},N=function(e,a){for(var t=a,n=0,r=e.length;n<r&&t;++n)t=t[e[n]];return t};if(u=_(g.resultsList),u?(y=N(u,a),void 0===y&&(D=!0)):D=!0,y||(y=[]),Array.isArray(y)||(y=[y]),!D){if(g.fields){var P;for(n=0,s=T.length;n<s;n++)P=T[n],c=P.key||P,d=("function"==typeof P.parser?P.parser:DS.Parser[P.parser+""])||P.converter,u=_(c),d&&(S[S.length]={key:c,parser:d}),u&&(1<u.length?h[h.length]={key:c,path:u}:E[E.length]={key:c,path:u[0]});for(n=y.length-1;0<=n;--n){var b=y[n],Y={};if(b){for(o=E.length-1;0<=o;--o)Y[E[o].key]=void 0===b[E[o].path]?b[o]:b[E[o].path];for(o=h.length-1;0<=o;--o)Y[h[o].key]=N(h[o].path,b);for(o=S.length-1;0<=o;--o){var L=S[o].key;Y[L]=S[o].parser.call(this,Y[L]),void 0===Y[L]&&(Y[L]=null)}}f[n]=Y}}else f=y;for(c in m)m.hasOwnProperty&&m.hasOwnProperty(c)&&(u=_(m[c]),u&&(l=N(u,a),t.meta[c]=l))}else t.error=!0;t.results=f}else t.error=!0;return t},parseHTMLTableData:function(e,a){var t=!1,n=a,r=this.responseSchema.fields,s={results:[]};if(Array.isArray(r))for(var o,l=0;l<n.tBodies.length;l++){o=n.tBodies[l];for(var c=o.rows.length-1;-1<c;c--){for(var d=o.rows[c],u={},p=r.length-1;-1<p;p--){var g=r[p],T=Util.isValue(g.key)?g.key:g,y=d.cells[p].innerHTML;!g.parser&&g.converter&&(g.parser=g.converter);var f="function"==typeof g.parser?g.parser:DS.Parser[g.parser+""];f&&(y=f.call(this,y)),void 0===y&&(y=null),u[T]=y}s.results[c]=u}}else t=!0;return t&&(s.error=!0),s}},Object.assign(DS.prototype,juic.SFLegacyEventProvider.prototype),util.LocalDataSource=function(e,a){this.dataType=DS.TYPE_LOCAL,e?Array.isArray(e)?this.responseType=DS.TYPE_JSARRAY:e.nodeType&&9==e.nodeType?this.responseType=DS.TYPE_XML:e.nodeName&&"table"==e.nodeName.toLowerCase()?(this.responseType=DS.TYPE_HTMLTABLE,e=e.cloneNode(!0)):"string"==typeof e?this.responseType=DS.TYPE_TEXT:e&&("object"==typeof e||"function"==typeof e)&&(this.responseType=DS.TYPE_JSON):(e=[],this.responseType=DS.TYPE_JSARRAY),this._super(e,a)},juic.extend(util.LocalDataSource,DS),Object.assign(util.LocalDataSource,DS),util.FunctionDataSource=function(e,a){this.dataType=DS.TYPE_JSFUNCTION,e=e||function(){},this._super(e,a)},juic.extend(util.FunctionDataSource,DS,{scope:null,makeConnection:function(e,a,t){var n=DS._nTransactionId++;this.fireEvent("requestEvent",{tId:n,request:e,callback:a,caller:t});var r=this.scope?this.liveData.call(this.scope,e,this,a):this.liveData(e,a);return this.responseType===DS.TYPE_UNKNOWN&&(Array.isArray(r)?this.responseType=DS.TYPE_JSARRAY:r&&r.nodeType&&9==r.nodeType?this.responseType=DS.TYPE_XML:r&&r.nodeName&&"table"==r.nodeName.toLowerCase()?this.responseType=DS.TYPE_HTMLTABLE:r&&("object"==typeof r||"function"==typeof r)?this.responseType=DS.TYPE_JSON:"string"==typeof r&&(this.responseType=DS.TYPE_TEXT)),this.handleResponse(e,r,a,t,n),n}}),Object.assign(util.FunctionDataSource,DS),util.ScriptNodeDataSource=function(e,a){this.dataType=DS.TYPE_SCRIPTNODE,e=e||"",this._super(e,a)},juic.extend(util.ScriptNodeDataSource,DS,{getUtility:juic.legacyUtil.Get,asyncMode:"allowAll",scriptCallbackParam:"callback",generateRequestCallback:function(e){return"&"+this.scriptCallbackParam+"=juic.legacyUtil.ScriptNodeDataSource.callbacks["+e+"]"},doBeforeGetScriptNode:function(e){return e},makeConnection:function(e,a,t){var n=DS._nTransactionId++;this.fireEvent("requestEvent",{tId:n,request:e,callback:a,caller:t}),0===util.ScriptNodeDataSource._nPending&&(util.ScriptNodeDataSource.callbacks=[],util.ScriptNodeDataSource._nId=0);var r=util.ScriptNodeDataSource._nId;util.ScriptNodeDataSource._nId++;var s=this;util.ScriptNodeDataSource.callbacks[r]=function(o){("ignoreStaleResponses"!==s.asyncMode||r===util.ScriptNodeDataSource.callbacks.length-1)&&(s.responseType===DS.TYPE_UNKNOWN&&(Array.isArray(o)?s.responseType=DS.TYPE_JSARRAY:o.nodeType&&9==o.nodeType?s.responseType=DS.TYPE_XML:o.nodeName&&"table"==o.nodeName.toLowerCase()?s.responseType=DS.TYPE_HTMLTABLE:o&&("object"==typeof o||"function"==typeof o)?s.responseType=DS.TYPE_JSON:"string"==typeof o&&(s.responseType=DS.TYPE_TEXT)),s.handleResponse(e,o,a,t,n)),delete util.ScriptNodeDataSource.callbacks[r]},util.ScriptNodeDataSource._nPending++;var o=this.liveData+e+this.generateRequestCallback(r);return o=this.doBeforeGetScriptNode(o),this.getUtility.script(o,{autopurge:!0,onsuccess:util.ScriptNodeDataSource._bumpPendingDown,onfail:util.ScriptNodeDataSource._bumpPendingDown}),n}}),Object.assign(util.ScriptNodeDataSource,DS),Object.assign(util.ScriptNodeDataSource,{_nId:0,_nPending:0,callbacks:[]}),util.XHRDataSource=function(e,a){this.dataType=DS.TYPE_XHR,this.connMgr=this.connMgr||juic.legacyUtil.Connect,e=e||"",this._super(e,a)},juic.extend(util.XHRDataSource,DS,{connMgr:null,connXhrMode:"allowAll",connMethodPost:!1,connTimeout:0,makeConnection:function(e,a,t){var n=DS._nTransactionId++;this.fireEvent("requestEvent",{tId:n,request:e,callback:a,caller:t});var r=this.connMgr,s=this._oQueue,o=function(r){if(r&&"ignoreStaleResponses"==this.connXhrMode&&r.tId!=s.conn.tId)return null;if(!r)return this.fireEvent("dataErrorEvent",{request:e,response:null,callback:a,caller:t,message:DS.ERROR_DATANULL}),DS.issueCallback(a,[e,{error:!0}],!0,t),null;if(this.responseType===DS.TYPE_UNKNOWN){var o=r.getResponseHeader?r.getResponseHeader["Content-Type"]:null;o&&(-1<o.indexOf("text/xml")?this.responseType=DS.TYPE_XML:-1<o.indexOf("application/json")?this.responseType=DS.TYPE_JSON:-1<o.indexOf("text/plain")&&(this.responseType=DS.TYPE_TEXT))}this.handleResponse(e,r,a,t,n)},l=function(n){return this.fireEvent("dataErrorEvent",{request:e,response:n,callback:a,caller:t,message:DS.ERROR_DATAINVALID}),n=n||{},n.error=!0,DS.issueCallback(a,[e,n],!0,t),null},c={success:o,failure:l,scope:this};if("number"==typeof this.connTimeout&&isFinite(this.connTimeout)&&(c.timeout=this.connTimeout),"cancelStaleRequests"==this.connXhrMode&&s.conn&&r.abort&&(r.abort(s.conn),s.conn=null),r&&r.asyncRequest){var i=this.liveData,d=this.connMethodPost,u=d?"POST":"GET",p=d||!Util.isValue(e)?i:i+e,g=d?e:null;if("queueRequests"!=this.connXhrMode)s.conn=r.asyncRequest(u,p,c,g);else if(s.conn){var T=s.requests;T.push({request:e,callback:c}),s.interval||(s.interval=setInterval(function(){r.isCallInProgress(s.conn)||(0<T.length?(p=d||!Util.isValue(T[0].request)?i:i+T[0].request,g=d?T[0].request:null,s.conn=r.asyncRequest(u,p,T[0].callback,g),T.shift()):(clearInterval(s.interval),s.interval=null))},50))}else s.conn=r.asyncRequest(u,p,c,g)}else DS.issueCallback(a,[e,{error:!0}],!0,t);return n}}),Object.assign(util.XHRDataSource,DS),util.DataSource=function(e,a){a=a||{};var t=a.dataType;if(t){if(t==DS.TYPE_LOCAL)return new util.LocalDataSource(e,a);if(t==DS.TYPE_XHR)return new util.XHRDataSource(e,a);if(t==DS.TYPE_SCRIPTNODE)return new util.ScriptNodeDataSource(e,a);if(t==DS.TYPE_JSFUNCTION)return new util.FunctionDataSource(e,a)}return"string"==typeof e?new util.XHRDataSource(e,a):"function"==typeof e?new util.FunctionDataSource(e,a):new util.LocalDataSource(e,a)},Object.assign(util.DataSource,DS)})(),juic.legacyUtil.Number={format:function(e,a){var t=Math.round,r=Math.pow,o=Math.abs;if(""===e||null===e||!isFinite(e))return"";e=+e,a=Object.assign({},juic.legacyUtil.Number.format.defaults,a||{});var l,c,d,u=o(e),p=a.decimalPlaces||0,g=a.thousandsSeparator,T=a.negativeFormat||"-"+a.format;if(-1<T.indexOf("#")&&(T=T.replace(/#/,a.format)),0>p)l=u-u%1+"",d=l.length+p,l=0<d?(+("."+l)).toFixed(d).slice(2)+Array(l.length-d+1).join("0"):"0";else{if(0<p||0<(u+"").indexOf(".")){var y=r(10,p);l=t(u*y)/y+"";var f,m,S=l.indexOf(".");0>S?(f=p,m=(r(10,f)+"").substring(1),0<p&&(l=l+"."+m)):(f=p-(l.length-S-1),m=(r(10,f)+"").substring(1),l+=m)}else l=u.toFixed(p)+""}return c=l.split(/\D/),1e3<=u&&(d=c[0].length%3||3,c[0]=c[0].slice(0,d)+c[0].slice(d).replace(/(\d{3})/g,g+"$1")),juic.legacyUtil.Number.format._applyFormat(0>e?T:a.format,c.join(a.decimalSeparator),a)}},juic.legacyUtil.Number.format.defaults={format:"{prefix}{number}{suffix}",negativeFormat:null,decimalSeparator:".",decimalPlaces:null,thousandsSeparator:""},juic.legacyUtil.Number.format._applyFormat=function(e,a,t){return e.replace(/\{(\w+)\}/g,function(e,n){return"number"===n?a:n in t?t[n]:""})},function(){var e=Math.abs,a=function(e,a,t){for("undefined"==typeof t&&(t=10);parseInt(e,10)<t&&1<t;t/=10)e=a.toString()+e;return e.toString()},t={formats:{a:function(e,a){return a.a[e.getDay()]},A:function(e,a){return a.A[e.getDay()]},b:function(e,a){return a.b[e.getMonth()]},B:function(e,a){return a.B[e.getMonth()]},C:function(e){return a(parseInt(e.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(e){return a(parseInt(t.formats.G(e)%100,10),0)},G:function(e){var a=e.getFullYear(),n=parseInt(t.formats.V(e),10),r=parseInt(t.formats.W(e),10);return r>n?a++:0===r&&52<=n&&a--,a},H:["getHours","0"],I:function(e){var t=e.getHours()%12;return a(0==t?12:t,0)},j:function(e){var t=new Date(""+e.getFullYear()+"/1/1 GMT"),n=new Date(""+e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" GMT"),r=parseInt((n-t)/6e4/60/24,10)+1;return a(r,0,100)},k:["getHours"," "],l:function(e){var t=e.getHours()%12;return a(0==t?12:t," ")},m:function(e){return a(e.getMonth()+1,0)},M:["getMinutes","0"],p:function(e,a){return a.p[12<=e.getHours()?1:0]},P:function(e,a){return a.P[12<=e.getHours()?1:0]},s:function(e){return parseInt(e.getTime()/1e3,10)},S:["getSeconds","0"],u:function(e){var a=e.getDay();return 0===a?7:a},U:function(e){var n=parseInt(t.formats.j(e),10),r=6-e.getDay(),s=parseInt((n+r)/7,10);return a(s,0)},V:function(e){var n=parseInt(t.formats.W(e),10),r=new Date(""+e.getFullYear()+"/1/1").getDay(),s=n+(4<r||1>=r?0:1);return 53===s&&4>new Date(""+e.getFullYear()+"/12/31").getDay()?s=1:0===s&&(s=t.formats.V(new Date(""+(e.getFullYear()-1)+"/12/31"))),a(s,0)},w:"getDay",W:function(e){var n=parseInt(t.formats.j(e),10),r=7-t.formats.u(e),s=parseInt((n+r)/7,10);return a(s,0,10)},y:function(e){return a(e.getFullYear()%100,0)},Y:"getFullYear",z:function(t){var n=t.getTimezoneOffset(),r=a(parseInt(e(n/60),10),0),s=a(e(n%60),0);return(0<n?"-":"+")+r+s},Z:function(e){var a=e.toString().replace(/^.*:\d\d( GMT[+-]\d+)? \(?([A-Za-z ]+)\)?\d*$/,"$2").replace(/[a-z ]/g,"");return 4<a.length&&(a=t.formats.z(e)),a},"%":function(){return"%"}},aggregates:{c:"locale",D:"%m/%d/%y",F:"%Y-%m-%d",h:"%b",n:"\n",r:"locale",R:"%H:%M",t:"\t",T:"%H:%M:%S",x:"locale",X:"locale"},format:function(e,n,r){if(n=n||{},!(e instanceof Date))return Util.isValue(e)?e:"";var s=n.format||"%m/%d/%Y";"YYYY/MM/DD"===s?s="%Y/%m/%d":"DD/MM/YYYY"===s?s="%d/%m/%Y":"MM/DD/YYYY"===s&&(s="%m/%d/%Y"),r=r||"en",r in juic.legacyUtil.DateLocale||(r.replace(/-[a-zA-Z]+$/,"")in juic.legacyUtil.DateLocale?r=r.replace(/-[a-zA-Z]+$/,""):r="en");for(var o=juic.legacyUtil.DateLocale[r],l=function(e,a){var n=t.aggregates[a];return"locale"===n?o[a]:n},c=function(n,r){var s=t.formats[r];return"string"==typeof s?e[s]():"function"==typeof s?s.call(e,e,o):"object"==typeof s&&"string"==typeof s[0]?a(e[s[0]](),s[1]):r};s.match(/%[cDFhnrRtTxX]/);)s=s.replace(/%([cDFhnrRtTxX])/g,l);var i=s.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g,c);return l=c=void 0,i}};juic.legacyUtil.Date=t,juic.legacyUtil.DateLocale={a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a %d %b %Y %T %Z",p:["AM","PM"],P:["am","pm"],r:"%I:%M:%S %p",x:"%d/%m/%y",X:"%T"},juic.legacyUtil.DateLocale.en=Object.assign({},juic.legacyUtil.DateLocale,{}),juic.legacyUtil.DateLocale["en-US"]=Object.assign({},juic.legacyUtil.DateLocale.en,{c:"%a %d %b %Y %I:%M:%S %p %Z",x:"%m/%d/%Y",X:"%I:%M:%S %p"}),juic.legacyUtil.DateLocale["en-GB"]=Object.assign({},juic.legacyUtil.DateLocale.en,{r:"%l:%M:%S %P %Z"}),juic.legacyUtil.DateLocale["en-AU"]=Object.assign({},juic.legacyUtil.DateLocale.en)}(),juic.legacyUtil.DS_JSArray=juic.legacyUtil.LocalDataSource,juic.legacyUtil.DS_JSFunction=juic.legacyUtil.FunctionDataSource,juic.legacyUtil.DS_XHR=function(e,a,t){var n=new juic.legacyUtil.XHRDataSource(e,t);return n._aDeprecatedSchema=a,n},juic.legacyUtil.DS_ScriptNode=function(e,a,t){var n=new juic.legacyUtil.ScriptNodeDataSource(e,t);return n._aDeprecatedSchema=a,n},juic.legacyUtil.DS_XHR.TYPE_JSON=juic.legacyUtil.DataSourceBase.TYPE_JSON,juic.legacyUtil.DS_XHR.TYPE_XML=juic.legacyUtil.DataSourceBase.TYPE_XML,juic.legacyUtil.DS_XHR.TYPE_FLAT=juic.legacyUtil.DataSourceBase.TYPE_TEXT;