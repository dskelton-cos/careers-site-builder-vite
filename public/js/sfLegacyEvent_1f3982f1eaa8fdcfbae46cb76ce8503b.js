window.SFLegacyEvent||(window.SFLegacyEvent=function(){var a=[],b=[];return{EL:0,TYPE:1,FN:2,WFN:3,UNLOAD_OBJ:3,ADJ_SCOPE:4,OBJ:5,OVERRIDE:6,CAPTURE:7,lastError:null,_specialTypes:{focusin:"focus",focusout:"blur"},_addListener:function(c,d,f,g,h,j){if(!f||!f.call)return!1;if(this._isValidCollection(c)){for(var k=!0,e=0,l=c.length;e<l;++e)k=this.addListener(c[e],d,f,g,h)&&k;return k}if("string"==typeof c){var m=juic.$(c);if(m)c=m;else return SFDOMEvent.onAvailable(c,function(){window.SFLegacyEvent._addListener(c,d,f,g,h,j)}),!0}if(!c)return!1;if("unload"==d&&g!==this)return b[b.length]=[c,d,f,g,h],!0;var n=c;h&&(!0===h?n=g:n=h);var o=function(a){return f.call(n,window.SFLegacyEvent.getEvent(a,c),g)},p=[c,d,f,o,n,g,h,j],q=a.length;a[q]=p;try{c.addEventListener(d,o,j)}catch(a){return this.lastError=a,this.removeListener(c,d,f),!1}return!0},_getType:function(a){return this._specialTypes[a]||a},addListener:function(a,b,c,d,e){return this._addListener(a,this._getType(b),c,d,e,!(b!="focusin"&&b!="focusout"))},removeListener:function(c,d,e){var f,g;if(d=this._getType(d),"string"==typeof c)c=juic.$(c);else if(this._isValidCollection(c)){var h=!0;for(f=c.length-1;-1<f;f--)h=this.removeListener(c[f],d,e)&&h;return h}if(!e||!e.call)return this.purgeElement(c,d);if("unload"==d){for(f=b.length-1;-1<f;f--)if(g=b[f],g&&g[0]==c&&g[1]==d&&g[2]==e)return b.splice(f,1),!0;return!1}var j=null,k=arguments[3];if("undefined"==typeof k&&(k=this._getCacheIndex(a,c,d,e)),0<=k&&(j=a[k]),!c||!j)return!1;var l=!0===j[this.CAPTURE];try{c.removeEventListener(d,j[this.WFN],l)}catch(a){return this.lastError=a,!1}return delete a[k][this.WFN],delete a[k][this.FN],a.splice(k,1),!0},getEvent:function(a){var b=a||window.event;if(!b)for(var d=this.getEvent.caller;d&&(b=d.arguments[0],!(b&&Event==b.constructor));)d=d.caller;return b},_getCacheIndex:function(b,a,c,d){for(var e,f=0,g=b.length;f<g;++f)if(e=b[f],e&&e[this.FN]==d&&e[this.EL]==a&&e[this.TYPE]==c)return f;return-1},_isValidCollection:function(a){try{return a&&"string"!=typeof a&&a.length&&!a.tagName&&!a.alert&&"undefined"!=typeof a[0]}catch(a){return!1}},purgeElement:function(a,b){var c,d=juic.$(a),e=this.getListeners(d,b);if(e)for(c=e.length-1;-1<c;c--){var f=e[c];this.removeListener(d,f.type,f.fn)}},getListeners:function(c,d){var e,f=[];d?"unload"===d?e=[b]:(d=this._getType(d),e=[a]):e=[a,b];for(var g,h=juic.$(c),k=0;k<e.length;++k)if(g=e[k],g)for(var m,n=0,o=g.length;n<o;++n)m=g[n],m&&m[this.EL]===h&&(!d||d===m[this.TYPE])&&f.push({type:m[this.TYPE],fn:m[this.FN],obj:m[this.OBJ],adjust:m[this.OVERRIDE],scope:m[this.ADJ_SCOPE],index:n});return f.length?f:null}}}());