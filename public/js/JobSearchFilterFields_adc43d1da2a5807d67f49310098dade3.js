function JobSearchFilterFields(b){this.register();assert(null!=b,"Must have a valid filterModel");this._model=b;this._init();this._errArr=[];this._clearSelected=!1;this._searchCriteria=JSON.stringify(this._model.getUserValues());this._clearbuttonId=""}
JobSearchFilterFields.prototype=function(){var b=function(){if("0"==document.getElementById("alertFrequency").options[this.selectedIndex].value){var a=document.getElementById("newJobs");a&&(a.checked=!1,a.disabled=!0)}else if(a=document.getElementById("newJobs"))a.disabled=!1,a.checked=!0;return!1};return set(new Component,{_init:function(){this._picklistMgr=new SFCascadingPicklistsManager;this._count=new rcmDynamicJobCount(this._model.getPostingCount());this._keywordLangFilter=new JobSearchKeywordLanguageFilter({optionList:this._model.getKeywordLanguages(),
optionsSelected:this._model.getSelectedLocales(),disableOptions:this._model.isDisableKeywordLanguages()});this._loadBox=new SFLoading(MSGS.COMMON_loading,"",{isNewLoadingIndicator:!0});this._picklists={}},setKeywordLanguages:function(a){this._keywordLangFilter.setKeywordLanguages(a)},setSelectedKeywordLanguages:function(a){this._keywordLangFilter.setSelectedValues(a)},isUserLoggedIn:function(){return this._model.isUserLoggedIn()},setHavingSavedSearches:function(a){return this._model.setHavingSavedSearches(a)},
_updateView:function(){this._filtersList=this._model.getFiltersData();this._model.isFilterOnly()?this._filtersLayout=new SFInputFormLayout(!1,{encodeLabels:!1}):(this._resultsLayout=new SearchFilterLayout(this._model.isExternalOrPublicIntranet(),this,this._model.isHavingSavedSearches()),this._resultsBoxLayout=new SFBoxLayout(this._resultsLayout),this._resultsLayout.addEventListener("saveSearch",this));this._picklists={};for(var a=0;a<this._filtersList.length;a++)switch(this._filtersList[a].fieldType){case "number":case "text":var c;
c="postedindays"==this._filtersList[a].fieldName?{maxLength:3,width:30}:"reqnumber"==this._filtersList[a].fieldName?{maxLength:10,width:50}:{width:150};var b={};"postedindays"==this._filtersList[a].fieldName&&(b={maxLength:3,width:30});c.enterEnabled=!0;c.fieldDescription=this._filtersList[a].label;c.label=this._filtersList[a].label;b.enterEnabled=!0;b.fieldDescription=this._filtersList[a].label;b.label=this._filtersList[a].label;"postedindays"==this._filtersList[a].fieldName&&(c.fieldDescription=
MSGS.RECRUITING_FORWARD_POSTED_IN_DAYS_HEADER,b.fieldDescription=MSGS.RECRUITING_FORWARD_POSTED_IN_DAYS_HEADER);var d=this._filtersList[a].stringValue;"undefined"==typeof this._filtersList[a].selectedValue||null==this._filtersList[a].selectedValue||this._isClearSelected()||(d=this._filtersList[a].selectedValue);"keyword"==this._filtersList[a].fieldName&&this._filtersList[a].showHelpText?(this._model.isFilterOnly()?(b.inputType=!0,b.autofocus=!0):c.inputType=!0,this._input=new RCMIntelliInput(this._filtersList[a].fieldName,
d,this._model.isFilterOnly()?b:c,MSGS.RECRUITING_JOBREQ_SEARCH_BOOLEAN_KEYWORD_HELP_DESC)):this._input="reqnumber"==this._filtersList[a].fieldName?new RCMTypeAheadInput(this._filtersList[a].fieldName,d,this._model.isFilterOnly()?b:c):new RCMProfileInput(this._filtersList[a].fieldName,d,this._model.isFilterOnly()?b:c);this._input.addEventListener("action",this);c=new RCMCompositeComponent;this._model.isFilterOnly()||"postedindays"!=this._filtersList[a].fieldName||(this._postedText=new PostedDaysText(MSGS.RECRUITING_JOB_SEARCH_POSTED_IN_LAST_DAYS,
"jobsearch_filter_label postedInDaysLabel"),c.pushComponent(this._postedText));this._model.isFilterOnly()||"reqnumber"!=this._filtersList[a].fieldName||(this._postedText=new PostedDaysText(MSGS.RECRUITING_JOB_SEARCH_REQUISITION_ID,"jobsearch_filter_label"),c.pushComponent(this._postedText));c.pushComponent(this._input);if("postedindays"==this._filtersList[a].fieldName)this._model.isFilterOnly()?this._lbl=new PostedDaysText(MSGS.APPL_SEARCH_POSTED_DAYS,"filterNoneLabel"):this._lbl=new PostedDaysText(MSGS.APPL_SEARCH_POSTED_DAYS,
"jobsearch_filter_label"),c.pushComponent(this._lbl);else if("keyword"==this._filtersList[a].fieldName){b=[new SFSimpleSelectItem("1",MSGS.RECRUITING_JOB_SEARCH_KEYWORD_OPTION_JOB_TITLE_ONLY),new SFSimpleSelectItem("0",MSGS.RECRUITING_JOB_SEARCH_KEYWORD_OPTION_JOB_TITLE_OR_DESC)];b=new SFDefaultSingleSelectModel(b);this._jrkeywordOpts=new RCMCustomRadio(b,"kwopt",{vertical:!1,encodeLabels:!1},this._model._filterdata.userValues.exactMatch);this._jrkeywordOpts.setLegendText(MSGS.RECRUITING_KEYWORD_SEARCH_OPTIONS);
this._jrkeywordOpts.addEventListener("change",this);b=0;if(this._filtersList[a].defaultOptionList&&0<this._filtersList[a].defaultOptionList.length)switch(this._filtersList[a].defaultOptionList[0]){case "1":b=0;break;case "0":b=1;break;default:b=0}this._jrkeywordOpts.setSelectedIndex(b);c.pushComponent(this._jrkeywordOpts)}this._model.isFilterOnly()?this._filtersLayout.addField(this._filtersList[a].label+":",c,{}):(this._textLabel=new SFText(this._filtersList[a].label),"postedindays"==this._filtersList[a].fieldName||
"reqnumber"==this._filtersList[a].fieldName?this._resultsLayout.addField("",c,{}):this._resultsLayout.addField(this._textLabel,c,{}));"keyword"==this._filtersList[a].fieldName&&0<this._model.getKeywordLanguages().length&&(c=MSGS.RECRUITING_KEYWORD_LANGUAGE,this.setSelectedKeywordLanguages(this._model.getSelectedLocales()),this._model.isFilterOnly()?(c+=":",this._filtersLayout.addField(c,this._keywordLangFilter,{})):(c=new SFText(c),this._resultsLayout.addField(c,this._keywordLangFilter,{})));break;
case "object":b=this._filtersList[a].label+":";this._objConfig={order:this._filtersList[a].order,enabled:!0,fieldName:this._filtersList[a].fieldName,label:this._filtersList[a].label,selectedValue:this._filtersList[a].selectedValue,goFieldId:this._filtersList[a].picklistFieldId,objectField:!0,dataSource:"location"==this._filtersList[a].picklistFieldId?"rcmFoundationAutoCompleteController":"rcmGenericObjectAutoCompleteController",externalOrIntranetCareerSite:this._model.isExternalOrPublicIntranet(),
contextualSearchFieldMap:this._model._filterdata.contextualSearchFields,goObjSingleSelectDisplayVal:this._filtersList[a].goObjSingleSelectDisplayVal,allValueSelected:this._filtersList[a].allValueSelected};this._objField=new RCMMultiSelect(this._objConfig);c=new RCMCompositeComponent;c.pushComponent(this._objField);this._model.isFilterOnly()?this._filtersLayout.addField(b,c,{}):(b=new SFText(b),this._resultsLayout.addField(b,c,{}));this._objField.addEventListener("selectionchange",this,"_onObjFieldSelection");
break;case "picklist":c=[];b=this._filtersList[a].fieldName;if((d="department"==b||"location"==b||"division"==b)&&this._filtersList[a].defaultOptionList)for(var e=0;e<this._filtersList[a].defaultOptionList.length;e++)c.push({label:this._filtersList[a].defaultOptionList[e],value:this._filtersList[a].defaultOptionList[e]});e=!(!this._filtersList[a].picklistFieldId||d&&this._filtersList[a].defaultOptionList);this._picklistConfig={order:this._filtersList[a].order,selectedValue:this._filtersList[a].selectedValue,
fieldName:this._filtersList[a].fieldName,picklistId:this._filtersList[a].picklistFieldId,picklistMgr:this._picklistMgr,childPicklistIds:this._filtersList[a].childPicklistFieldId,parentPicklistId:this._filtersList[a].parentPicklistFieldId,defaultOptionList:d?c:!e&&this._filtersList[a].defaultOptionList,validationMsg:!1,unsavedClass:"unsaved",multiselect:!0,paginatedPicklist:e,disableOptions:this._filtersList[a].disableOptions,label:this._filtersList[a].label};this._filtersList[a].seedPicklistId&&(this._picklistConfig.picklist=
this._filtersList[a].seedPicklistOptions,this._picklistConfig.seedPicklistId=this._filtersList[a].seedPicklistId);this._picklist=new SFCascadingPicklist(this._picklistConfig);this._picklists[b]=this._picklist;this._picklist.addEventListener("picklistChanged",this);this._picklist.addEventListener("multiplePicklistsChanged",this);c=new RCMCompositeComponent;c.pushComponent(this._picklist);this._model.isFilterOnly()?this._filtersLayout.addField(this._filtersList[a].label+":",c,{}):(this._picklistLabel=
new SFText(this._filtersList[a].label),this._resultsLayout.addField(this._picklistLabel,c,{}));break;case "derived":c={countryOptionList:this._filtersList[a].defaultOptionList,isDistanceUnitMiles:this._filtersList[a].emptyValueLabel},b=this._isClearSelected()?null:this._filtersList[a].selectedValue&&(this._filtersList[a].selectedValue.trim&&""!=this._filtersList[a].selectedValue.trim()||this._filtersList[a].selectedValue.country&&this._filtersList[a].selectedValue.zipCode&&this._filtersList[a].selectedValue.distance)?
this._filtersList[a].selectedValue:this._filtersList[a].radialSearchOptions,this._radialComponent=new RCMJobReqRadialSearch(b,c),this._radialComponent.addEventListener("action",this),this._model.isFilterOnly()?this._filtersLayout.addField(this._filtersList[a].label+":",this._radialComponent,{}):(this._radialLabel=new SFText(this._filtersList[a].label),this._resultsLayout.addField(this._radialLabel,this._radialComponent,{}))}a=0!=this._model.getPostingCount();c={baseButtonWrapperClass:"activeAccessible fioriBtn careerBtn"};
this._viewJobs=new SFCommandButton(MSGS.RCM_JOB_SEARCH_JOBS_BUTTON,!0,a,!0,c);this._viewJobs.setActionCommand("search");this._search=new SFCommandButton(MSGS.RCM_JOB_SEARCH_JOBS_BUTTON,!0,a,!0,c);this._search.setActionCommand("searchJobs");c.baseButtonWrapperClass="fioriBtn careerBtn";c.buttonDesign="transparent";document.body.classList.contains("careerSite")&&(c.baseButtonWrapperClass+=" inactiveAccessible");this._clear=new SFCommandButton(MSGS.RECRUITING_JOB_SEARCH_CLEAR_BUTTON,!1,!0,!0,c);this._clearbuttonId=
this._clear.getButtonId();this._clear.setActionCommand("clear");this._model.isFilterOnly()?(a=new RCMCompositeComponent,a.pushComponent(this._viewJobs),a.pushComponent(this._clear),this._filtersLayout.addField("",this._count,{}),this._filtersLayout.addField("",a,{})):(a=new RCMCompositeComponent,a.pushComponent(this._search),a.pushComponent(this._clear),this._resultsLayout.addField(this._count,a,{}))},cleanup:function(){this._keyword&&this._keyword.cleanup()},_registerEvents:function(){this._search.addEventListener("action",
this);this._clear.addEventListener("action",this);this._viewJobs.addEventListener("action",this);this._keywordLangFilter.addEventListener("kwPicklistChanged",this);this._count.addEventListener("jobCountChanged",this);"undefined"!==typeof rcmLangSelectorRef&&null!==rcmLangSelectorRef&&rcmLangSelectorRef.addEventListener("languageChanged",this)},renderHtml:function(a){a.push('\x3cdiv id\x3d"'+this.id+'"\x3e');this._renderFilters(a);a.push("\x3c/div\x3e")},_renderFilters:function(a){a.addEventListener("afterRender",
this,"afterRender");this._model.isFilterOnly()?this._filtersLayout&&this._filtersLayout.cleanup():this._resultsBoxLayout&&this._resultsBoxLayout.cleanup();this._updateView();this._registerEvents();this._model.isFilterOnly()?this._model.isExternalOrPublicIntranet()?this._filtersLayout.renderHtml(a):(this._tableHeader1=new SFTableHeader(!1,MSGS.APPL_SEARCH_PANEL_TITLE,this._filtersLayout),this._tableHeader1.renderHtml(a)):this._resultsBoxLayout.renderHtml(a)},afterRender:function(a){RCMElementsUtil.find(".searchFiltersLeftSection .sfTH label:empty").remove()},
_isClearSelected:function(){return this._clearSelected},_setClearSelected:function(a){this._clearSelected=a},_initObjValuesFromAlert:function(a,c,b){this._clearObjValuesFromUserValues(c,b);a[b]&&c.objSelectedValues&&c.objSelectedValues[b]&&(a[b].values&&(c.objSelectedValues[b].selectedValues=a[b].values),a[b].allSelected&&!0===a[b].allSelected&&(c.objSelectedValues[b].fullySelected=!0))},_clearObjValuesFromUserValues:function(a,c){a.objSelectedValues&&a.objSelectedValues[c]&&(a.objSelectedValues[c]=
{selectedValues:[],removedValues:[],fullySelected:!1,totalCount:0})},_initObjValuesInModel:function(a,c,b){a[b]&&(a[b].allSelected&&!0===a[b].allSelected&&(c.allValueSelected=!0),c.goObjSingleSelectDisplayVal=a[b].singleSelectDisVal,c.selectedValue=a[b].values)},initializeWithAlertFilters:function(a){resetRenderDoneFlag();this._clearSrchFormErrors();this._model.clearFilters();this._resetPicklistMgr();this._reRenderFilters();var c=this._model.getUserValues();c.keyword=a.keywords;c.radialField=a.radialField;
c.searchScope=a.keywordInJobTitleOnly?"1":"0";c.daysPostedWithin=null!=a.postedWithinDays&&""!=a.postedWithinDays?a.postedWithinDays:"";c.jobReqId=null!=a.reqId&&""!=a.reqId?a.reqId:"";this._initObjValuesFromAlert(a,c,"department_obj");this._initObjValuesFromAlert(a,c,"division_obj");this._initObjValuesFromAlert(a,c,"location_obj");this._initObjValuesFromAlert(a,c,"businessUnit_obj");this._initObjValuesFromAlert(a,c,"legalEntity_obj");this._initObjValuesFromAlert(a,c,"costCenter_obj");c.keywordLanguageSelectedValues=
a.searchInLocales;var b=c.picklistSelectedValues;b.department=a.dep||[];b.division=a.div||[];b.location=a.loc||[];for(var d=1;16>d;d++)b["customFilter_filter"+d]&&(b["customFilter_filter"+d]=[]),b["customFilter_mfield"+d]&&(b["customFilter_mfield"+d]=[]);for(var d=0,e=a.customFilters.length;d<e;d++){var k=a.customFilters[d];b["customFilter_"+k.filterId]=k.filterValue||[]}for(var g=this._model.getFiltersData(),m=[],h=0;h<g.length;h++)switch(g[h].fieldType){case "number":switch(g[h].fieldName){case "postedindays":g[h].selectedValue=
a.postedWithinDays||"";break;case "reqnumber":g[h].selectedValue=a.reqId||""}break;case "text":switch(g[h].fieldName){case "keyword":g[h].selectedValue=a.keywords,g[h].defaultOptionList[0]=c.searchScope}break;case "picklist":e=g[h].fieldName;m[m.length]=e;switch(e){case "department":g[h].selectedValue=a.dep||[];break;case "location":g[h].selectedValue=a.loc||[];break;case "division":g[h].selectedValue=a.div||[];break;default:if(-1!=e.indexOf("customFilter_")){for(var q=e.substring(e.indexOf("customFilter_")+
13),p=!1,d=0,e=a.customFilters.length;d<e;d++)k=a.customFilters[d],k.filterId==q&&(g[h].selectedValue=k.filterValue||[],p=!0);p||(g[h].selectedValue=[])}}break;case "object":e=g[h].fieldName;this._initObjValuesInModel(a,g[h],e);break;case "derived":g[h].selectedValue=a.radialField}d=this._model.getDefaultValues();h=d.keywordLanguageSelectedValues;d=d.picklistSelectedValues;this._model.isDisableKeywordLanguages()&&h&&0<h.length&&(c.keywordLanguageSelectedValues=h);for(k in d)d[k]&&0!=d[k].length&&
(b[k]=d[k]);for(h=0;h<g.length;h++)"picklist"==g[h].fieldType&&(e=g[h].fieldName,d[e]&&0!=d[e].length&&(g[h].selectedValue=d[e]));this._resetPicklistMgr();this._reRenderFilters();setRenderDoneFlag();this._setAlertName(a.name,a.id);c.fullySelectedPicklists={};if(a.fullySelectedPicklists)for(var n in a.fullySelectedPicklists)b=n,1==a.fullySelectedPicklists[n]&&(-1<n.indexOf("filter")&&(b="customFilter_"+n),c.fullySelectedPicklists[b]=!0);var l=this;setTimeout(function(){if(l._model.isExternalOrPublicIntranet()&&
l._model.isDefaultSite()||!l._model.isExternalOrPublicIntranet())for(var a=0,b=m.length;a<b;a++){var d=m[a],f=l._picklists[d].isAllSelected();!c.fullySelectedPicklists[d]&&f&&(c.fullySelectedPicklists[d]=f)}l.dispatch("searchJobs",{data:l._model.getUserValues()});l=null},2E3)},_reRenderFilters:function(){var a=juic.createRenderContext();this._renderFilters(a);a.renderInto(this.id)},_resetPicklistMgr:function(){this._picklistMgr=new SFCascadingPicklistsManager},_setAlertName:function(a,b){var c=document.getElementById("jobAlertController_jobAlertName");
c&&(c.value=a||"");if(c=document.getElementById("jobAlertController_jobAlertId"))c.value=b||""},reRender:function(){var a=juic.createRenderContext();this._renderFilters(a);a.renderInto(this.id+"_w")},_getJobCount:function(){if(isRenderDone()){var a=this,b={callback:function(b){a._count.setCount(b)}};this._ajaxController||(this._ajaxController=AjaxService.getMBeanInstance("careerJobSearchController"));JSON.stringify(this._model.getUserValues())!=this._searchCriteria&&(this._count.showLoading(),this._ajaxController.getPostingCount(this._model.getUserValues(),
b),this._searchCriteria=JSON.stringify(this._model.getUserValues()))}},_validatePostedWithin:function(a,b,f){b=gebi(b);var c=0;isValidIntegerValue(a)?2<a.length&&"#"!=a.charAt(0)&&"0"!=a.charAt(0)&&(f[0]=MSGS.APPL_SEARCH_ERROR_POSTEDWITHIN_INVALID,this._setFocusOnElement(b),c++):(f[0]=MSGS.APPL_SEARCH_ERROR_POSTEDWITHIN_INVALID,this._setFocusOnElement(b),c++);0<c?this._postedInDaysError=!0:(f[0]=null,this._postedInDaysError=!1)},_validateReqNum:function(a,b,f){b=gebi(b);var c=0,e=parseInt(MSGS.APPL_SEARCH_REQNUMBER_MAX_LENGTH);
"#"!=a.charAt(0)&&"0"!=a.charAt(0)||e++;isValidIntegerValue(a)?a.length>e&&(f[1]=MSGS.APPL_SEARCH_ERROR_REQNUMBER_INVALID_LENGTH,this._setFocusOnElement(b),c++):(f[1]=MSGS.RCM_INVALID_REQID,this._setFocusOnElement(b),c++);0<c?this._jobReqError=!0:(f[1]=null,this._jobReqError=!1)},_validateBooleanClauses:function(a,b,f,d){1024<a&&1!=b-a?(d[1]=sfMessageFormat.format(MSGS.RCM_APPL_SEARCH_ERROR_MAX_BOOLEAN_CLAUSE,1024,f.getLabel()),this._setFocusOnElement(f.getFocusIdForElement()),this._multiSelectError=
!0):(d[6]=null,this._multiSelectError=!1)},_validateKeywordLanguages:function(a,b,f){b=gebi(b);0==a.length?(f[2]=MSGS.RECRUITING_APPL_SEARCH_ERROR_SELECT_LANGUAGE,this._setFocusOnElement(b),this._keywordLanguageError=!0):(f[2]=null,this._keywordLanguageError=!1)},_setFocusOnError:function(){juic.$("rcmjobSearchFilterErrDiv");Util.removeClass("rcmjobSearchFilterErrDiv","displayNone")},_setFocusOnElement:function(a){this._setFocusOnError();var b=juic.$("rcmjobSearchFilterErrDiv");SFDOMEvent.addListener(b,
"blur",function d(){SFDom.setFocus(a,!0);b.removeAttribute("tabindex");SFDOMEvent.removeListener(b,"blur",d)})},_displaySrchFormErrors:function(a){var b=juic.$("rcmjobSearchFilterErrDiv");b.className=this.generateFDClasses("message-strip",["error"]);if(null!=b){for(var f="",d="\x3cdiv class\x3d'"+this.generateFDClasses("message-strip__icon-container")+"'\x3e\x3cspan class\x3d'"+Util.generateIconClasses("message-error")+"'\x3e\x3c/span\x3e\x3c/div\x3e",e=0;e<a.length;e++){var k=a[e];k&&(f+=k)}a="\x3cspan class\x3d'"+
this.generateFDClasses("message-strip__text")+"'\x3e"+f+"\x3c/span\x3e";b.innerHTML=d+a;var g=juic.$("jobSearchErrMessage");g&&(g.innerHTML=d);setTimeout(function(){g&&(g.innerHTML="")},1E3)}},_clearSrchFormErrors:function(){var a=[],b=gebi("rcmjobSearchFilterErrDiv");null!=b&&(Util.addClass("rcmjobSearchFilterErrDiv","displayNone"),juic.$(b).innerHTML=a.join(""))},_isJobReqError:function(){return this._jobReqError},_isPostedInDaysError:function(){return this._postedInDaysError},_isKeywordLanguageError:function(){return this._keywordLanguageError},
_isMultiSelectError:function(){return this._multiSelectError},_noError:function(){return!this._isJobReqError()&&!this._isPostedInDaysError()&&!this._isKeywordLanguageError()&&!this._isRadialOnError&&!this._isMultiSelectError()},_getSiteIdFromUrl:function(){var a="";this._model&&this._model._filterdata&&(a=this._model._filterdata.searchURL);a=/[\?&]site=([^&#]*)/.exec(a);return null==a?"":a[1]},_onObjFieldSelection:function(a){this._model.updateJobSearchFilterFields(a.target._fieldName,a.values,"object",
a.target._model.isAllSelected(),a.target._model.getObjSelectedValue());this._getJobCount()},handleEvent:function(a){switch(a.type){case "action":switch(a.actionCommand){case "enter":a.actionData.fieldName&&(this._clearSrchFormErrors(),"postedindays"==a.actionData.fieldName?this._validatePostedWithin(a.actionData.value,a.target.id,this._errArr):"reqnumber"==a.actionData.fieldName&&this._validateReqNum(a.actionData.value,a.target.id,this._errArr));this._noError()?(this._model.updateJobSearchFilterFields(a.actionData.fieldName,
a.actionData.value,""),this.dispatch("loadSearchResults",{data:this._model.getUserValues()})):this._displaySrchFormErrors(this._errArr);break;case "search":this._radialComponent&&this._radialComponent.validateAllFields(!0);this._noError()&&this.dispatch("loadSearchResults",{data:this._model.getUserValues()});break;case "searchJobs":this._radialComponent&&this._radialComponent.validateAllFields(!0);this._noError()&&(this._setAlertName("",""),this.dispatch("searchJobs",{data:this._model.getUserValues()}));
break;case "clear":this._setClearSelected(!0);this._model.clearFilters();this._resetPicklistMgr();this._reRenderFilters();this._getJobCount();this._setClearSelected(!1);SFDom.setFocus(this._clearbuttonId);break;case "change":if(a.actionData.fieldName){this._clearSrchFormErrors();if("radialField"==a.actionData.fieldName){if(a.actionData.refocusId&&juic.$(a.actionData.refocusId),this._errArr[3]="",this._errArr[4]="",this._errArr[5]="",this._isRadialOnError=a.actionData.hasError){for(var c=a.actionData.msgs&&
a.actionData.msgs.length,f=0;f<c;f++)this._errArr[3+f]=a.actionData.msgs[f];this._setFocusOnError()}}else"postedindays"==a.actionData.fieldName?this._validatePostedWithin(a.actionData.value,a.target.id,this._errArr):"reqnumber"==a.actionData.fieldName&&this._validateReqNum(a.actionData.value,a.target.id,this._errArr);this._noError()?(this._model.updateJobSearchFilterFields(a.actionData.fieldName,a.actionData.value,""),this._getJobCount()):this._displaySrchFormErrors(this._errArr)}break;case "saveSearch":var d=
this._searchFilterSaveForm.getValue();a=this._model.getUserValues();d.keywords=a.keyword;d.keywordInJobTitleOnly="1"==a.searchScope?!0:!1;a.radialField&&(d.radialField=a.radialField);null!=a.daysPostedWithin&&""!=a.daysPostedWithin.trim()&&(d.postedWithinDays=a.daysPostedWithin);null!=a.jobReqId&&""!=a.jobReqId.trim()&&(d.reqId=a.jobReqId);d.locales=a.keywordLanguageSelectedValues;f=a.picklistSelectedValues;d.customFilters=[];d.fullySelectedPicklists={};if(a.fullySelectedPicklists)for(var e in a.fullySelectedPicklists){var k=
e;1==a.fullySelectedPicklists[e]&&(e&&-1<e.toString().indexOf("customFilter_")&&(k=e.replace("customFilter_","")),d.fullySelectedPicklists[k]=!0)}d.dep=f.department||[];d.div=f.division||[];d.loc=f.location||[];for(c in f)switch(c){case "department":break;case "division":break;case "location":break;default:e=c,-1<e.indexOf("customFilter_")&&(e=e.replace("customFilter_","")),d.customFilters.push({filterId:e,filterValue:f[c]||[]})}d.objSelectedValues=a.objSelectedValues;if(this._searchFilterSaveForm.validateFields(d)){a=
JSON.stringify(d);var g=this;this._saveSearchDialog.close();SFOverlayMgr.showOverlay(this._loadBox,!0);c=AjaxService.getMBeanInstance("rcm2jobAlertController");c.createNewAlert(a,{callback:function(a){if(a){a=JSON.parse(a);SFOverlayMgr.removeOverlay(g._loadBox.id);if(a.error){g._saveSearchDialog.showDialog("_saveSearch");var c=document.getElementById("alertFrequency");c&&c.addEventListener("change",b);Util.ge("jobAlertName")&&(Util.ge("jobAlertName").value=d.name,Util.setSelectedValue("alertFrequency",
d.schedule),0==d.schedule&&(c=Util.ge("newJobs")))&&(c.checked=!1,c.disabled=!0);g._searchFilterSaveForm.setErrorState(a.error)}else g._saveSearchDoneForm?g._saveSearchDoneForm.setMessage(MSGS.RECRUITING_JOB_SEARCH_JOB_ALERT_SAVE_MSG):g._saveSearchDoneForm=new SearchFilterDoneForm(MSGS.RECRUITING_JOB_SEARCH_JOB_ALERT_SAVE_MSG),g._saveSearchDoneDialog=new SFDialog(MSGS.RECRUITING_JOB_SEARCH_JOB_ALERT_SAVE,g._saveSearchDoneForm,[{label:MSGS.COMMON_Done,eventName:"doneSearch",active:!0}],450,150,!1,
0,!0),g._saveSearchDoneDialog.addEventListener("action",g),g._saveSearchDoneDialog.showDialog("_saveSearch");g.dispatch("reloadSavedSearch",{})}}})}break;case "closeSearch":(a=document.getElementById("alertFrequency"))&&a.removeEventListener("change",b);this._saveSearchDialog.close();break;case "doneSearch":this._saveSearchDoneDialog.close()}break;case "change":a.field instanceof SFCheckBox||!a.target||!a.target._radioGroupName||"kwopt"!=a.target._radioGroupName||(this._model.updateJobSearchFilterFields("keyword",
a.newValue,a.target._radioGroupName),this._getJobCount());a.field&&"exactMatch"==a.value&&(this._model.updateJobSearchFilterFields("keyword",a.field.isChecked(),a.field.getValue()),this._getJobCount());break;case "picklistChanged":a.fieldName&&(a.newValue instanceof Array?c=a.newValue:(c=[],c[0]=a.newValue),this._model.updateJobSearchFilterFields(a.fieldName,c,"picklist"),a.selectionClearedByParent||this._getJobCount());break;case "multiplePicklistsChanged":a.fieldName&&((c=a.allSelected)||1!=a.optionList.length-
a.newValue.length||(c=""===a.optionList[0].value),this._clearSrchFormErrors(),this._validateBooleanClauses(a.newValue.length,a.optionList.length,a.target,this._errArr),this._noError()?(f=a.target._isPaginatedPicklistMultiselect?Object.keys(a.newValue).map(function(a){return isNaN(a)?a:parseInt(a)}):a.newValue,c=this._model.updateJobSearchFilterFields(a.fieldName,f,"picklist",c),this._isClearSelected()||!c||a.selectionClearedByParent||this._getJobCount()):this._displaySrchFormErrors(this._errArr));
break;case "objectChanged":a.fieldName&&((c=a.allSelected)||1!=a.optionList.length-a.newValue.length||(c=""===a.optionList[0].value),c=this._model.updateJobSearchFilterFields(a.fieldName,a.newValue,"object",c),!this._isClearSelected()&&c&&this._getJobCount());break;case "kwPicklistChanged":this._clearSrchFormErrors();this._validateKeywordLanguages(a.selectedValues,a.target.selectId,this._errArr);this._noError()?(this._model._updateUserSelectedKeywordLanguages(a.selectedValues),this._getJobCount()):
this._displaySrchFormErrors(this._errArr);break;case "jobCountChanged":a.data&&"0"!=a.data?(this._search.setEnabled(!0),this._viewJobs.setEnabled(!0)):(this._search.setEnabled(!1),this._viewJobs.setEnabled(!1));break;case "reloadFiltersAfterSearch":this._model.setPostingCount(a.data.postingCount);this._count.setCount(a.data.postingCount);break;case "saveSearch":this._searchFilterSaveForm||(this._searchFilterSaveForm=new SearchFilterSaveForm),a=window.location,c=/\/intranetcareer/,-1!=a.pathname.search(/\/career/)||
-1!=a.pathname.search(c)?(a=AjaxService.getRedirectUrl(),c=this._getSiteIdFromUrl(),a+="\x26saveSearchRedirect\x3dtrue\x26career_os\x3djob_listing_summary",""!=c&&(a=a+"\x26site\x3d"+c),window.setLocation(a)):(c=AjaxService.getMBeanInstance("rcm2jobAlertController"),g=this,SFOverlayMgr.showOverlay(this._loadBox,!0),c.isAlertMaxReached({callback:function(a){SFOverlayMgr.removeOverlay(g._loadBox.id);var c=!0,d="saveSearch";a&&(c=!1,d="");g._saveSearchDialog=new SFDialog(MSGS.RECRUITING_JOB_SEARCH_JOB_ALERT_SAVE,
g._searchFilterSaveForm,[{label:MSGS.COMMON_Save,eventName:d,active:c,buttonDesign:"emphasized"},{label:MSGS.COMMON_Cancel,eventName:"closeSearch",active:!1,buttonDesign:"transparent"}],600,190,!1,0,!1);g._saveSearchDialog.addEventListener("action",g);g._saveSearchDialog.setCloseDialogOnEsc(!0);g._saveSearchDialog.showDialog("_saveSearch");a&&g._searchFilterSaveForm.setErrorState(MSGS.RECRUITING_Job_Alert_Error_Creating_Alert_Max_Count);(a=document.getElementById("alertFrequency"))&&a.addEventListener("change",
b)}}))}}})}();function SearchFilterDoneForm(b){this.register();this._msg=b}SearchFilterDoneForm.prototype=function(){return set(new Component,{renderHtml:function(b){b.push('\x3cdiv tabindex\x3d"0" id\x3d"_saveSearchDialogDoneForm"\x3e');b.push("\x3cp\x3e",this._msg,"\x3c/p\x3e");b.push("\x3c/div\x3e")},setMessage:function(b){this._msg=b}})}();function SearchFilterSaveForm(){this.register();this.init()}
SearchFilterSaveForm.prototype=function(){return set(new Component,{init:function(){this._form=document.getElementById("_saveSearchForm").innerHTML;document.getElementById("_saveSearchForm").innerHTML=""},getValue:function(){var b={};b.name=Util.ge("jobAlertName")?Util.ge("jobAlertName").value:null;var a=Util.ge("alertFrequency");b.schedule=a?a.options[a.selectedIndex].value:null;b.newJobs=Util.ge("newJobs").checked?!0:!1;return b},renderHtml:function(b){b.push('\x3cdiv id\x3d"_saveSearchDialogForm"\x3e');
b.push(this._form);b.push("\x3c/div\x3e")},setErrorState:function(b){var a=Util.ge("jobAlertError"),c=Util.ge("jobAlertErrorString");SFDom.removeClass(a,"hide");c.innerHTML=juic.escapeHTML(b)},validateFields:function(b){var a=Util.ge("alertNameError"),c=Util.ge("alertScheduleError"),f=!0;SFDom.addClass(a,"hide");SFDom.addClass(c,"hide");var d=!b.name||""==b.name.trim();d?(SFDom.removeClass(a,"hide"),SFDom.setFocus("jobAlertName"),SFDom.addClass("jobAlertName","errorborder"),f=!1):SFDom.removeClass("jobAlertName",
"errorborder");b.schedule?SFDom.removeClass("alertFrequency","errorborder"):(SFDom.removeClass(c,"hide"),SFDom.setFocus("alertFrequency"),SFDom.addClass("alertFrequency","errorborder"),f=!1);d&&!b.schedule&&(SFDom.setFocus("jobAlertName"),SFDom.addClass("jobAlertName alertFrequency","errorborder"),f=!1);return f},clearFields:function(){var b=Util.ge("jobAlertName");b&&(b.value="");if(b=Util.ge("alertFrequency"))b.selectedIndex=0}})}();
function SearchFilterLayout(b,a,c){this.register();this._entries=[];this._filterObj=a;this._hasAlerts=c;this._isExternalorPublicIntranet=b;this._savedSearchesMenu=new SFContextualMenu(MSGS.RECRUITING_JOB_SEARCH_JOB_ALERT_RUN_SAVED_SEARCH,"arrowDown",!0,"",!1,!1,!0);this._filterObj.addEventListener("reloadSavedSearch",this)}
SearchFilterLayout.prototype=function(){return set(new Component,{addField:function(b,a){this._entries.push([b,a])},_saveSearch:function(b){checkDpcs2AndSave(this)},_keySearch:function(b){13!==b.keyCode&&32!==b.keyCode||checkDpcs2AndSave(this)},handleEvent:function(b){switch(b.type){case "action":"runJobAlert"==b.actionCommand&&this._filterObj.initializeWithAlertFilters(b.actionData);break;case "reloadSavedSearch":this._reloadAlertsMenu()}},_reloadAlertsMenu:function(){if(this._filterObj.isUserLoggedIn()){this._savedSearchesMenu.cleanup();
var b=this._savedSearchesMenu=new SFContextualMenu(MSGS.RECRUITING_JOB_SEARCH_JOB_ALERT_RUN_SAVED_SEARCH,"arrowDown",!0),a=this;AjaxService.getMBeanInstance("rcm2jobAlertController").getAllJobAlerts({callback:function(c){if(c){c=JSON.parse(c);for(var f=0,d=c.length;f<d;f++){var e=c[f],k=Util.isRTL()?"\x26#xe14d;":"\x26#xe14b;",e=new RCMRolloverMenu("run",e.name,"runJobAlert",e,!0,k,d,f);b.addMenuItem(e);e.addEventListener("action",a);e=[];b.renderHtml(e);juic.$("runAsSavedSearchMenuContainer").innerHTML=
e.join("")}0==c.length?(a._filterObj.setHavingSavedSearches(!1),SFDom.addClass(juic.$("runAsSavedSearchMenuDiv"),"hide")):(a._filterObj.setHavingSavedSearches(!0),SFDom.removeClass(juic.$("runAsSavedSearchMenuDiv"),"hide"))}}})}},renderHtml:function(b){for(var a=0,c=this._entries.length;a<c;a++){var f=this._entries[a][0],d=this._entries[a][1],e=a==c-1?"lastFilterLabel":"",k=a==c-1?"lastFilter":"";null!=f&&""!=f&&(b.push("\x3cdiv class\x3d'jobsearch_filter_label_ForDiv "+e+"'\x3e"),f.renderHtml(b),
b.push("\x3c/div\x3e"));null!=d&&""!=d&&(b.push("\x3cdiv class\x3d'jobsearch_filter "+k+"'\x3e"),d.renderHtml(b),b.push("\x3c/div\x3e"))}b.push('\x3cdiv class\x3d"jobReqFilterSeperator jobReqFilterSeperator_accessible"\x3e\x3c/div\x3e');if(Util.ge("isJobAlertFeatureAvailable")&&Util.ge("isJobAlertFeatureAvailable").value&&(b.push('\x3cdiv class\x3d"savedSearchContainer"\x3e'),b.push('\x3cdiv class\x3d"saveSearchLinkCtr"\x3e\x3ca class\x3d"',this.generateFDClasses("link"),'" onkeypress\x3d"',this.fireCode("_keySearch"),
'" id\x3d"_saveSearch" role\x3d"button" tabindex\x3d"0" onclick\x3d"',this.fireCode("_saveSearch"),'"\x3e',MSGS.RECRUITING_JOB_SEARCH_JOB_ALERT_SAVE,"\x3c/a\x3e\x3c/div\x3e"),this._filterObj.isUserLoggedIn())){var g=this._savedSearchesMenu;b.push('\x3cdiv id\x3d"runAsSavedSearchMenuDiv" class\x3d"',this._hasAlerts?"":"hide",'"\x3e\x3cbr/\x3e\x3cspan class\x3d"selectActionMenu selectActionMenu_accessible" id\x3d"runAsSavedSearchMenuContainer" style\x3d"width:10px"\x3e');g.renderHtml(b);b.push("\x3c/span\x3e\x3c/div\x3e");
b.push("\x3c/div\x3e");if(this._hasAlerts){var m=this;AjaxService.getMBeanInstance("rcm2jobAlertController").getAllJobAlerts({callback:function(a){if(a){a=JSON.parse(a);for(var b=0,c=a.length;b<c;b++){var d=a[b],e=Util.isRTL()?"\x26#xe14d;":"\x26#xe14b;",d=new RCMRolloverMenu("run",d.name,"runJobAlert",d,!0,e,c,b);g.addMenuItem(d);d.addEventListener("action",m)}}}})}}}})}();function PostedDaysText(b,a){this.register();this.setValue(b);this._cssClass=a}
PostedDaysText.prototype=function(){return set(new Component,{setValue:function(b){this._value=b;juic.$(this.id)&&(juic.$(this.id).innerHTML=escapeHTML(this._value))},renderHtml:function(b){b.push('\x3cspan id\x3d"',this.id,'" class\x3d"',this._cssClass,'"\x3e',escapeHTML(this._value),"\x3c/span\x3e")}})}();
function RCMCustomRadio(b,a,c,f){this.register();assert(a,"[RCMCustomRadio] Name param required.");this._radioGroupName=a;this._options=c?c:{vertical:!0};this._encodeLabels="undefined"!==typeof this._options.encodeLabels?this._options.encodeLabels:!0;this._legendText=null;this._exactMatch=new SFCheckBox(f||!1,"exactMatch",MSGS.RECRUITING_EXACT_MATCH_OPTION);this._exactMatch.addEventListener("change",this);SFAbstractSingleSelect.prototype._init.call(this,b)}
RCMCustomRadio.prototype=function(){return set(new SFAbstractSingleSelect,{renderHtml:function(b){b.push("\x3cfieldset class\x3d'jobSearchFieldset'\x3e");this._legendText&&b.push("\x3clegend class\x3d'hiddenLegend'\x3e",juic.escapeHTML(this._legendText),"\x3c/legend\x3e");b.push("\x3cspan class\x3d'exactMatchSpan'\x3e");this._exactMatch&&this._exactMatch.renderHtml(b);b.push("\x3c/span\x3e");for(var a=0,c=this._model.size();a<c;a++)this._model.get(a),b.push("\x3cdiv class\x3d'clearBothOptions'  id\x3d\"",
this.id,"_list_",a,"\"\x3e\x3cspan class\x3d'optionholder'\x3e"),this.renderRadioButton(b,a),b.push("\x3c/span\x3e\x3c/div\x3e");b.push("\x3c/fieldset\x3e")},renderRadioButton:function(b,a){var c=this._model.get(a),f=c.getValue?'value\x3d"'+c.getValue()+'" ':'value\x3d"'+a+'" ',d=this.id+"_item_"+a,e=a==this._model.getSelectedIndex()?"checked":"";b.push("\x3cdiv class\x3d'radioholder'\x3e\x3cspan class\x3d'floatleft'\x3e\x3cinput class\x3d\"",this.generateFDClasses("radio"),'" type\x3d"radio" id\x3d"',
d,'" name\x3d"',this._radioGroupName,'" ',f,' onclick\x3d"',this.fireCode("_changeSelection",a),'" ',e," /\x3e");c.toString&&""!=c.toString()&&(!this.isFioriFDEnabled()&&b.push("\x3cspan class\x3d'labelholder floatleft' \x3e"),b.push('\x3clabel class\x3d"',this.generateFDClasses("radio__label"),'" for\x3d"',this.id,"_item_",a,'"\x3e',escapeHTMLIfNeeded(c.toString(),this._encodeLabels),"\x3c/label\x3e"),!this.isFioriFDEnabled()&&b.push("\x3c/span\x3e"));b.push("\x3c/span\x3e\x3c/div\x3e")},_updateModel:function(){this._model.addEventListener("contentsChanged",
this);this._model.addEventListener("intervalAdded",this);this._model.addEventListener("intervalRemoved",this)},_changeSelection:function(b){b!=this._model.getSelectedIndex()&&this.setSelectedIndex(b)},setItemLabel:function(b,a){this._model.setItemText(b,a)},setLegendText:function(b){this._legendText=b},handleEvent:function(b){if(b.target&&"change"==b.type)this.dispatch("change",{field:b.target,value:"exactMatch"});else{var a=juic.$(this.id+"_item_"+this._model.getSelectedIndex());if(a)switch(b.type){case "contentsChanged":-1==
b.index0?(a.checked=!0,b=this._model.getSelectedIndex(),a=this._model.get(b),a=a.getValue?a.getValue():a.toString(),this.dispatch("change",{newIndex:b,newValue:a})):juic.$(this.id+"_item_"+b.index0).innerHTML=juic.escapeHTML(this._model.get(b.index0))}}},setValue:function(b){for(var a=0,c=this._model.size();a<c;a++){var f=juic.$(this.id+"_item_"+a);f&&b==f.value&&this.setSelectedIndex(a)}},getValue:function(){var b=juic.$(this.id+"_item_"+this._model.getSelectedIndex());return b?b.value:""},cleanup:function(){this._model.removeEventListener("contentsChanged",
this);this._model.removeEventListener("intervalAdded",this);this._model.removeEventListener("intervalRemoved",this);this.unregister()}})}();function SaveSearchDpcs2Handler(b){RCMDpcs2Handler.call(this,b)}extend(SaveSearchDpcs2Handler,RCMDpcs2Handler,{accept:function(b){this.getConfig().params.searchFilterObj.dispatch("saveSearch",{})}});
function checkDpcs2AndSave(b){(this._isExternalorPublicIntranet=b._isExternalorPublicIntranet)?b.dispatch("saveSearch",{}):checkDpcs2AcceptanceBeforeProceeding({createDpcs2Handler:function(a){return new SaveSearchDpcs2Handler({dpcs2AcceptedOrDeclinedStatusFromServer:a,params:{searchFilterObj:b}})}},!1)};