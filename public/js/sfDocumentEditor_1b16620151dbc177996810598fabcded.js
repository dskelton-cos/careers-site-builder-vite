function SFDocumentEditor(a,b,c,d){this.register(),this.init(a,b,c,d)}SFDocumentEditor.getParentWindow=function(){var a=window.parent;if(a)try{var b=SFDom.getLocationOrigin(a.location);b&&b===SFDom.getLocationOrigin(window.location)||(a=null)}catch(b){a=null}return a||(a=window),a},SFDocumentEditor.prototype=function(){var a=function(b,c,d){setTimeout(function(){document.getElementById(b)?(CKEDITOR.instances[b]&&CKEDITOR.instances[b].destroy(!0),CKEDITOR.replace(b,c),"function"==typeof SFDocumentEditor.getParentWindow().FCKeditor_OnComplete&&CKEDITOR.instances[b]&&SFDocumentEditor.getParentWindow().FCKeditor_OnComplete(CKEDITOR.instances[b]),d&&CKEDITOR.instances[b]&&CKEDITOR.instances[b].setData(d)):a()},250)};return juic.set(new juic.Component,{init:function(a,b,c,d){juic.assert(a&&0<a.length,"SFDocumentEditor: Please provide an instanceName"),this._config={versionCheck:!1},this._instanceName=a;var e="100%",f="200";if(b&&(e=b.width?b.width:e,f=b.height?b.height:f),this._config.isForSFDocumentEditor=!0,this._config.width=e,this._config.height=f,c){if(c.customConfigPath&&(this._config.customConfig=c.customConfigPath),c.toolbar&&(this._config.toolbar=c.toolbar),c.language)this._config.language=c.language;else{var g=this.getUserLocale();"iw_IL"==g&&(g="he"),g&&(this._config.language=g)}c.defaultTranslationDivId&&(this._config.defaultTranslationDivId=c.defaultTranslationDivId),c.showLoadingIndicator&&(this._loading=new SFLoading(MSGS.COMMON_loading,"#333")),c.required&&(this._config.required=!0),this._config.ariaLabel=c.ariaLabel}d&&this.setValue(d),this._spId="glui"+new Date().getTime(),SFDocumentEditor.getParentWindow()[this._spId]=this,this._config.documentEditorId=this._spId;var h=this;this._instanceLoaded=function(a){a.editor.name==h._instanceName&&h._getReady()},CKEDITOR.on("instanceLoaded",this._instanceLoaded),setTimeout(function(){var b=CKEDITOR.instances[a];b&&b.on("blur",function(){h.dispatch("blur",h)})},1e3),setTimeout(function(){var b=CKEDITOR.instances[a];b&&b.on("change",function(){h.dispatch("change",h)})},1e3)},getUserLocale:function(){return window.pageHeaderJsonData&&window.pageHeaderJsonData.userLocale?pageHeaderJsonData.userLocale:null},renderHtml:function(b){b.push("<div id=\""+this.id+"\"><textarea style=\"display:none\" id=\"",this._instanceName,"\" name=\"",this._instanceName,"\"></textarea></div>"),this._loading&&(b.push("<div id=\"",this.id,"_loading","\">"),b.push(this._loading),b.push("</div>")),a(this._instanceName,this._config,this._value)},getText:function(){return CKEDITOR.instances[this._instanceName]?CKEDITOR.instances[this._instanceName].getData():""},setText:function(a){this._value=a,CKEDITOR.instances[this._instanceName]&&CKEDITOR.instances[this._instanceName].setData(a)},setValue:function(a){this.setText(a)},getValue:function(){return this.getText()},cleanup:function(){CKEDITOR.instances[this._instanceName]&&CKEDITOR.instances[this._instanceName].destroy(),SFDocumentEditor.getParentWindow()[this._spId]=null,this._loading&&this._loading.cleanup(),this.unregister()},setPluginData:function(a){var b,c=CKEDITOR.instances[this._instanceName];if(c)for(b in a)c.config[b]=a[b]},_getReady:function(){var a=CKEDITOR.instances[this._instanceName],b=a&&a.editable();if(b){var c=this._config;setTimeout(function(){c.ariaLabel&&b.setAttribute("aria-label",c.ariaLabel),c.required&&b.setAttribute("aria-required",!0)},3e3)}var d=juic.$(this.id+"_loading");d&&d.parentNode.removeChild(d),CKEDITOR.removeListener("instanceLoaded",this._instanceLoaded),this.dispatch("editorReady")}})}(),SFDocumentEditor.calculateZIndex=function(a,b){return(!a||10>=a)&&(a=1e4),b>a?b-10:a},window.CKEDITOR&&(CKEDITOR.dom.document.prototype.getElementsByTag=function(a,b){return!(CKEDITOR.env.ie&&8>=document.documentMode)&&b&&(a=b+":"+a),new CKEDITOR.dom.nodeList("function"==typeof this.$.querySelectorAll?this.$.querySelectorAll(a):this.$.getElementsByTagName(a))},CKEDITOR.dom.element.prototype.find=function(a){function b(a,b){return"#"+a.$.id+" "+b.split(/,\s*/).join(", #"+a.$.id+" ")}var c=function(a){var b=!0;return a.$.id||(a.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),b=!1),function(){b||a.removeAttribute("id")}}(this),d=new CKEDITOR.dom.nodeList("function"==typeof this.$.querySelectorAll?this.$.querySelectorAll(b(this,a)):this.$.getElementsByTagName(b(this,a)));return c(),d},function(){var a=CKEDITOR.dialog.prototype,b=a.show;a.show=function(){var a=window.sap&&sap.ui&&sap.ui.core&&sap.ui.core.Popup;return a&&(CKEDITOR.dialog._.currentZIndex=SFDocumentEditor.calculateZIndex(this._.editor.config.baseFloatZIndex,a.getNextZIndex())),b.apply(this,arguments)}}());