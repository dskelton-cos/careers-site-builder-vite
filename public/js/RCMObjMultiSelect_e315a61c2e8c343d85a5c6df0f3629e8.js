function RCMObjMultiSelect(a,c){this.init(a,c)}
juic.extend(RCMObjMultiSelect,SFAbstractResizable,{init:function(a,c){this._model=a;this._model.addEventListener("itemListReady",this,"_itemListReady");this._model.addEventListener("selectAllItemListReady",this,"_selectAllItemListReady");this._rcmObjMultiSelectProvider=new RCMObjMultiSelectProvider(a);this._rcmObjMultiSelectProvider.addEventListener("loading",this,"_showLoading");this._listoptions={pageSize:50,fetchPagesInOrder:!1,noResultsMessage:null,scrollItemTop:!1,fetchPageDelay:1E3};void 0!=
c.fieldCriteriaMgr&&null!=c.fieldCriteriaMgr&&this._registerInFieldCriteriaMgr(c.fieldCriteriaMgr,c.fieldName,this);this._rcmObjMultiSelectComboList=new RCMObjMultiSelectComboList(this._rcmObjMultiSelectProvider,this._listoptions);this._rcmObjMultiSelectComboList.addEventListener("arrowKeyPress",this,"_handleKeyPress");this._rcmObjMultiSelectComboList.addEventListener("itemFocused",this,"_itemFocused");this._selectAll=new RCMAccessibleCheckBox(!1,{value:MSGS.RECRUITING_Select_all,label:MSGS.RECRUITING_Select_all,
removeFromTabOrder:!0,parentSelection:!0});this._selectAll.addEventListener("change",this,"_selectAllChanged");this._updateModel()},_registerInFieldCriteriaMgr:function(a,c,b){a.registerField(c,b)},getSelectAll:function(){return this._selectAll},getSelectedValues:function(){return this._model._returnObject?this._model.getObjSelectedValue():this._model.getSelectedItemValues()},getAllSelectedValues:function(){return this._model.getAllObjSelectedValues()},setDimension:function(a,c){this.getList().setDimension(a,
c)},isFoundationObject:function(){return this._model._isFoundationObject},isGenericObject:function(){return this._model._isGenericObj},getDependentFields:function(){var a=[];void 0!=this._model._fieldsMeta&&void 0!=this._model._fieldsMeta.searchOptions&&(a=this._model._fieldsMeta.searchOptions.dependentFields);return a},_enableDependentFields:function(){for(var a=this.getDependentFields(),c=0;c<a.length;){var b=this._model._getFieldByFieldId(a[c]);b&&!b._readOnly&&b.getObjFieldVal&&b.getObjFieldVal().setEnabled(!0);
c++}},_itemFocused:function(a){(a=juic.$(a.item.checkbox.id+"_anchor"))&&a.focus()},_itemListReady:function(a){this._model.createSelectedObjItems(a.data.payload);this._rcmObjMultiSelectComboList.renderSelectedItems(this._model.getGoFieldId())},_selectAllItemListReady:function(a){this._model.isSelectAllDataEnabled=this._model._selectAll;this._model.setAllSelectedDisplayValues(a);this._model.createSelectedAllObjItems(a.data.payload);this._rcmObjMultiSelectComboList.renderSelectedItems(this._model.getGoFieldId());
this._enableDependentFields();this._model.dispatch("selectAllLoaded")},_selectAllChanged:function(a){a=a.checked;this._model.isFieldEditableBasedOnFCConfig()?(this._model.setSelectionChanged(!0),this._selectAll.setChecked(a),juic.$(this._selectAll.id+"_dialogHeader").setAttribute("aria-checked",a),juic.$(this._selectAll.id+"_dialogHeader").setAttribute("aria-selected",a),a?(this._model.selectAll(),this._model._displaySelectedValues&&(this.dispatch("loadSelectAll"),this._model.fetchAllObjects()),juic.$(this._selectAll.id).title=
MSGS.RECRUITING_Clear_all):(this._model.isSelectAllDataEnabled=!1,this._model.unselectAll(),juic.$(this._selectAll.id).title=MSGS.RECRUITING_Select_all,this._model._displaySelectedValues&&this._rcmObjMultiSelectComboList.renderSelectedItems(this._model.getGoFieldId()))):(this._model.showAlert(),this._selectAll.setChecked(!a))},changeSelectAll:function(a){this._selectAll.setChecked(a);juic.$(this._selectAll.id)&&(juic.$(this._selectAll.id).title=a?MSGS.RECRUITING_Clear_all:MSGS.RECRUITING_Select_all)},
getList:function(){return this._rcmObjMultiSelectComboList},dataReady:function(a){this._rcmObjMultiSelectProvider.dataReady(a)},getSelectedValueAccessibleText:function(){var a="",c=this._model.getCountOfItemsSelected();if(this._model.isAllSelected())a=MSGS.RECRUITING_ACCESSIBLE_MFIELD_ALL_SELECTED;else if(0<c){var b=this._model.getSelectedDisplayValueInfo();0<b.allSelectedValue.length&&(a=1==c?b.primaryValue?MSGS.RECRUITING_ACCESSIBLE_MFIELD_SELECTED_VALUE+" "+b.primaryValue:MSGS.RECRUITING_ACCESSIBLE_MFIELD_SELECTED_VALUE+
" "+b.allSelectedValue[0]:MSGS.RECRUITING_ACCESSIBLE_MFIELD_SELECTED_VALUES+" "+(b.primaryValue||"")+(""!=b.primaryValue?", ":"")+b.otherValues.join(", "))}else 0==c&&(a=MSGS.RECRUITING_ACCESSIBLE_MFIELD_NO_SELECTION);return a},_showLoading:function(a){a.show?juic.$("loadingIcon_"+this.id).style.display="block":juic.$("loadingIcon_"+this.id).style.display="none"},getSelectedInputText:function(){return 1==this._model.getCountOfItemsSelected()?this._model.getTextOfOnlySelecteditem():this._model.isAllSelected()||
0==this._model.getCountOfItemsSelected()?MSGS.RECRUITING_COMMON_ANY:MSGS.RECRUITING_Multiple_selections+"("+this._model.getCountOfItemsSelected()+")"},focusOnSelectAll:function(){var a=juic.$(this.getSelectAll().id+"_dialogHeader");a&&a.focus()},getHelpTitle:function(a){return 0<this._model.getCountOfItemsSelected()||this._model.isAllSelected()?MSGS.RECRUITING_Edit_View_options:a?sfMessageFormat.format(MSGS.RECRUITING_Select_options_for,a):MSGS.RECRUITING_Select_options},_updateModel:function(){this._model.addEventListener("contentsChanged",
this._rcmObjMultiSelectComboList);this._model.addEventListener("selectionChanged",this._rcmObjMultiSelectComboList)},cleanup:function(){this._model.removeEventListener("contentsChanged",this._rcmObjMultiSelectComboList);this._model.removeEventListener("selectionChanged",this._rcmObjMultiSelectComboList);this.unregister()},_handleKeyPress:function(a){a=a.event;var c=SFDOMEvent.getKeyName(a),b=this._rcmObjMultiSelectComboList;switch(c){case "ARROWUP":this._model._hasPrimary&&(SFDOMEvent.preventDefault(a),
b&&b.moveFocusUp());break;case "ARROWDOWN":this._model._hasPrimary&&(SFDOMEvent.preventDefault(a),b&&b.moveFocusDown());break;case "RETURN":case "SPACEBAR":SFDOMEvent.preventDefault(a);b=this._rcmObjMultiSelectComboList._focusItem.checkbox;b.setChecked(!b.isChecked());var c=b.index,d=this._rcmObjMultiSelectComboList._getItemDomId(c);if(d=gebi(d))d.setAttribute("aria-checked",b.isChecked()),d.setAttribute("aria-selected",b.isChecked());if(b.isChecked())this._model.selectIndex(c),a.target.classList.contains("sfCheckBoxMenuItem")&&
this._rcmObjMultiSelectComboList._primaryValueChanged&&this._rcmObjMultiSelectComboList._primaryValueChanged(this._rcmObjMultiSelectComboList.getFocusItem().activateIndex);else{this._model.unselectIndex(c);var b=this._model.isPrimary(c),e;b&&(e=this._model.setNextSelectedItemAsPrimary(c),d=!1,-1!=e&&(d=this._model.get(e).checkbox.isChecked(),c=e),e=this._rcmObjMultiSelectComboList._getPrimaryDisplayValue(d,b));b=this._model.get(c)&&this._model.get(c).getValue();this._model.removeItemFromDisplayValues(b);
a.target.classList.contains("sfCheckBoxMenuItem")&&this._rcmObjMultiSelectComboList._primaryValueChanged&&this._rcmObjMultiSelectComboList._primaryValueChanged(c);this._rcmObjMultiSelectComboList._renderPrimaryItem(c,e);this._rcmObjMultiSelectComboList.renderSelectedItems(this._model.getGoFieldId())}}},getToggleClass:function(){return this._toggleClass},setToggleClass:function(a){this._rcmObjMultiSelectComboList&&this._rcmObjMultiSelectComboList.setToggleClass(a)},renderHtml:function(a){a.push('\x3cdiv role\x3d"listbox" id\x3d"rcmObj_',
this.id,'" class\x3d"rcmObjContainer"');this._model._fieldsMeta&&this._model._fieldsMeta.label?a.push(' aria-label\x3d"',this._model._fieldsMeta.label,'"\x3e'):a.push("\x3e");if(this._selectAll){var c=this._model.isAllSelected();a.push("\x3cdiv role\x3d'option' tabindex\x3d'0' aria-checked\x3d'"+c+"' aria-selected\x3d'"+c+"' class\x3d'rcmmultiselectdialogheader' id\x3d'"+this._selectAll.id+"_dialogHeader'\x3e");c&&(this._selectAll.setChecked(c),this._model.selectAllEnabled(c));this._selectAll.renderHtml(a);
a.push("\x3c/div\x3e")}this._rcmObjMultiSelectComboList.renderHtml(a);a.push("\x3c/div\x3e")},clear:function(){this._model.clear();this._model._goObjSingleSelectDisplayVal="";this._model.setLastPage(null);this._model.setSelectionChanged(!0);this._rcmObjMultiSelectComboList.renderSelectedItems();this.dispatch("selectionCleared")},getValue:function(a){return a.getValue?a.getValue():a.id?a.id:a.toString()},fetchData:function(){this._model.getLastPage()?this._rcmObjMultiSelectComboList.fetchNewPage(this._model.getLastPage().pageIndex):
this._rcmObjMultiSelectComboList.clearFilter()}});function RCMObjMultiSelectProvider(a){this._model=a;this._model.addEventListener("searchError",this,"_searchError");this._model.addEventListener("itemsAvailable",this,"_itemsAvailable")}
(function(){juic.extend(RCMObjMultiSelectProvider,SFAbstractItemProvider,{getItems:function(a){this._model.fetchItems(a);this._model.setLastPage(a)},setLoading:function(){this.dispatch("loading",{show:!0})},removeLoading:function(){this.dispatch("loading",{show:!1})},getLabel:function(a){return a?a.name:""},getValue:function(a){return a?a.id:""},_itemsAvailable:function(a){this.dispatchEvent(a)},_searchError:function(a,c,b){this.dispatch("searchError",{message:a,error:c,pagination:b})},_handleAction:function(a){this.dispatchEvent(a)},
getModel:function(){return this._model}})})();function RCMObjMultiSelectComboList(a,c){this._super(a,c);this._items={};this._model=a.getModel();this._minWidth=c&&c.width;this._width=this._minWidth+"px"}
(function(){juic.extend(RCMObjMultiSelectComboList,SFComboListSelect,{handleEvent:function(a){switch(a.type){case "selectionChanged":a=0;for(var c=this._model.size();a<c;a++){var d=this._model.get(a),e=this._model.isIndexSelected(a);d&&d.checkbox&&d.checkbox.setState(e?SFCheckBoxStates.CHECKBOX_CHECKED:SFCheckBoxStates.CHECKBOX_UNCHECKED);juic.$(this.id+"item"+a)&&(this.toggleClass(e,juic.$(this.id+"item"+a)),juic.$(this.id+"item"+a).setAttribute("aria-checked",e),juic.$(this.id+"item"+a).setAttribute("aria-selected",
e));if(this._model._hasPrimary){var g=this._model.isPrimary(a),f=this._model.getPrimaryInfo();e&&null==f.index&&null==f.value?(g=!0,this._model.setPrimaryInfo(d.activateIndex,d.getValue().toString(),d.getPrimaryDisplayText())):0==this._model.getSelectedItemValues().length&&0==this._model.getPreSelectedValues().length&&(g=!1);this._renderPrimaryItem(a,this._getPrimaryDisplayValue(e,g))}}}},toggleClass:function(a,b){a?SFDom.replaceClass(b,"globalMenuItem",this._toggleClass):SFDom.replaceClass(b,this._toggleClass,
"globalMenuItem")},isAllSelected:function(){return this._model.isAllSelected()},fetchNewPage:function(a){this._fetchPage(a);this.dispatch("itemsAvailable")},_renderItem:function(a,b,d){var c=this._model.isIndexSelected(d),g=this._model.isPrimary(d);a.push('\x3cli role\x3d"option" aria-checked\x3d"',c,'" aria-selected\x3d"',c,'" id\x3d"',this._getItemDomId(d),'" tabindex\x3d"0" class\x3d"sfCheckBoxMenuItem ',c?this._toggleClass:"globalMenuItem",this._model._hasPrimary?" menuItemWithPrimary":"",'"',
'onkeydown\x3d"'+this.fireCode("_arrowKeyPress",this.id,d,this._model.size()),'"\x3e');if(b&&!b.checkbox){var f;f=this._model._showExternalCode?b.getPrimaryDisplayText():b.getText();f=new RCMAccessibleCheckBox(c,{value:b.getValue(),label:f,removeFromTabOrder:!0,parentSelection:!0});f.index=d;f.addEventListener("change",this,"_onClick");b.checkbox=f;b.activateIndex=d}else b&&(f=b.checkbox,b.activateIndex=d);a.push(f);this._model._hasPrimary&&(a.push('\x3cspan id\x3d"rcmObjMultiSelectPrimaryItem',this.id,
d,'" class\x3d"rcmObjMultiSelectPrimaryItem" tabindex\x3d"0" onclick\x3d"'+this.fireCode("_primaryValueChanged",d)+'"\x3e'),a.push(this._getPrimaryDisplayValue(b.checkbox.isChecked(),g)),a.push("\x3c/span\x3e"))},_getPrimaryDisplayValue:function(a,b){return a?b?MSGS.RCM_MULTISELECT_PRIMARY_VALUE:MSGS.RCM_MULTISELECT_MAKE_PRIMARY_VALUE:""},_primaryValueChanged:function(a){var b=this._model.getPrimaryInfo();if(b&&b.index!=a){this._model.addItemToDisplayValues(b);if(null!=b.index){var c=this._model.get(b.index).checkbox._checked;
this._renderPrimaryItem(b.index,this._getPrimaryDisplayValue(c,!1))}b=this._model.get(a);c=b.checkbox._checked;this._model.setPrimaryInfo(a,b.getValue().toString(),b.getPrimaryDisplayText());this._renderPrimaryItem(a,this._getPrimaryDisplayValue(c,!0))}this._model._displaySelectedValues&&this.renderSelectedItems(this._model.getGoFieldId())},_renderPrimaryItem:function(a,b){juic.$("rcmObjMultiSelectPrimaryItem"+this.id+a)&&(juic.$("rcmObjMultiSelectPrimaryItem"+this.id+a).innerHTML=b)},renderSelectedItems:function(a){var b=
this._model.getSelectedDisplayValueInfo();if(this._model._displaySelectedValues){var c="";b.primaryValue&&(c="\x3cspan style\x3d'font-weight: bold'\x3e"+b.primaryValue+"\x3c/span\x3e");0<b.otherValues.length&&(c=c+(""!=c?", ":"")+b.otherValues.join(", "));juic.$(a+"_displaySelectedItems")&&(SFDom.removeClass(juic.$(a+"_loadingIndicator"),"multiSelectInProgress"),juic.$(a+"_displaySelectedItems").innerHTML=c)}},_renderPageContent:function(a,b,d){a.push('\x3cdiv class\x3d "rcmObjMultiselect"\x3e');
a.push('\x3cul id\x3d"',this.id,'_listSelect" class\x3d "sf-list-select" role\x3d"none"\x3e');if(0==b&&0==d.length)a.push('\x3cli role\x3d"option" class\x3d"no-results" unselectable\x3d"on" onselectstart\x3d"return false"\x3e'),a.push(MSGS.COMMON_No_Results),a.push("\x3c/li\x3e");else for(var c=0,g=d.length;c<g;c++){var f=d[c],h=b*this._pageSize+c;this._fetchPagesInOrder&&0<b&&(h=this._lastItemIndex+1);a.push('\x3cli tabindex\x3d"-1" id\x3d"rcmObjMultiSelectItem',this.id,h,'"');a.push(' class\x3d"globalMenuItem ');
f&&f.disabled&&a.push(" ",this._super.DISABLED_ITEM);this._itemClass?a.push(" ",this._itemClass):a.push("sf-list-item ");this._focusIndex==h&&a.push(" ",this._getFocusClass());a.push('" onmouseover\x3d"',this.fireCode("_mouseover",h));a.push('" onmouseout\x3d"',this.fireCode("_mouseout",h));a.push('" ontouchstart\x3d"',this.fireCode("_touchstart",h));a.push('" ontouchend\x3d"',this.fireCode("_touchend",h));a.push('" onclick\x3d"',this.fireCode("_selectItem",h),'"\x3e');this._renderItem(a,f,h);a.push("\x3c/li\x3e");
this._fetchPagesInOrder&&(this._lastItemIndex=h)}a.push("\x3c/ul\x3e");a.push("\x3c/div\x3e")},setToggleClass:function(a){this._toggleClass=a},_onClick:function(a){a=a.target;var b;if(this._model.isFieldEditableBasedOnFCConfig()){this._model.setSelectionChanged(!0);var c="";if(a){b=a.index;var e=this._getItemDomId(b);if(e=gebi(e))e.setAttribute("aria-checked",a.isChecked()),e.setAttribute("aria-selected",a.isChecked());e=!1;a.isChecked()?(this._model.addItemToDisplayValues(this._model.get(b)),this._model._hasPrimary&&
((c=this._model.getPrimaryInfo())&&null==c.value&&null==c.index&&(c=this._model.get(b),this._model.setPrimaryInfo(b,c.getValue().toString(),c.getPrimaryDisplayText()),e=!0),c=this._getPrimaryDisplayValue(a.isChecked(),e)),this._model.selectIndex(b)):(this._model.unselectIndex(b),this._model._hasPrimary&&(this._renderPrimaryItem(b,c),e=this._model.isPrimary(b))&&(a=this._model.setNextSelectedItemAsPrimary(b),c=!1,-1!=a&&(c=this._model.get(a),c=c.checkbox.isChecked(),b=a),c=this._getPrimaryDisplayValue(c,
e)),a=this._model.get(b)&&this._model.get(b).getValue(),this._model.removeItemFromDisplayValues(a))}this.changeItemFocus(b,!1);this._model._hasPrimary&&this._renderPrimaryItem(b,c);this._model._displaySelectedValues&&this.renderSelectedItems(this._model.getGoFieldId())}else this._model.showAlert(),a.setChecked(!a.isChecked())},_arrowKeyPress:function(a,b,d,e){this.dispatch("arrowKeyPress",{id:a,index:b,total:d,event:e})},_calculateDims:function(){if(!this._pageHeight){var c=juic.$(this.id+0);if(c)this._pageHeight=
c.offsetHeight,this._pageWidth=c.offsetWidth;else if(this._isPageAvailable(0)){a||(a=document.createElement("div"),Util.hide(a),a.style.position="absolute",document.body.firstChild?document.body.insertBefore(a,document.body.firstChild):document.body.appendChild(a));c=a;c.className="scrolling-page"+(this._mutatorClass?" "+this._mutatorClass:"");var b=juic.createRenderContext();this._renderPage(b,0);b.renderInto(c);Util.show(c);this._pageHeight=c.firstChild.offsetHeight;this._pageWidth=c.firstChild.offsetWidth;
Util.hide(c);c.innerHTML=""}this._itemHeight=this._pageHeight/Math.min(this._pageSize,this._itemCount);this._fetchPagesInOrder||(this._containerHeight=this._itemCount*this._itemHeight)}}});var a})();function RCMObjMultiSelectModel(a){this._super([]);this.init(a)}
juic.extend(RCMObjMultiSelectModel,RCMDynamicMultiSelectModel,{init:function(a){this._goFieldId=a.goFieldId;this._internalSite=a.isGenericObj;this._goObjSingleSelectDisplayVal=a.goObjSingleSelectDisplayVal;this._ajaxController=AjaxService.getMBeanInstance(a.dataSource);this._contextualSearchFieldMap=a.contextualSearchFieldMap;this._fieldsMeta=a.fieldsMeta;this._effectiveStartDate=a.effectiveStartDate;this._totalNumberOfRecords=0;this._showExternalCode=a.showExternalCode;this.setPreSelectedValues(a.selectedValue);
this.selectAllEnabled(a.allValueSelected);this._internalIdLabel=a.internalIdLabel;this._returnObject=a.returnObject;this._hasPrimary=a.hasPrimary;this.setPrimaryInfo(null,a.primaryValue);this._isFoundationObject=a.isFoundationObject;this._isGenericObj=a.isGenericObj;this._isPicklistMultiselect=a.isPicklistMultiSelect?!0:!1;this._ISO8601Dateformatter=new DateFormat(ComponentConsts.ISO8601DATEFORMAT);this._COMMONDateFormat=new DateFormat(MSGS.COMMON_DateFormat);this._displaySelectedValues=a.displaySelectedValues;
this._fieldCriteriaMgr=a.fieldCriteriaMgr;this._selectionChanged=!1;this._isEditableBasedOnFCConfig=a.isEditableBasedOnFCConfig;if(void 0==this._isEditableBasedOnFCConfig||null==this._isEditableBasedOnFCConfig)this._isEditableBasedOnFCConfig=!0;this._fieldLabel=a.customHelpIconConfig&&a.customHelpIconConfig.fieldLabel},getGoFieldId:function(){return this._goFieldId},setGoFieldId:function(a){this._goFieldId=a},setEffectiveStartDate:function(a){this._effectiveStartDate=a;this._contextualSearchFieldMap&&
void 0!=this._fieldsMeta&&void 0!=this._fieldsMeta.searchOptions&&(this._contextualSearchFieldMap=this._getContextualFieldMap(this._fieldsMeta.searchOptions))},setSelectionChanged:function(a){this._selectionChanged=a},isSelectionChanged:function(){return this._selectionChanged},_getFieldByFieldId:function(a){return this._fieldCriteriaMgr.getFieldByFieldId(a)},getSelectedDisplayValueInfo:function(){var a={primaryValue:"",otherValues:[],allSelectedValue:[]},c=this.getPrimaryInfo(),b=c&&c.primaryDisplayText?
c.primaryDisplayText:"",c=this.getSelectedDisplayValues();b&&(a.primaryValue=juic.escapeHTML(b)+" ("+MSGS.RCM_MULTISELECT_PRIMARY_VALUE+")",a.allSelectedValue.push(b));if(c)for(var d in c)b=juic.escapeHTML(c[d]),a.otherValues.push(b),a.allSelectedValue.push(b);return a},getAllObjSelectedValues:function(){var a=[];if(null==this._selectedDisplayValues||0==this._selectedDisplayValues.length)a=this.getPreSelectedValues();else{var c=this.getPrimaryInfo().getValue();a.push(c);for(var b in this._selectedDisplayValues)a.push(b)}return a},
getObjSelectedValue:function(){var a={};a.fullySelected=this.isAllSelected();!this._isPicklistMultiselect&&this.isAllSelected()||this._allSelectedDisplayValues&&this._allSelectedDisplayValues.data&&this._allSelectedDisplayValues.data.payload&&this.isAllSelected()||!this.isAllSelected()&&this.isSelectAllDataEnabled?a.selectedValues=this._isPicklistMultiselect?this._allSelectedDisplayValues.data.payload:[]:a.selectedValues=this.getSelectedItemValues().concat(this.getPreSelectedValues());a.removedValues=
[];this._defaultSelectNewItems&&!this.isAllSelected()&&(a.removedValues=this.getUnselectedItemValues());a.primaryValue=[];this._hasPrimary&&(a.primaryValue=this.getPrimaryInfo().value);a.totalCount=this.getTotalNumberOfRecords();this._contextualSearchFieldMap||void 0==this._fieldsMeta||void 0==this._fieldsMeta.searchOptions||(this._contextualSearchFieldMap=this._getContextualFieldMap(this._fieldsMeta.searchOptions));this._contextualSearchFieldMap&&(a.contextualSearchFieldMap=this._contextualSearchFieldMap);
if(this._isPicklistMultiselect){var c={};if("[object Array]"==Object.prototype.toString.call(a.selectedValues))for(var b=0;b<a.selectedValues.length;b++)c[a.selectedValues[b]]=!0;else if("[object Object]"==Object.prototype.toString.call(a.selectedValues))for(b in a.selectedValues)!this.isAllSelected()&&this.isSelectAllDataEnabled?-1==a.removedValues.indexOf(parseInt(b,10))&&(c[b]=!0):c[b]=!0;return c}return a},setLastPage:function(a){this._lastPage=a},getLastPage:function(){return this._lastPage},
getFormattedDate:function(a){return void 0!=a&&null!=a&&""!=a&&"NaN-aN-aN"!=a?this._COMMONDateFormat.parse(a):new Date},_getContextualFieldMap:function(a){var c={},b;void 0!=a.contextualSearchFields&&(b=a.contextualSearchFields);var d;if(b){a=b.length;for(var e=0;e<a;e++){var g=null;"#effectiveStartDate"==b[e].fieldId||"start-date"==b[e].fieldId?(d=b[e].fieldId,this._effectiveStartDate&&null!=this._effectiveStartDate&&"null"!=this._effectiveStartDate?(d=null,g=this._ISO8601Dateformatter.format(this.getFormattedDate(this._effectiveStartDate))):
g=""):d=this._getFieldByFieldId(b[e].valueKey)?this._getFieldByFieldId(b[e].valueKey):null;if(d&&d._readOnly)g=d._previousValue,""==d.getDisplayValueForObj()&&(g="-1");else if(d&&d.isGenericObject&&d.isGenericObject()){var f=this._getFieldByFieldId(b[e].valueKey);f&&f instanceof RCMObjMultiSelect?(d=d.getAllSelectedValues(),null!=d&&(g=d.join(","))):(f=f._objField)&&f instanceof ECTFieldWithCustomContext&&(g=f.getPrimaryField().getValue());g||(g="-1")}else d&&d._isFoundationObj?(f=d._objField)&&f instanceof
ECTFoundationAutoComplete&&(g=f.getValue()||"-1"):d&&"function"===typeof d.isFoundationObject&&d.isFoundationObject()&&((f=this._getFieldByFieldId(b[e].valueKey))&&f instanceof RCMObjMultiSelect&&(d=d.getAllSelectedValues(),null!=d&&(g=d.join(","))),g||(g="-1"));c[b[e].fieldId]=null===g?"-1":g}}return c},fetchItems:function(a){juic.Logger.getLogger("RCMObjmultiselectModel").info(" fetching "+a.pageIndex);void 0!=this._fieldsMeta&&void 0!=this._fieldsMeta.searchOptions&&(this._contextualSearchFieldMap=
this._getContextualFieldMap(this._fieldsMeta.searchOptions));var c={applyTC:this._internalSite,pageNumber:a.pageNumber,pageSize:a.pageSize,searchText:null,searchType:this.getGoFieldId(),contextualSearchFields:this._contextualSearchFieldMap},b=this;this._isPicklistMultiselect?this._ajaxController.getPicklistByPage(this._parentOptionId,this._fieldsMeta.picklistId,a,null,!0,null,function(c){if(c){var d=b.getObjItems(b.constructPicklistData(c.picklistOptions));b.addItems(d,a.pageIndex*a.pageSize);b.setTotalNumberOfRecords(c.totalCount);
b.dispatch("itemsAvailable",{items:d,pagination:a,itemCount:c.totalCount})}}):this._ajaxController.search(c,function(c){if(c){var d=b.getObjItems(c.results);b.addItems(d,a.pageIndex*a.pageSize);b.setTotalNumberOfRecords(c.totalNumberOfRecords);b.dispatch("itemsAvailable",{items:d,pagination:a,itemCount:c.totalNumberOfRecords})}})},constructPicklistData:function(a){for(var c=[],b=0;b<a.length;b++)a[b].value&&c.push({id:a[b].value,name:a[b].label,primaryDisplayText:a[b].label});return c},getObjItems:function(a){for(var c=
[],b=0;b<a.length;b++)c.push(new RcmMultiSelectObjItem(a[b]));return c},getTextOfOnlySelecteditem:function(){var a="";this.getItems()&&0<this.getItems().length&&this.getSelectedItems()&&this.getSelectedItems()[0]?(a=this.getSelectedItems()[0],a=this._showExternalCode?a.getPrimaryDisplayText():a.getText()):this._goObjSingleSelectDisplayVal?a=this._goObjSingleSelectDisplayVal:this.getItems()&&0==this.getItems().length&&""!=this._internalIdLabel?a=this._internalIdLabel:1==this.getPreSelectedValues().length&&
(this._hasPrimary&&this.getPreSelectedValues()[0]==this.getPrimaryInfo().value?a=this.getPrimaryInfo().primaryDisplayText:this._displaySelectedValues&&this._selectedDisplayValues&&void 0!=this._selectedDisplayValues[this.getPreSelectedValues()[0]]&&(a=this._selectedDisplayValues[this.getPreSelectedValues()[0]]));return a},addItems:function(a,c){for(var b=0;b<a.length;b++)this.addItem(a[b],c+b)},fetchObjects:function(){this._rcmJobReqObjectTypeController=AjaxService.getMBeanInstance(this._isPicklistMultiselect?
"picklistController":"rcmJobReqObjectTypeController");var a={model:this,callback:function(c){if(a.model._isPicklistMultiselect){c=JSON.parse(c);for(var b=0;b<c.length;b++)for(var d in c[b])a.model.pickListIdLabels.payload[d]=c[b][d];c=a.model.pickListIdLabels}a.model.dispatch("itemListReady",{data:c})}};this._isPicklistMultiselect?(a.model.pickListIdLabels={payload:{}},this._rcmJobReqObjectTypeController.getLabelsByPickListOptionIds(this._fieldsMeta.picklistId,this._preSelectedValues,a)):this._rcmJobReqObjectTypeController.getFOGOObjectList(this.getPreSelectedValues(),
this._ISO8601Dateformatter.format(this.getFormattedDate(this._effectiveStartDate)),!1,this._isFoundationObject,this._fieldsMeta.contextMeta?this._fieldsMeta.contextMeta.objectType:this._fieldsMeta.id,a)},fetchAllObjects:function(){if(null!=this._allSelectedDisplayValues)this.dispatch("selectAllItemListReady",{data:this._allSelectedDisplayValues.data});else{this._rcmJobReqObjectTypeController=AjaxService.getMBeanInstance(this._isPicklistMultiselect?"picklistController":"rcmJobReqObjectTypeController");
var a={model:this,callback:function(c){a.model.dispatch("selectAllItemListReady",{data:a.model._isPicklistMultiselect?a.model.counstructPiclistAllData(c.picklistObjects):c})}};this._isPicklistMultiselect?this._rcmJobReqObjectTypeController.getPickList(this._fieldsMeta.picklistId,a):this._rcmJobReqObjectTypeController.getAllFOGOObjectList(this._goFieldId,this._contextualSearchFieldMap,a)}},counstructPiclistAllData:function(a){for(var c={payload:{}},b=0;b<a.length;b++)a[b].value&&(c.payload[a[b].value]=
a[b].label);return c},isFieldEditableBasedOnFCConfig:function(){return this._isEditableBasedOnFCConfig},showAlert:function(){var a=sfMessageFormat.format(MSGS.RCM_FIELD_CRITERIA_ERROR_MESSAGE,this._fieldLabel);(new RCMDialog("error",a,MSGS.COMMON_ALERT,"action")).show()}});