function SFDefaultListModel(e){this._items=[],"undefined"!=typeof e&&this.setItems(e)}SFDefaultListModel.prototype=function(){return juic.set(new juic.EventTarget,{add:function(e){this._items.push(e);var t=0<this._items.length?this.size()-1:0;this.dispatch("intervalAdded",{index0:t,index1:t}),this.intervalAdded(t,t)},getlength:function(){return this._items.length},insertItemAt:function(e,t){e==this.size()?this.add(t):(juic.assert(this._items[e],"ERROR: Invalid index passed to insertItemAt. Index is out of range."),this._items.splice(e,0,t),this.dispatch("intervalAdded",{index0:e,index1:e}),this.intervalAdded(e,e))},clear:function(){var e=this._items.length-1;this._items.length=0,this.intervalRemoved(0,e),this.dispatch("intervalRemoved",{index0:0,index1:e})},indexOf:function(e){for(var t=this.size();t;){if(this.get(t-1)===e)return t-1;t--}return-1},copyInto:function(e){juic.assert(e.constructor==Array,"[SFDefaultListModel] Invalid object passed into copyInto. Must be an array."),e.concat(this._items)},get:function(e){return this._items[e]},getFirstItem:function(){return this.get(0)},getLastItem:function(){return this.get(this.size()-1)},size:function(){return this._items.length},isEmpty:function(){return 0==this.size()},remove:function(){this._items.pop();var e=this._items.length-1;this.intervalRemoved(e,e),this.dispatch("intervalRemoved",{index0:e,index1:e})},move:function(e,t,i){null==i&&(i=1);var n=this._items.splice(e,i);n.splice(0,0,t,0),this._items.splice.apply(this._items,n),this.intervalMoved(e,t,i),this.dispatch("intervalMoved",{beforeIndex:e,afterIndex:t,count:i})},forEach:function(e,t){this._items.forEach(e,t)},removeItemAt:function(e){juic.assert(this._items[e],"ERROR: Invalid index passed to removeItemAt. Index is out of range.");var t=this._items.splice(e,1);return this.intervalRemoved(e,e),this.dispatch("intervalRemoved",{index0:e,index1:e}),t},removeItem:function(e){var t=!1,n=this.indexOf(e);return 0<=n&&(t=!0,this.removeItemAt(n)),t},removeRange:function(e,t){juic.assert(this._items[e]&&this._items[t],"ERROR: Invalid indices passed to removeRange. Either fromIndex or toIndex is out of range.");var i=this._items.splice(e,t-e+1);return this.dispatch("intervalRemoved",{index0:e,index1:t}),this.intervalRemoved(e,t),i},set:function(e,t){this._items[e]=t,this.dispatch("contentsChanged",{index0:e,index1:e})},setItems:function(e){if(0<this._items.length&&this.clear(),this._items=e.constructor==Array?e:[],e.constructor==Array)this._items=e;else for(var t in e)this._items.push(t);this.dispatch("intervalAdded",{index0:0,index1:this.size()-1}),this.intervalAdded(0,this.size()-1)},getItems:function(){return this._items},intervalRemoved:function(){},intervalAdded:function(){},intervalMoved:function(){}})}();function SFDefaultSingleSelectModel(e){juic.assert(e,"[SFDefaultSingleSelectModel] No items were passed"),SFDefaultListModel.call(this,e),0<this.size()&&(this._selectedIndex=0)}SFDefaultSingleSelectModel.prototype=function(){return juic.set(new SFDefaultListModel,{setSelectedIndex:function(e){this._selectedIndex=e,this.dispatch("contentsChanged",{index0:-1,index1:-1})},getSelectedIndex:function(){return this._selectedIndex},resetSelectedIndex:function(){this._selectedIndex=0,this.dispatch("resetSelection")},intervalAdded:function(e,t){this._selectedIndex>=e&&(this._selectedIndex+=t-e+1,this._selectedIndex>=this.size()&&(this._selectedIndex=this.size()-1))},intervalRemoved:function(e,t){this._selectedIndex>=e&&(this._selectedIndex<=t?this._selectedIndex=0:this._selectedIndex-=t-e+1,this.dispatch("contentsChanged",{index0:-1,index1:-1}))},intervalMoved:function(e,t,i){this._selectedIndex>=e&&this._selectedIndex<e+i?this._selectedIndex=t+this._selectedIndex-e:(this._selectedIndex>e&&(this._selectedIndex-=i),this._selectedIndex>=t&&(this._selectedIndex+=i))}})}();function SFDefaultMultiSelectModel(e){juic.assert(e,"[SFDefaultSingleSelectModel] No items were passed"),this._selectedIndices=[],SFDefaultListModel.call(this,e)}SFDefaultMultiSelectModel.prototype=function(){var e=Math.min,t=Math.max;return juic.set(new SFDefaultListModel,{addSelectedIndex:function(e){juic.assert(0<=e&&e<this.size(),"[SFDefaultMultiSelectModel] Invalid index: "+e),this._selectedIndices.contains(e)||this._selectedIndices.push(e),this.dispatch("selectionChanged")},isAllSelected:function(){return this._selectedIndices.length==this.size()},deselectAll:function(){0<this._selectedIndices.length&&(this._selectedIndices.length=0,this.dispatch("selectionChanged"))},selectAll:function(){this._selectedIndices.length=0;for(var e=0,t=this.size();e<t;e++)this._selectedIndices.push(e);this.dispatch("selectionChanged")},removeSelectedIndex:function(e){for(var t=0,i=this._selectedIndices.length;t<i;t++)if(this._selectedIndices[t]===e){this._selectedIndices.splice(t,1),this.dispatch("selectionChanged");break}},setSelectedIndices:function(e){if(this._selectedIndices.length=0,e&&0<e.length)for(var t=0,i=e.length;t<i;t++)juic.assert(0<=e[t]&&e[t]<this.size(),"[SFDefaultMultiSelectModel] Invalid index: "+e[t]+" max "+(this.size()-1)),this._selectedIndices.push(e[t]);this.dispatch("selectionChanged")},isIndexSelected:function(e){return this._selectedIndices.contains(e)},getSelectedCount:function(){return this._selectedIndices.length},getSelectedIndices:function(){return this._selectedIndices.concat()},intervalAdded:function(e,t){this._lastToggled=null;for(var i=0,n=this._selectedIndices.length;i<n;i++)this._selectedIndices[i]>=e&&(this._selectedIndices[i]+=t-e+1)},intervalMoved:function(e,t,i){this._lastToggled=null;for(var n=0;n<this._selectedIndices.length;){var s=before=this._selectedIndices[n];s>=e&&s<e+i?s=t+s-e:(s>e&&(s-=i),s>=t&&(s+=i)),s!=before&&(this._selectedIndices[n]=s),n++}},intervalRemoved:function(e,t){this._lastToggled=null;for(var i=0,n=!1;i<this._selectedIndices.length;)this._selectedIndices[i]>=e&&(this._selectedIndices[i]<=t?(n=!0,this._selectedIndices.splice(i,1),i--):this._selectedIndices[i]-=t-e+1),i++;n&&this.dispatch("selectionChanged")},toggleSelection:function(i,n,s){this._lastToggled||1!=this._selectedIndices.length||(this._lastToggled=this._selectedIndices[0]),n||(this._selectedIndices=[]);if(s&&null!=this._lastToggled)for(var o=t(this._lastToggled,i),a=e(this._lastToggled,i);a<=o;a++)this._selectedIndices.contains(a)||this._selectedIndices.push(a);else this._selectedIndices.contains(i)?this._selectedIndices.remove(i):this._selectedIndices.push(i);s||(this._lastToggled=i),this.dispatch("selectionChanged")}})}();function SFFactoryListModel(e){e=juic.Config.convertArguments(arguments,["model","factory","context"],null,{model:SFDefaultListModel,factory:"function"}),this._factory=e.factory,this._context=e.context,this.setModel(e.model)}function SFFactorySingleSelectModel(e){e=juic.Config.convertArguments(arguments,["model","factory","context"],null,{model:SFDefaultSingleSelectModel,factory:"function"}),SFFactoryListModel.call(this,e),0<this.size()&&(this._selectedIndex=e.model.getSelectedIndex())}function SFFactoryMultiSelectModel(e){e=juic.Config.convertArguments(arguments,["model","factory","context"],null,{model:SFDefaultMultiSelectModel,factory:"function"}),SFFactoryListModel.call(this,e),this._selectedIndices=e.model.getSelectedIndices().concat()}(function(){function e(e,t){t.forEach(function(t){e[t]=function(){return this._model[t].apply(this._model,arguments)}})}function t(e,t){for(var n in t)(function(n){e[n]=function(){return t[n].apply(this,arguments),i[n].apply(this,arguments)}})(n)}var i={setModel:function(e){this._model&&(this._model.removeEventListener("contentsChanged",this),this._model.removeEventListener("intervalAdded",this),this._model.removeEventListener("intervalRemoved",this),this._model.removeEventListener("intervalMoved",this),0<this.size()&&this.dispatch("intervalRemoved",{index0:0,index1:this.size()})),this._model=e,this._model.addEventListener("contentsChanged",this,"_onContentsChanged"),this._model.addEventListener("intervalAdded",this,"_onIntervalAdded"),this._model.addEventListener("intervalRemoved",this,"_onIntervalRemoved"),this._model.addEventListener("intervalMoved",this,"_onIntervalMoved"),this._items=[],this._items.length=e.size()},get:function(e){var t=this._super(e);return null==t&&(t=this._createItem(e),this._items[e]=t),t},getItems:function(){return this._resolve(),this._super()},forEach:function(e,t){this._resolve(),this._super(e,t)},_resolve:function(){for(var e=0;e<this.size();e++)this.get(e)},_createItem:function(e){var t=this._model.get(e);switch(typeof this._factory){case"object":if("function"==typeof this._factory.create)return this._factory.create(t,this._model,e);break;case"function":return this._factory.call(this._context,t,this._model,e);}return t},_onContentsChanged:function(e){if(0<=e.index0)for(var t=e.index0;t<=e.index1;t++)this._items[t]=null;this.dispatch("contentsChanged",{index0:e.index0,index1:e.index1})},_onIntervalAdded:function(e){if(!e.moving){for(var t=[e.index0,0],i=e.index1-e.index0+1,n=0;n<i;n++)t.push(null);this._items.splice.apply(this._items,t)}this.dispatch("intervalAdded",{index0:e.index0,index1:e.index1})},_onIntervalRemoved:function(e){e.moving||this._items.splice(e.index0,e.index1-e.index0+1),this.dispatch("intervalRemoved",{index0:e.index0,index1:e.index1})},_onIntervalMoved:function(e){var t=e.beforeIndex,i=e.afterIndex,n=e.count,s=this._items.splice(t,n);s.splice(0,0,i,0),this._items.splice.apply(this._items,s),this.dispatch("intervalMoved",{beforeIndex:e.beforeIndex,afterIndex:e.afterIndex,count:e.count})}};(function(e,t){t.forEach(function(t){e[t]=function(){throw new Error("SFFactoryListModel: Do not call "+t+" on the factory, please call this on the underlying list model and it will be reflected")}})})(i,["add","insertItemAt","copyInto","set","setItems"]),e(i,["remove","removeItemAt","removeRange","move"]);var n=juic.set({},i);e(n,["setSelectedIndex"]);var s=juic.set({_onSelectionChanged:function(e){this._selectedIndices=this._model.getSelectedIndices(),this.dispatchEvent(e)}},i);t(s,{setModel:function(e){this._model&&this._model.removeEventListener("selectionChanged"),e&&e.addEventListener("selectionChanged",this,"_onSelectionChanged")}}),e(s,["addSelectedIndex","deselectAll","selectAll","removeSelectedIndex","setSelectedIndices"]);var o={},a={};["_onContentsChanged","_onIntervalAdded","_onIntervalMoved","_onIntervalRemoved"].forEach(function(e){o[e]=function(){this._selectedIndex=this._model.getSelectedIndex()},a[e]=function(){this._selectedIndices=this._model.getSelectedIndices()}}),t(n,o),t(s,a),juic.extend(SFFactoryListModel,SFDefaultListModel,i),juic.extend(SFFactorySingleSelectModel,SFDefaultSingleSelectModel,n),juic.extend(SFFactoryMultiSelectModel,SFDefaultMultiSelectModel,s)})();function SFAbstractResizable(){juic.assert(!1,"[SFAbstractResizable] Cannot instantiate")}juic.extend(SFAbstractResizable,juic.Component,{setDimension:function(){juic.assert(!1,"[SFAbstractResizable] Must implement setDimension")},getDimension:function(){juic.assert(!1,"[SFAbstractResizable] Must implement getDimension")},resize:function(){},getMinDimension:function(){return{width:0,height:0}},getMaxDimension:function(){return null}});function SFResizer(){this.register(),this._referenceContainers=[],this._sizingContainers=[],this._subContainers=[],this._centerContainers=[],this._referenceHeight=0,this.init()}SFResizer.prototype=function(){var e=Math.floor;return juic.set(new juic.Component,{init:function(){SFDOMEvent.addListener(window,"resize",function(){return this.resize(),!1},this)},registerReferenceContainer:function(e){this._referenceContainers.push(e)},registerSizingContainers:function(e){this._sizingContainers.push(e)},registerSubContainer:function(e){this._subContainers.push(e)},registerCenterContainer:function(e){this._centerContainers.push(e)},getReferenceHeight:function(){for(var e=0,t=0,n=this._referenceContainers.length;t<n;++t)e+=parseInt(juic.$(this._referenceContainers[t]).offsetHeight);return e},centerOnResize:function(){for(var e=0,t=this._centerContainers.length,n;e<t;++e)if(n=juic.$(this._centerContainers[e]),n){var s=n.offsetWidth,o=SFDom.getViewportWidth(),a=0<o-s?o-s:0;n.style.left=Util.browserInfo.ie?parseInt(a/2)+"px":parseInt(a/2)+1+"px"}},resize:function(){var t=window.SFDom;if(t){var n=this.getReferenceHeight(),s=t.getViewportHeight(),o=s-n+0;if(0<o){for(var a=0,l=this._sizingContainers.length;a<l;++a)juic.$(this._sizingContainers[a])&&(juic.$(this._sizingContainers[a]).style.height=o+"px");for(var a=0,l=this._subContainers.length;a<l;++a)juic.$(this._subContainers[a])&&(juic.$(this._subContainers[a]).style.height=o+"px")}this.centerOnResize();this.dispatch("resizeEvt",{containerHeight:e(o-0)})}}})}();function SFScrollBar(e){this.register(),this._init(e)}(function(){var e=Math.max;function t(e){return e=e||{},{autoScroller:e.autoScroller,axisType:e.axisType,minimumScroll:e.minimumScroll||10,enabled:null==e.enabled||e.enabled,css:e.css}}extend(SFScrollBar,Component,{_init:function(e){e=t(e),this._autoScroller=e.autoScroller,this._autoScroller.addEventListener("autoScroll",this,"adjustDOM"),this._axisType=e.axisType,this._axis=i[this._axisType],this._css=e.css,this._minimumScroll=e.minimumScroll,assert(this._axis,"SFScrollBar: Invalid axisType: "+this._axisType),assert(this._autoScroller instanceof SFAutoScroller,"SFScrollBar: Invalid auto scroller"),this._enabled=e.enabled},renderHtml:function(e){var t=this._axisType+"scrollBar"+" "+"scrollBar"+(this._css?" "+this._css:"");e.push("<div id=\"",this.id,"\" class=\"",t," globalRoundedCorners\" onmousedown=\"",this.fireCode("_pageScroll"),"\""),e.push("\" ontouchstart=\"",this.fireCode("_onDragStart"),"\">"),e.push("<div id=\"",this.id,"handle\" onmousedown=\"",this.fireCode("_onDragStart"),"\" class=\"","scrollHandle globalRoundedCorners","\"></div></div>"),e.addAfterRenderListener(this,"adjustDOM")},adjustDOM:function(){var t=juic.$(this.id);if(t){var i=t[this._axis.offsetDimension];i-=SFDom.getOffsets(t,this._axisType);var n=this._autoScroller.getScrollInfo()[this._axisType],s=this._enabled&&n.size-n.scrollArea>this._minimumScroll,o=e(10,i*n.scrollArea/n.size),a=n.size-n.scrollArea,l=i-o;if(this._ratio=a/l,s){t.style.display="block";var r=juic.$(this.id+"handle"),d=n.position/this._ratio;r.style[this._axis.startRegion]=d+"px",r.style[this._axis.dimension]=o+"px"}else t.style.display="none"}},getOffset:function(){return 17},handleDragEvent:function(e){var t=this._autoScroller.getScrollInfo();switch(e.type){case"dragStart":this._positionStart=t[this._axisType].position;break;case"drag":var i=e.point[this._axisType]-e.origin[this._axisType],n=this._positionStart+i*this._ratio,s="x"==this._axisType?n:t.x.position,o="y"==this._axisType?n:t.y.position;this._autoScroller.setScrollPosition(s,o);break;case"dragEnd":this._autoScroller.stopScrolling();}this.dispatch("action",{actionCommand:e.type})},setEnabled:function(e){this._enabled=e,this.adjustDOM()},_onKeyUp:function(){this._autoScroller.stopScrolling()},_onKeyDown:function(e){var t=SFDOMEvent.getKeyName(e||window.event);t==this._axis.descendKeyName&&(this._autoScroller.autoScrollAxis(-1,this._axisType),SFDOMEvent.preventDefault(e)),t==this._axis.ascendKeyName&&(this._autoScroller.autoScrollAxis(1,this._axisType),SFDOMEvent.preventDefault(e))},_onDragStart:function(e){SFDOMEvent.stopEvent(e),SFDragDropMgr.handleDragStart(e,this,{useShim:!0,shimCursor:this._axis.cursor,clickTimeThreshold:0})},_pageScroll:function(e){var t=juic.$(this.id);if(t){var i=this._axisType,n=this._autoScroller.getScrollInfo()[i],s=this._enabled&&n.size-n.scrollArea>this._minimumScroll;if(s){var o=Util.getAbsPos(t),a=n.position/this._ratio,l=SFDOMEvent.getXY(e)["x"==i?0:1],r=l-o[i],d=r<a?-1:1,c=n.scrollArea*d,p="x"==i?c:0,_="y"==i?c:0;this._autoScroller.scrollMove(p,_)}}},cleanup:function(){this._autoScroller.removeEventListener("autoScroll",this)}});var i={x:{opposite:"y",offsetDimension:"offsetWidth",dimension:"width",scrollOffset:"clientWidth",scrollSize:"scrollWidth",scrollPosition:"scrollLeft",descendKeyName:"ARROWLEFT",ascendKeyName:"ARROWRIGHT",getPoint:"getX",getPagePoint:"getPageX",cursor:"col-resize",startRegion:"left"},y:{opposite:"x",dimension:"height",offsetDimension:"offsetHeight",scrollOffset:"clientHeight",scrollSize:"scrollHeight",scrollPosition:"scrollTop",descendKeyName:"ARROWUP",ascendKeyName:"ARROWDOWN",getPoint:"getY",getPagePoint:"getPageY",cursor:"row-resize",startRegion:"top"}}})();function SFAutoScroller(e){this._init(e)}SFAutoScroller.prototype=function(){var e=Math.abs,t=Math.floor,i=Math.min,n=Math.max;function s(e,t,i){return null!=t&&e<t?t:null!=i&&e>i?i:e}function o(e,t,s){var o=g[s],a=i(0,t[o.startRegionType]-e[o.startRegionType]),l=n(0,t[o.endRegionType]-e[o.endRegionType]);return l+a}function a(t,s,o){var a=g[t],l=null,d,c;if(r(s)?(l=SFDom.getViewportRegion(),d=SFDom[a.documentDimension](),c=l[a.dimensionType]):(l=SFDom.getRegion(s),d=s[a.scrollDimensionType],c=s[a.clientDimensionType]),d>c){var p=o[a.offsetDimensionType]-c||17,_=l[a.startRegionType],u=l[a.endRegionType]-p,h=o[a.startRegionType],m=o[a.endRegionType];if(_>h||u<m){var x=i(e(_-h),e(_-m)),y=i(e(u-h),e(u-m)),v=SFDom.getScrollPosition(s,t);v=x<y?n(0,h-_+v):n(0,m-u+v),SFDom.setScrollPosition(s,v,t)}}}function l(e){var t;return t=r(e)?SFDom.getViewportRegion():SFDom.getRegion(e),t}function r(e){return e==document.body||e==document.documentElement}var d=Util.browserInfo.ie||Util.browserInfo.ff,c=Util.browserInfo.ie,p={tickSize:20,interval:200,increaseTickSize:!1},_={tickSize:"number",interval:"number"},g={x:{scrollPositionType:"scrollLeft",dimensionType:"width",startRegionType:"left",endRegionType:"right",offsetDimensionType:"offsetWidth",clientDimensionType:"clientWidth",scrollDimensionType:"scrollWidth",documentScrollType:"getDocumentScrollLeft",documentDimension:"getDocumentWidth"},y:{scrollPositionType:"scrollTop",dimensionType:"height",startRegionType:"top",endRegionType:"bottom",offsetDimensionType:"offsetHeight",clientDimensionType:"clientHeight",scrollDimensionType:"scrollHeight",documentScrollType:"getDocumentScrollTop",documentDimension:"getDocumentHeight"}};return juic.set(new juic.EventTarget,{_init:function(e){e=new juic.Config(e,p,_),this._setScrollEL(e.scrollEl),this._extenderEl=e.extenderEl,this._interval=e.interval,this._tickSize=e.tickSize,this._increaseTickSize=e.increaseTickSize,this._axisData={x:{},y:{}}},autoScrollAxis:function(e,t,i){juic.assert(this._scrollEl,"Scroll DOM element not available");var n=l(this._scrollEl),s={};s[t]={delta:"number"==typeof e?e:o(n,e,t)},this._startScrolling(s,i)},autoScroll:function(e,t){juic.assert(this._scrollEl,"Scroll DOM element not available");var i=l(this._scrollEl),n={};for(var s in g)n[s]={delta:"number"==typeof e?e:o(i,e,s)};this._startScrolling(n,t)},scrollTo:function(e){var t=this.getScrollEl();if(t){var i=SFDom.getScrollPosition(t,"x"),n=SFDom.getScrollPosition(t,"y");a("x",t,e),a("y",t,e);var s=SFDom.getScrollPosition(t,"x")-i,o=SFDom.getScrollPosition(t,"y")-n;if(0!=s||0!=o)return this.dispatch("autoScroll",{delta:{x:s,y:o}}),!0}return!1},scrollToAxis:function(e,t){var i=this.getScrollEl();if(i){var n=g[e],s=SFDom.getScrollPosition(i,e);a(e,i,t);var o=SFDom.getScrollPosition(i,e)-s;if(0!=o){var l={};return l[e]=o,this.dispatch("autoScroll",{delta:l}),!0}}return!1},scrollMove:function(e,t){var i=this.getScrollEl();if(i){var n=SFDom.getScrollLeft(i),s=SFDom.getScrollTop(i);SFDom.setScrollLeft(i,n+e),SFDom.setScrollTop(i,s+t);var e=SFDom.getScrollLeft(i)-n,t=SFDom.getScrollTop(i)-s;if(0!=e||0!=t)return this.dispatch("autoScroll",{delta:{x:e,y:t}}),!0}return!1},setScrollPosition:function(e,t){var i=this.getScrollEl();if(i){var n=SFDom.getScrollPosition(i,"x"),s=SFDom.getScrollPosition(i,"y");SFDom.setScrollTop(i,t),SFDom.setScrollLeft(i,e);var o=SFDom.getScrollPosition(i,"x")-n,a=SFDom.getScrollPosition(i,"y")-s;if(0!=o||0!=a)return this.dispatch("autoScroll",{delta:{x:o,y:a}}),!0}return!1},stopScrolling:function(e){if(this.isScrolling()){var t=!e;e&&(this._axisData[e].multiplier=0,0==this._axisData["x"==e?"y":"x"].multiplier&&(t=!0)),t&&(clearInterval(this._intervalId),this._intervalId=null)}},getScrollPosition:function(e){var t=this.getScrollEl();if(t)return SFDom.getScrollPosition(t,e)},getScrollLeft:function(){return this.getScrollPosition("x")},getScrollTop:function(){return this.getScrollPosition("y")},getScrollInfo:function(){var e=this.getScrollEl(),t=null;return e&&(t=r(e)?{y:{size:SFDom.getDocumentHeight(),scrollArea:SFDom.getViewportHeight(),position:SFDom.getScrollPosition(e,"y"),inverse:!1},x:{size:SFDom.getDocumentWidth(),scrollArea:SFDom.getViewportWidth(),position:SFDom.getScrollPosition(e,"x"),inverse:Util.isRTL()}}:{y:{size:e.scrollHeight,scrollArea:e.clientHeight,position:SFDom.getScrollPosition(e,"y"),inverse:!1},x:{size:e.scrollWidth,scrollArea:e.clientWidth,position:SFDom.getScrollPosition(e,"x"),inverse:Util.isRTL()}},["x","y"].forEach(function(e){var i=t[e];i.oppositePosition=i.size-i.position-i.scrollArea})),t},getScrollEl:function(){return"string"==typeof this._scrollEl?juic.$(this._scrollEl):this._scrollEl},setScrollEl:function(e){this._setScrollEL(e)},getExtenderEl:function(){return"string"==typeof this._extenderEl?juic.$(this._extenderEl):this._extenderEl},setExtenderEl:function(e){this._extenderEl=e},isScrolling:function(){return null!=this._intervalId},_startScrolling:function(e,t){juic.assert(e,"axisData required to startScrolling"),this._autoIncreaseSize=t,juic.assert(!this._autoIncreaseSize||this._extenderEl,"Must have an extender to auto-increase size"),this._axisData=this._createAxisData(e),this.isScrolling()||0==this._axisData.x.multiplier&&0==this._axisData.y.multiplier||(this._intervalId=setInterval(Util.createCallback(this,"_autoScroll"),this._interval),this._autoScroll())},_autoScroll:function(){var e=this._autoScrollAxis("x"),t=this._autoScrollAxis("y");0==e&&0==t?this.stopScrolling():this.dispatch("autoScroll",{delta:{x:e,y:t}})},_autoScrollAxis:function(e){var t=0,i=this._axisData[e],n=i.multiplier;if(0!=n){var o=g[e],a=this.getScrollEl(),l=SFDom.getScrollPosition(a,e),r=n*this._tickSize,d=s(l+r,i.minPosition,i.maxPosition);r=d-l,0!=r&&(this._autoIncreaseSize&&d>i.clientMaxPosition&&this._increaseClientSize(e,d),SFDom.setScrollPosition(a,d,e),t=SFDom.getScrollPosition(a,e)-l)}return t},_createAxisData:function(i){var n={};for(var s in g){var o=g[s],a=juic.set({},i[s]);if(a.delta){if(a.multiplier=0>a.delta?-1:1,this._increaseTickSize){var l=t(e(a.delta)/25);0<l&&(a.multiplier*=l)}var r=this.getScrollEl(),d=r[o.scrollDimensionType],c=r[o.clientDimensionType],p=d-c,_=a.minPosition||0,u=a.maxPosition;u>p&&!this._autoIncreaseSize&&(u=p),a.clientMaxPosition=p,a.minPosition=_,a.maxPosition=u}else a.multiplier=0;n[s]=a}return n},_increaseClientSize:function(e,t){var i=this._axisData[e],s=g[e],o=t-i.clientMaxPosition,a=this.getExtenderEl(),l=a.firstChild[s.clientDimensionType],r=a[s.clientDimensionType];r=n(l,r);var d=r+o;a.style[s.dimensionType]=d+"px",this.dispatch("clientSizeIncrease",{dimensionType:s.clientDimensionType,oldSize:r,newSize:d})},_setScrollEL:function(e){this._scrollEl=Util.isFiori3HeaderEnabled()&&r(e)?Util.getGlobalPlacemat():e}})}(),"undefined"==typeof SFDragDropMgr&&(window.SFDragDropMgr=function(){var e=Math.abs;function t(e){return e?(xy=SFDOMEvent.getXY(e||window.event),new SFPoint(xy[0],xy[1])):null}function i(e){return e?new SFPoint(e.pageX,e.pageY):null}function n(t,i,n){var s=n&&n.distanceThreshold||3;if(n&&n.axisType){if("x"==n.axisType)return e(t.x-i.x)>s;if("y"==n.axisType)return e(t.y-i.y)>s}else return e(t.x-i.x)>s||e(t.y-i.y)>s}function s(e){for(var t=[],i=0,n=e.length,s;i<n;i++)s=e[i],t.push({pageX:s.pageX,pageY:s.pageY});return t}function o(e){var t=e.type,i={type:t,pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY,target:SFDOMEvent.getTarget(e),relatedTarget:SFDOMEvent.getRelatedTarget(e)};return 0==t.indexOf("touch")&&(i.changedTouches=s(e.changedTouches),i.touches=s(e.touches)),0==t.indexOf("gesture")&&(i.scale=e.scale),i}function a(e,t){var n=e&&e.length;if(n)for(var s=i(t),o=0,a;o<n;o++)if(a=i(e[o]),s.equals(a))return o;return-1}function l(e,t,n){if(e&&0<e.length){for(var s=i(t),o=null,a=null,l=0,r=e.length;l<r;l++){if(e[l].point.equals(s))return l;if(n){var d=e[l].point.getDistance(s);(null==a||d<a)&&(a=d,o=l)}}if(n)return o}return-1}var r=1;return juic.set(new juic.EventTarget,{init:function(){this._dropTargets=[],this._dropTargetLookup={},this._overTargets=[]},handleMouseDown:function(e,t,i){this.handleDragStart(e,t,i)},handleDragStart:function(e,t,i){juic.assert(t&&t.handleDragEvent,"SFDragDropMgr: dragListener is required, and must have a handleDragEvent method"),this._activeDrag||(e=e||window.event,juic.assert(e,"SFDragDropMgr: The origin mouse event is required"),this._activeDrag={handler:t,options:i,startEvent:o(e),isTouch:0==e.type.indexOf("touch"),overThreshold:!1},this._activeDrag.isTouch&&this._updateTouches(e),(!i||!1!=i.refreshCache)&&this.refreshCache(i&&i.refreshDOM),i&&0===i.clickTimeThreshold?(this._activeDrag.overThreshold=!0,this._dragToCurrentPoint()):(this._activeDrag.overThreshold=!1,this._activeDrag.timeoutId=setTimeout(function(){SFDragDropMgr._handleTimeout()},i&&i.clickTimeThreshold||1000)),!this._activeDrag.isTouch&&SFDOMEvent.preventDefault(e),SFDOMEvent.addListener(document,"touchstart",this._onTouchStart,this),SFDOMEvent.addListener(document,"touchend",this._onTouchEnd,this),SFDOMEvent.addListener(document,"touchmove",this._onTouchMove,this),SFDOMEvent.addListener(document,"gesturestart",this._onGestureStart,this),SFDOMEvent.addListener(document,"gesturechange",this._onGestureChange,this),SFDOMEvent.addListener(document,"gestureend",this._onGestureEnd,this),SFDOMEvent.addListener(document,"mouseup",this._onMouseUp,this),SFDOMEvent.addListener(document,"mousemove",this._onMouseMove,this))},stop:function(){this._dragging?this._stopDrag():(this._clearTimeout(),this._activeDrag=null)},isDragging:function(){return this._dragging},makeDraggable:function(e,t){var i={options:t,id:e,handleDragEvent:function(e){switch(e.type){case"drag":var t=juic.$(this.id);t.style.left=this.originPosition.left-e.origin.x+e.point.x+"px",t.style.top=this.originPosition.top-e.origin.y+e.point.y+"px";}},onMouseDown:function(e){var i=juic.$(this.id);i&&(this.originXY=SFDom.getXY(this.id),this.originPosition={left:parseInt(SFDom.getStyle(i,"left")),top:parseInt(SFDom.getStyle(i,"top"))},SFDragDropMgr.handleMouseDown(e,this,t))}},n=t&&t.handleId||e;SFDOMEvent.addListener(juic.$(n),"mousedown",i.onMouseDown,i)},addDropTarget:function(e,t){var i={id:e,properties:t};this._dropTargets.push(i),this._dropTargetLookup[e]=i},getDropTarget:function(e){return this._dropTargetLookup[e]},getAllDropTargets:function(){return this._dropTargets},getDropTargets:function(e){var t;if(e){t=[];for(var i=0,n=e.length;i<n;i++)t.push(this.getDropTarget(e[i]))}return t},removeDropTarget:function(e){for(var t=0,i=this._dropTargets.length,n;t<i;t++)if(n=this._dropTargets[t],n.id==e){this._dropTargets.splice(t,1);break}delete this._dropTargetLookup[e]},refreshCache:function(e){for(var t=0,i=this._dropTargets.length,n;t<i;t++)n=this._dropTargets[t],delete n.region,e&&delete n.el;this._forceUpdate=!0},_checkCache:function(){this._forceUpdate&&(this._forceUpdate=!1,this._updateCache())},_updateCache:function(){for(var e=0,t=this._dropTargets.length,i;e<t;e++)i=this._dropTargets[e],i.el=i.el||juic.$(i.id),i.region=i.el?SFDom.getRegion(i.el):null},_clearTimeout:function(){return!!(this._activeDrag&&null!=this._activeDrag.timeoutId)&&(clearTimeout(this._activeDrag.timeoutId),this._activeDrag.timeoutId=null,!0)},_handleTimeout:function(){this._activeDrag.timeoutId=null,this._activeDrag.overThreshold=!0,this._dragToCurrentPoint()},_onMouseMove:function(e){this._activeDrag&&(SFDOMEvent.stopPropagation(e),Util.browserInfo.ie&&9>Util.ieVersion&&!e.button?this._stopDrag(e):this._moveDrag(e))},_onMouseUp:function(e){this._activeDrag&&(SFDOMEvent.stopPropagation(e),this._stopDrag(e))},_onTouchStart:function(e){this._activeDrag&&(this._activeDrag.options&&this._activeDrag.options.noMultiTouch&&1<e.touches.length?this._stopDrag(e):this._updateTouches(e))},_onTouchEnd:function(e){this._activeDrag&&(this._updateTouches(e),0==e.touches.length&&this._stopDrag(e))},_onTouchMove:function(e){if(this._activeDrag){var t=!0;this._activeDrag.options&&this._activeDrag.options.allowTouchMove&&this._activeDrag.overThreshold&&(t=!1),t&&SFDOMEvent.preventDefault(e),this._updateTouches(e),this._moveDrag(e)}},_onGestureStart:function(e){this._activeDrag&&(this._activeDrag.options.noMultiTouch?this._stopDrag(e):(this._activeDrag.gestureEvent=o(e),this._onGestureChange(e),this._activeDrag.handler.handleDragEvent({type:"gestureStart"})))},_onGestureChange:function(e){this._activeDrag&&(SFDOMEvent.stopEvent(e),this._activeDrag.gestureEvent=o(e))},_onGestureEnd:function(e){this._activeDrag&&(SFDOMEvent.stopEvent(e),this._activeDrag.gestureEvent=null,this._activeDrag.handler.handleDragEvent({type:"gestureEnd"}))},_checkDragThreshold:function(e){if(this._activeDrag.overThreshold)return!0;if(this._activeDrag.isTouch){for(var i=0,s;i<this._activeDrag.touches.length;i++)if(s=this._activeDrag.touches[i],n(s.point,s.lastPoint,this._activeDrag.options))return!0;}else{var o=t(this._activeDrag.startEvent),a=t(e);return n(o,a,this._activeDrag.options)}return!1},_moveDrag:function(e){this._checkDragThreshold(e)&&(this._activeDrag.lastMoveEvent=this._activeDrag.moveEvent,this._activeDrag.moveEvent=o(e),this._activeDrag.overThreshold=!0,this._clearTimeout(),this._dragToCurrentPoint())},_dragToCurrentPoint:function(){if(this._checkCache(),!this._activeDrag)return!1;var e=this._activeDrag.options,i=this._activeDrag.handler,n=[],s=[],o=[],a={isTouch:this._activeDrag.isTouch,gestureEvent:this._activeDrag.gestureEvent,startEvent:this._activeDrag.startEvent,lastMoveEvent:this._activeDrag.lastMoveEvent,moveEvent:this._activeDrag.moveEvent,dropTargets:n};this._activeDrag.isTouch?(a.touches=this._activeDrag.touches,a.origin=this._activeDrag.touches[0].origin,a.lastPoint=this._activeDrag.touches[0].lastPoint,a.point=this._activeDrag.touches[0].point):(a.origin=t(this._activeDrag.startEvent),a.lastPoint=t(this._activeDrag.lastMoveEvent||this._activeDrag.startEvent),a.point=t(this._activeDrag.moveEvent||this._activeDrag.startEvent));for(var l=0,r=this._dropTargets.length,d;l<r;l++)if(d=this._dropTargets[l],d.region){var c=this._overTargets.contains(d.id),p=d.region.contains(a.point);p&&!c?(s.push(d),this._overTargets.push(d.id)):!p&&c&&(o.push(d),this._overTargets.remove(d.id)),p&&n.push(d)}if(this._dragging||(e&&e.useShim&&(this._showShim(),this._shim.style.cursor=e.shimCursor?e.shimCursor:""),i.handleDragEvent(juic.set({type:"dragStart"},a))),this._dragging=!0,i.handleDragEvent(juic.set({type:"drag"},a)),0<o.length){var d=o[0];i.handleDragEvent(juic.set({type:"dragOut",id:d.id,properties:d.properties,region:d.region},a))}if(0<s.length){var d=s[0];i.handleDragEvent(juic.set({type:"dragOver",id:d.id,properties:d.properties,region:d.region},a))}},_stopDrag:function(e){if(this._shimActive&&this._hideShim(),!this._clearTimeout()){var n=this.getDropTargets(this._overTargets),s=this._activeDrag.handler,a={type:"dragEnd",isTouch:this._activeDrag.isTouch,dropTargets:n,gestureEvent:this._activeDrag.gestureEvent,startEvent:this._activeDrag.startEvent,lastMoveEvent:this._activeDrag.moveEvent,endEvent:o(e)},l=this._activeDrag.moveEvent||this._activeDrag.startEvent;this._activeDrag.isTouch?(a.origin=i(this._activeDrag.startEvent.changedTouches[0]),l&&l.changedTouches&&0<l.changedTouches.length&&(a.lastPoint=i(l.changedTouches[0])),e&&e.changedTouches&&0<e.changedTouches.length&&(a.point=i(e.changedTouches[0]))):(a.origin=t(this._activeDrag.startEvent),a.lastPoint=t(l),e&&(a.point=t(e))),s.handleDragEvent(a),this.dispatch("dragDrop",{dragHandler:s,dropTargets:n})}SFDOMEvent.removeListener(document,"touchstart",this._onTouchStart),SFDOMEvent.removeListener(document,"touchend",this._onTouchEnd),SFDOMEvent.removeListener(document,"touchmove",this._onTouchMove),SFDOMEvent.removeListener(document,"gesturestart",this._onGestureStart),SFDOMEvent.removeListener(document,"gesturechange",this._onGestureChange),SFDOMEvent.removeListener(document,"gestureend",this._onGestureEnd),SFDOMEvent.removeListener(document,"mouseup",this._onMouseUp),SFDOMEvent.removeListener(document,"mousemove",this._onMouseMove),this._activeDrag=null,this._dragging=!1,this._overTargets=[]},_showShim:function(){this._shim||this._createShim(),this._shimActive=!0,this._sizeShim(),this._shim.style.display=""},_hideShim:function(){this._shim&&(this._shim.style.height="0px",this._shim.style.display="none")},_sizeShim:function(){if(this._shimActive){var e,t;if(Util.isFiori3HeaderEnabled()){var i=Util.getGlobalPlacemat();e=i?i.offsetHeight-r:0,t=i?i.offsetHeight-r:0}else e=SFDom.getDocumentHeight()-r,t=SFDom.getDocumentWidth()-r;this._shim.style.height=e+"px",this._shim.style.width=t+"px",this._shim.style.top="0",this._shim.style.left="0"}},_createShim:function(){this._shim||(this._shim=document.createElement("div"),document.body.firstChild?document.body.insertBefore(this._shim,document.body.firstChild):document.body.appendChild(this._shim),this._shim.style.display="none",this._shim.style.backgroundColor="transparent",this._shim.style.position="absolute",this._shim.style.zIndex="100001",this._shim.style.cursor="move",this._shim.unselectable="on",this._shim.onselectstart=function(){return!1},SFDOMEvent.addListener(this._shim,"touchstart",this._onTouchStart,this),SFDOMEvent.addListener(this._shim,"touchend",this._onTouchEnd,this),SFDOMEvent.addListener(this._shim,"touchmove",this._onTouchMove,this),SFDOMEvent.addListener(this._shim,"gesturestart",this._onGestureStart,this),SFDOMEvent.addListener(this._shim,"gesturechange",this._onGestureChange,this),SFDOMEvent.addListener(this._shim,"gestureend",this._onGestureEnd,this),SFDOMEvent.addListener(this._shim,"mouseup",this._onMouseUp,this),SFDOMEvent.addListener(this._shim,"mousemove",this._onMouseMove,this),SFDOMEvent.addListener(Util.isFiori3HeaderEnabled()?Util.getGlobalPlacemat():window,"scroll",this._sizeShim,this))},_createTouchInfo:function(e){var t=i(e);return{origin:t,lastPoint:t,point:t,startTouch:e,lastTouch:e}},_updateTouches:function(e){var t=e.touches,n=e.changedTouches;switch(this._activeDrag.touches||(this._activeDrag.touches=[],this._activeDrag.ordered=[]),e.type){case"touchstart":{this._activeDrag.ordered=[];for(var s=this._activeDrag.touches.concat(),o=0,r=t.length;o<r;o++){var d=t[o],c=a(n,d);if(0<=c){var p=this._createTouchInfo(d);this._activeDrag.touches.push(p),this._activeDrag.ordered[o]=p}else if(c=l(s,d,!0),0<=c){var p=s.splice(c,1)[0];this._activeDrag.ordered[o]=p}else{var p=this._createTouchInfo(d);this._activeDrag.touches.push(p),this._activeDrag.ordered[o]=p}}if(0<s.length)for(var o=0,r=s.length;o<r;o++)this._activeDrag.touches.splice(this._activeDrag.touches.indexOf(s[o]),1);break}case"touchend":for(var o=0,r=n.length;o<r;o++){var _=l(this._activeDrag.touches,n[o],!0),p=this._activeDrag.touches[_];this._activeDrag.touches.splice(_,1),this._activeDrag.ordered.remove(p)}break;case"touchmove":for(var o=0,r=n.length;o<r;o++){var d=n[o],g=a(t,d),p=this._activeDrag.ordered[g];p.lastPoint=p.point,p.point=i(d)}}}})}(),SFDragDropMgr.init());function SFContainer(e,t){this.register(),Array.isArray(e)||"object"!=typeof e||(t=e,e=null),t=new juic.Config(t,null,{printStyleClass:["string",null],styleClass:["string",null],innerClass:["string",null],outerTag:["div","span","ul","ol","table","tr","td",null],innerTag:["div","span","li","tr","td",null]}),t.outerTag||(t.outerTag=!1===t.outerBlock?"span":"div"),t.innerTag||("ul"==t.outerTag||"ol"==t.outerTag?t.innerTag="li":t.innerTag=!1===t.innerBlock?"span":"div"),this._outerRole=t.outerRole,this._innerRole=t.innerRole,this._outerTag=t.outerTag,this._innerTag=t.innerTag,this._styleClass=t.styleClass,this._printStyleClass=t.printStyleClass,this._innerClass=t.innerClass,this._ariaLabelledBy=t.ariaLabelledBy,this.setChildren(e),this._baseButtonWrapperOuterClass&&(this._styleClass+=" "+this._baseButtonWrapperOuterClass)}(function(){document.createElement("div");juic.extend(SFContainer,juic.Component,{renderHtml:function(e){var t=this.getOuterTag();e.push("<",t," id=\"",this.id,"\""),this._outerRole&&e.push(" role=\"",this._outerRole,"\""),this._ariaLabelledBy&&e.push(" aria-labelledby=\"",this._ariaLabelledBy,"\""),this._styleClass&&e.push(" class=\"",this._styleClass,"\""),e.push(">"),this._renderChildren(e),e.push("</",t,">")},renderPrintHtml:function(e){var t=this.getOuterTag();e.push("<",t," id=\"",this.id,"\""),this._printStyleClass&&e.push(" class=\"",this._printStyleClass,"\""),e.push(">"),this._renderPrintChildren(e),e.push("</",t,">")},get:function(e){return this._isValidIndex(e)&&this._children[e]},set:function(e,t,i){0<=e&&e<this._children.length;if(this._isValidIndex(e)){i&&this._children[e]instanceof juic.Component&&this._children[e].cleanup(),this._children[e]=t;var n=juic.$(this.id);if(n){var s=n.childNodes,o=this._createChildDOM(t);n.replaceChild(o,s[e]),this._updateChildDOM(o,t),this._isMenuItem()&&this._focusChild(e)}}},insert:function(e,t){if(this._isValidIndex(e,!0))if(t instanceof Array)for(var i=juic.$(this.id),n=0,s=t.length;n<s;n++)this.insert(e+n,t[n],i);else{var o=this.size();if(this._children.splice(e,0,t),i=arguments[2]||juic.$(this.id),i){var a=this._createChildDOM(t);e==o?i.appendChild(a):i.insertBefore(a,i.childNodes[e]),this._updateChildDOM(a,t),this._isMenuItem()&&this._focusChild(e+1)}}},add:function(e){this.append(e)},append:function(e){this.insert(this.size(),e)},removeAt:function(e,t){if(this._isValidIndex(e)){var i=this._children.splice(e,1)[0],n=juic.$(this.id);return n&&n.removeChild(n.childNodes[e]),t&&i instanceof juic.Component&&i.cleanup(),i}},remove:function(e,t){var i=this.indexOf(e);if(0<=i){var e=this._children.splice(i,1),n=juic.$(this.id);return n&&n.removeChild(n.childNodes[i]),t&&e instanceof juic.Component&&e.cleanup(),e}},reorder:function(e){for(var t=0,i;t<this._children.length;t++){if(i=this._children.indexOf(e[t],t),i==t)continue;else if(i<t)return!1;this.move(i,t)}return!0},move:function(e,t,i){if(i=i||1,this._isValidIndex(e)&&this._isValidIndex(t)&&this._isValidIndex(e+i-1)&&this._isValidIndex(t+i-1)&&e!=t){var n=this._children.splice(e,i);n.splice(0,0,t,0),this._children.splice.apply(this._children,n);var s=juic.$(this.id);if(s){n=[];for(var o=i-1;0<=o;o--)s.removeChild(n[o]=s.childNodes[e+o]);for(var a=t==s.childNodes.length?null:s.childNodes[t],o=0;o<i;o++)a?s.insertBefore(n[o],a):s.appendChild(n[o])}}},size:function(){return this._children.length},indexOf:function(e){for(var t=0,i=this.size();t<i;t++)if(this.get(t)===e)return t;return-1},getChildren:function(){return this._children.concat()},setChildren:function(e,t){this._children&&t&&this.broadcast("cleanup"),this._children=e||[],juic.assert(this._children instanceof Array,"SFContainer: You must provide an array for children");var i=juic.$(this.id);if(i){var n=juic.createRenderContext();this._renderChildren(n),n.renderInto(i)}},getStyleClass:function(){return this._styleClass},setStyleClass:function(e){this._styleClass=e;var t=juic.$(this.id);t&&(t.className=this._styleClass)},getInnerClass:function(){return this._innerClass},setInnerClass:function(e){this._innerClass=e;var t=juic.$(this.id);if(t)for(var i=t.childNodes,n=0,s=i.length;n<s;n++)i[n].className=e},cleanup:function(e){e&&this.broadcast("cleanup"),this._super()},broadcast:function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);"function"==typeof e&&t.splice(0,0,null,null);for(var i=0,n=this.size(),s;i<n;i++)switch(s=this.get(i),typeof e){case"string":s&&s[e]&&"function"==typeof s[e]&&s[e].apply(s,t);break;case"function":t[0]=s,t[1]=i,e.apply(this,t);}},getInnerTag:function(){return this._innerTag},getOuterTag:function(){return this._outerTag},_isValidIndex:function(e,t){var i=0<=e&&e<this.size()+(t?1:0);return juic.assert(i,"SFContainer: Invalid index "+e),i},_renderChildren:function(e){this._children.forEach(function(t,i){this._renderChild(e,t,i)},this)},_renderPrintChildren:function(e){this._children.forEach(function(t){this._renderPrintChild(e,t)},this)},_renderChild:function(e,t,i){var n=this.getInnerTag();e.push("<",n),this._innerRole&&(e.push(" role=\"",this._innerRole,"\""),this._isMenuItem()&&e.push(" onkeydown=\"",this.fireCode("_keydown"),"\"aria-posinset=\"",i+1,"\" aria-setsize=\"",this.size(),"\" tabindex=\"0\"")),this._innerClass&&e.push(" class=\"",this._innerClass,"\""),e.push(">"),this._renderInnerChild(e,t),e.push("</",n,">")},_keydown:function(e){var t=e.target.ariaPosInSet;if(t){var i=SFDOMEvent.getKeyName(e),n=this._children.length,s=(parseInt(t)||1)-1;switch(i){case"ARROWDOWN":this._focusChild((s+1)%n);break;case"ARROWUP":this._focusChild((n+s-1)%n);break;case"HOME":case"PAGE_UP":this._focusChild(0);break;case"END":case"PAGE_DOWN":this._focusChild(n-1);break;case"SPACEBAR":case"RETURN":if(e.target===juic.$(this.id).childNodes[s]){var o=this._children[s];o&&o.click&&o.click()}}}},_isMenuItem:function(e,t){return"menu"===(e?e.getAttribute("role"):this._outerRole)&&"menuitem"===(t?t.getAttribute("role"):this._innerRole)},_focusChild:function(e){var t=juic.$(this.id);if(t){var i=t.childNodes[e];if(i&&this._isMenuItem(t,i))return void SFDom.setFocus(i);var n=this._children[e];if(n&&n.focus)n.focus();else{n=t.childNodes[e];var s=SFDom.findNextFocusableElement(n,n,!0);s&&SFDom.setFocus(s)}}},_renderPrintChild:function(e,t){var i=this.getInnerTag();e.push("<",i),this._innerClass&&e.push(" class=\"",this._innerClass,"\""),e.push(">"),this._renderPrintInnerChild(e,t),e.push("</",i,">")},_renderInnerChild:function(e,t){t&&(t instanceof juic.Component?Array.isArray(e)?t.renderHtml(e):e.push(t):e.push(juic.escapeHTML(t.toString())))},_renderPrintInnerChild:function(e,t){t&&(t instanceof juic.Component?t.renderPrintHtml(e):e.push(juic.escapeHTML(t.toString())))},_createChildDOM:function(){var e=document.createElement(this.getInnerTag());return this._innerRole&&e.setAttribute("role",this._innerRole),this._innerClass&&(e.className=this._innerClass),this._isMenuItem()&&(e.tabIndex=0,e.setAttribute("onkeydown","juic.fire(\""+this.id+"\",\"_keydown\",event);")),e},_updateChildDOM:function(e,t){var i=juic.createRenderContext();if(this._isMenuItem()){var n=juic.$(this.id);if(n)for(var s=n.childNodes,o=0,a=s.length;o<a;o++)s[o].ariaPosInSet=o+1,s[o].ariaSetSize=this.size()}this._renderInnerChild(i,t),i.renderInto(e)}})})();function SFListContainer(e,t){"object"!=typeof e||Array.isArray(e)||e instanceof SFDefaultListModel||(t=e,e=[]),this._super(t),this.setModel(e)}juic.extend(SFListContainer,SFContainer,{setModel:function(e){if(this._model&&(this._model.removeEventListener("contentsChanged",this),this._model.removeEventListener("intervalAdded",this),this._model.removeEventListener("intervalRemoved",this),this._model.removeEventListener("intervalMoved",this),this._model.removeEventListener("selectionChanged",this),this.setChildren(null,!0)),e){var t=e;Array.isArray(e)&&(t=new SFDefaultListModel(t)),assert(t instanceof SFDefaultListModel,"SFListContainer: Invalid model"),this._model=t,this._model.addEventListener("contentsChanged",this,"_onContentsChanged"),this._model.addEventListener("intervalAdded",this,"_onIntervalAdded"),this._model.addEventListener("intervalRemoved",this,"_onIntervalRemoved"),this._model.addEventListener("intervalMoved",this,"_onIntervalMoved"),this._model.addEventListener("selectionChanged",this,"_onSelectionChanged");for(var i=0;i<this._model.size();i++)this.add(this._model.get(i));this._onSelectionChanged()}this._changeDimensions()},getModel:function(){return this._model},cleanup:function(){this.isRegistered()&&(this.setModel(null),this._super())},_onSelectionChanged:function(){if(this._model instanceof SFDefaultSingleSelectModel){var e=this._model.getSelectedIndex();if(0<this._model.size()){var t=0<=e&&this.get(e);t!==this._selectedComponent&&(this._selectedComponent&&this._setComponentSelected(this._selectedComponent,!1),this._isSelectable(t)?(this._setComponentSelected(t,!0),this._selectedComponent=t):this._selectedComponent=null)}}else if(this._model instanceof SFDefaultMultiSelectModel){var i=this._selectedComponents||[];this._selectedComponents=[],this._model.getSelectedIndices().forEach(function(e){var t=this.get(e);this._isSelectable(t)&&(this._selectedComponents.push(t),!i.contains(t)&&this._setComponentSelected(t,!0))},this),i&&i.forEach(function(e){this._selectedComponents.contains(e)||this._setComponentSelected(e,!1)},this)}},_setComponentSelected:function(e,t){e instanceof juic.Component&&e.isRegistered()&&e.setSelected(t)},_isSelectable:function(e){return e&&e instanceof juic.Component&&e.isRegistered()&&"function"==typeof e.setSelected&&e!==this._selectedItem},_onContentsChanged:function(e){if(0<=e.index0){for(var t=e.index0,i;t<=e.index1;t++)i=this._model.get(t),this.set(t,i,!0);this._changeDimensions()}this._onSelectionChanged()},_onIntervalAdded:function(e){for(var t=e.index0,i;t<=e.index1;t++)i=this._model.get(t),this.insert(t,i);this._changeDimensions()},_onIntervalRemoved:function(e){for(var t=e.index1;t>=e.index0;t--)this.removeAt(t,!0);this._changeDimensions()},_onIntervalMoved:function(e){this.move(e.beforeIndex,e.afterIndex,e.count),this._changeDimensions()},_changeDimensions:function(){juic.$(this.id)&&this.dispatch("changeDimensions")}});function SFAbstractOverlayMgr(){}juic.extend(SFAbstractOverlayMgr,juic.EventTarget,{show:function(){throw new Error("SFAbstractOverlayMgr: Must implement show")},css:function(){throw new Error("SFAbstractOverlayMgr: Must implement css")},animate:function(){throw new Error("SFAbstractOverlayMgr: Must implement animate")}});function SFDefaultOverlayMgr(){this._model=new SFDefaultListModel}(function(){function e(e){this.register(),this._model=e.model,this._context=e.context,this._useUI5Popups=e.useUI5Popups,this._handleFocusOutside=this._handleFocusOutside.bind(this),this._init(e.component,e.options)}function t(e){var t=jQuery.sap.getObject("sap.sf.juic.components.OverlayWrapper");return t||(t=sap.ui.core.Control.extend("sap.sf.juic.components.OverlayWrapper",{metadata:{properties:{overlay:"any"}},renderer:function(e,t){e.write("<div"),e.writeControlData(t),e.write(">");var i=t._h=juic.createRenderContext();t.getOverlay().renderHtml(i),e.write(i.join("")),e.write("</div>")},postRender:function(){this._h&&this._h.dispatch("afterRender")}})),new t({overlay:e})}var i={css:void 0,modal:!0,centered:void 0,cleanup:!1,iframeUnderlay:!1,viewport:!1,fullScreen:!1,dispatchEscKeyPress:!1,shadow:!1,autoClose:!1},n=["component","modal","position","alwaysInViewport","options"],s={modal:!0,position:null,fullScreen:!1,alwaysInViewport:!1,iframe:!1,autoClose:!1,options:{dispatchEscKeyPress:!1}},o={component:juic.Component,position:[{left:"number",top:"number"},null]},a=juic.Logger.getLogger("SFOverlayMgr"),l={},r={},d={},c=["UI5-STATIC-AREA-ITEM","UI5-STATIC-AREA-ITEM-XWEB-CALENDAR-WIDGET","UI5-RESPONSIVE-POPOVER-SF-QUICKCARD"];juic.extend(SFDefaultOverlayMgr,SFAbstractOverlayMgr,{_init:function(){if(this._useUI5Popups=Util.isUI5Available()&&!!(window.SFOverlayMgrSettings&&window.SFOverlayMgrSettings.useUI5Popups),this.allowedFocusNodeRef=null,!this._useUI5Popups){var e=new SFListContainer(this._model,{styleClass:"sfOverlayMgr"});div=document.createElement("div"),div.setAttribute("id","sfOverlayMgr"),AccessibilityPrefs.isLowVisionEnabled()&&(div.className="globalLowVisionSupport "+AccessibilityPrefs.getLowVisionType()),this.getContext().appendChild(div),e.render(div)}this.attach()},attach:function(){SFBodyEventDispatcher.addResizeListener(this,"_handleResize"),SFDOMEvent.addListener(this.getScrollElement(),"scroll",this._handleScroll,this)},detach:function(){SFBodyEventDispatcher.removeResizeListener(null,this),SFDOMEvent.removeListener(this.getScrollElement(),"scroll",this._handleScroll,this)},getContext:function(){return document.body},getScrollElement:function(){if(Util.isFiori3HeaderEnabled())return this._globalPlacematEL=Util.getGlobalPlacemat(),this._globalPlacematELScrollTop=this._globalPlacematEL.scrollTop,this._globalPlacematEL;var e=this.getContext();return e==document.body?window:e},show:function(e,t){t=new juic.Config(t,i);var n=!!(window.SFOverlayMgrSettings&&window.SFOverlayMgrSettings.iframeUnderlay);if(t.iframeUnderlay=n,(t.modal&&"undefined"==typeof t.centered||!t.css)&&(t.centered=!0),t.centered&&(t.viewport=!0),juic.assert(e instanceof juic.Component,"SFOverlayMgr: show requires a component"),juic.assert(e.isRegistered(),"SFOverlayMgr: component is not registered"),Util.loadFundamentalStyles(),!this.hasOverlay(e)){if(!this._preinit){var s=this;this._preinit=!0,SFDOMEvent.ready({priority:"HIGHEST",callback:function(){s._init()}})}var o=this._useUI5Popups||t.useUI5Popups,l=this._createOverlay({component:e,options:t,model:this._model,context:this.getContext(),useUI5Popups:o});return this._model.add(l),o&&l.openUI5Popup(),l.setIframe(),l}a.error("Attempted 2 overlays for the same component ",e)},getTopOverlay:function(){return this._model.get(this._model.size()-1)},isTopOverlay:function(e){return e&&this.getTopOverlay()===this.getOverlay(e)},_createOverlay:function(t){return new e(t)},getOverlay:function(e){return"string"==typeof e?r[e]:e&&r[e.id]},animate:function(e,t,i){var n=this.getOverlay(e);return n?n.animate(t,i):void juic.assert(!1,"SFOverlayMgr: Overlay not found for animate")},css:function(e,t){var i=this.getOverlay(e);i?i.css(t):juic.assert(!1,"SFOverlayMgr: Overlay not found for css")},setModal:function(e,t){var i=this.getOverlay(e);return i?i.setModal(t):void juic.assert(!1,"SFOverlayMgr: Overlay not found for setModal")},getOptions:function(e){var t=this.getOverlay(e);return t?t.getOptions():void juic.assert(!1,"SFOverlayMgr: Overlay not found for getOverlayOptions")},setOptions:function(e,t){var i=this.getOverlay(e);i?i.setOptions(t):juic.assert(!1,"SFOverlayMgr: Overlay not found for setOverlayOption")},getComponent:function(e){var t=d[e];if(t)return t.component},hasOverlay:function(e){return!!this.getOverlay(e)},getOverlayId:function(e){var t=this.getOverlay(e);return t&&t.getReferenceId()},getViewportHeight:function(){return SFDom.getViewportHeight()},getViewportWidth:function(){return SFDom.getViewportWidth()},getAttribute:function(e){return l[e]},setAttribute:function(e,t){l[e]=t},showOverlay:function(e,t,i){var a=juic.Config.convertArguments(arguments,n,s,o);juic.set(a,a.options||{});var i=a.position,l=a.modal||!i;this.show(a.component,{css:l?void 0:{left:i.left+"px",top:i.top+"px"},centered:l,viewport:l,modal:a.modal,dispatchEscKeyPress:a.dispatchEscKeyPress,useUI5Popups:a.useUI5Popups})},repositionComponent:function(e,t){var i=this.getComponent(e);i?this.css(i,{left:t.left+"px",top:t.top+"px"}):juic.assert(!1,"SFOverlayMgr: Invalid overlay id")},centerComponent:function(e){this.setOptions(e,{viewport:!0,centered:!0})},removeOverlay:function(e){var t=juic.Component._registry[e];t&&t.dispatch("hide")},changeIframeDims:function(e,t,i){var n=juic.Component._registry[i];n&&n.dispatch("changeDimensions")},addGlobalFocusableArea:function(e){window._globalFocusableArea?this._globalFocusableArea.push(e):this._globalFocusableArea=[e]},removeGlobalFocusableArea:function(e){this._globalFocusableArea&&(this._globalFocusableArea=this._globalFocusableArea.filter(function(t){return t!=e}))},getGlobalFocusableArea:function(){return this._globalFocusableArea||[]},_handleResize:function(){SFOverlayMgr.dispatch("viewportResized"),this._model.forEach(function(e){e._reposition()})},_handleScroll:function(){var e=Util.isFiori3HeaderEnabled(),t;if(e){var i=this._globalPlacematEL.scrollTop,n=this._globalPlacematELScrollTop;this._globalPlacematELScrollTop=i,t=i-n}this._model.forEach(function(i){e?i._updateTop(t):i._reposition()})}}),juic.extend(e,juic.Component,{_init:function(e,t){this._overlayId=this.id+"container",this.component=e,this.component.addEventListener("hide",this,"_hide"),this.component.addEventListener("bringToTop",this,"_bringToTop"),this.component.addEventListener("changeDimensions",this,"_changeDimensions"),this.options=t,d[this._overlayId]=this,r[e.id]=this,t.dispatchEscKeyPress&&this._setKeyListener(!0)},cleanup:function(){delete d[this._overlayId],delete r[this.component.id],this.options.cleanup&&this.component.isRegistered()?this.component.cleanup():(this.component.removeEventListener("hide",this),this.component.removeEventListener("bringToTop",this),this.component.removeEventListener("changeDimensions",this)),this._popup&&(jQuery("#"+this._popup.getContent().getId()).remove(),this._popup.destroy(),this._popup=null),this._super()},getReferenceId:function(){return this._overlayId},renderHtml:function(e){e.push("<div id=\"",this.id,"\" class=\"",this._getClassName(),"\" style=\"visibility:hidden\">"),e.push("<div id=\"",this.id,"shim\" class=\"overlayShim\"></div>"),e.push("<div id=\"",this._overlayId,"\" class=\"","globalContentBackground globalContentForeground sfoverlaycontainer "," "),this.options.modal||e.push(this.generateFDClasses("popover__body",["no-arrow","dropdown"])),e.push("\""),SFDom.renderStyle(e,this.options.css),e.push("></div></div>"),e.addAfterRenderListener(this,"_postRender")},_postRender:function(){function e(){this._adjustDOM(),this._overlayContainer.style.visibility="visible",this._initAccessibility(),SFOverlayMgr.dispatch("overlayRendered",{componentId:this.component.id,overlayId:this._overlayId,componentWidth:this._dimension.width,componentHeight:this._dimension.height,isModal:this.options.modal,context:this._context,currentOriginId:this.component._currentOriginId})}if(this.component.render(this._overlayId),this._overlayContainer=juic.$(this.id),this._shim=juic.$(this.id+"shim"),this._overlay=juic.$(this._overlayId),Util.browserInfo.ieQuirks&&Util.isRTL()&&(this._overlay.style.zoom=1),Util.isUI5Available()&&!this._useUI5Popups&&sap.ui.getCore().attachInit(function(){sap.ui.require(["sap/ui/core/Popup"],function(){jQuery([this._overlay,this._shim]).css("z-index",sap.ui.core.Popup.getNextZIndex()),this._useUI5=!0}.bind(this))}.bind(this)),Util.browserInfo.ieQuirks){var t=this;setTimeout(function(){e.call(t)},0)}else e.call(this);SFDOMEvent.addListener(this._shim,"touchstart",this._clickShim,this,!0),SFDOMEvent.addListener(this._shim,"mousedown",this._clickShim,this,!0)},_canIgnoreAccessibility:function(){return!this.options.modal||window.SFLoading&&this.component instanceof SFLoading||window.SFLoad&&this.component instanceof SFLoad},_initAccessibility:function(){if(!this._canIgnoreAccessibility()){this.allowedFocusNodeRef=null,this._ariaHiddenElements=this._ariaHiddenElements||[];for(var e=this._context.firstChild;e;e=e.nextSibling)e.hasAttribute&&!e.hasAttribute("aria-hidden")&&"sfOverlayMgr"!==e.id&&"sap-ui-static"!=e.id&&SFDom.isElementNode(e)&&SFDom.isDisplayed(e)&&(this._ariaHiddenElements.push(e),e.setAttribute("aria-hidden","true"),this._useUI5Popups||SFDOMEvent.addEventListener(e,"focus",this._handleFocusOutside,!0));for(overlayId in d)if(overlayId!==this._overlayId){var e=juic.$(overlayId);e&&e.hasAttribute&&!e.hasAttribute("aria-hidden")&&SFDom.isElementNode(e)&&SFDom.isDisplayed(e)&&(this._ariaHiddenElements.push(e),e.setAttribute("aria-hidden","true"),!this._useUI5Popups&&SFDOMEvent.addEventListener(e,"focus",this._handleFocusOutside,!0))}}},_cleanUpAccessibility:function(){this._canIgnoreAccessibility()||(this._ariaHiddenElements&&this._ariaHiddenElements.forEach(function(e){e&&(e.removeAttribute&&e.removeAttribute("aria-hidden"),!this._useUI5Popups&&SFDOMEvent.removeEventListener(e,"focus",this._handleFocusOutside,!0))},this),this._ariaHiddenElements=null)},_handleFocusOutside:function(e){var t=e.target,n=t.tagName.toUpperCase();if(this.allowedFocusNodeRef&&!this.allowedFocusNodeRef.parentNode&&(this.allowedFocusNodeRef=null),-1!==c.indexOf(n)||this.allowedFocusNodeRef&&this.allowedFocusNodeRef.contains(t))return void(this.allowedFocusNodeRef=this.allowedFocusNodeRef||t);for(var s=SFOverlayMgr.getGlobalFocusableArea(),o=0;o<s.length;o++)if(SFDom.isAncestor(juic.$(s[o]),t))return;for(overlayId in d){var a=juic.$(overlayId);if(a&&a.hasAttribute&&!a.hasAttribute("aria-hidden")&&!SFDom.isAncestor(a,t)){var l=SFDom.findNextFocusableElement(a,a,!0);SFDom.hasClass(l,"sfFocusMarker")&&(l=SFDom.findNextFocusableElement(l,a,!0)),SFDom.setFocus(l,!0)}}},_hideBodyElements:function(){if(!this._bodyHidden){this._context.style.width="",this._hiddenBodyElements=this._hiddenBodyElements||[];for(var e=this._context.firstChild;e;e=e.nextSibling)"sfOverlayMgr"!==e.id&&SFDom.isElementNode(e)&&SFDom.isDisplayed(e)&&(this._hiddenBodyElements.push({el:e,display:e.style.display}),e.style.display="none")}},_clickShim:function(){this.options.autoClose&&this.component.dispatch("hide")},_resetBodyElements:function(){this._hiddenBodyElements&&this._hiddenBodyElements.forEach(function(e){e.el.style.display=e.display}),this._hiddenBodyElements=null},_adjustDOM:function(){if(this._overlay){var e=this._overlay.lastChild;this._dimension={width:e.offsetWidth,height:e.offsetHeight},this._reposition(),this.options.fullScreen?this._hideBodyElements():this._resetBodyElements()}},_reposition:function(){if(this._doesContainerRequirePosition()&&this._dimension){var e=SFDom.getDocumentScrollTop(),t=SFDom.getDocumentScrollLeft(),i=SFDom.getViewportWidth(),n=SFDom.getViewportHeight(),s=n<this._dimension.height,o=i<this._dimension.width;if(Util.browserInfo.ieQuirks&&(this.options.viewport?SFDom.updateStyle(this._overlayContainer,{top:e+"px",left:t+"px"}):this.options.modal&&SFDom.updateStyle(this._shim,{top:e+"px",left:t+"px"}),SFDom.updateStyle(this._overlayContainer,{width:i+"px",height:n+"px"})),this.options.centered){var a;if(s||o){this._scrollFirst=this._scrollFirst||{scrollTop:e,scrollLeft:t};var l=this._scrollFirst.scrollTop,r=this._scrollFirst.scrollLeft;Util.isRTL()&&(r-=SFDom.getDocumentWidth()-SFDom.getViewportWidth()),o||(r+=(i-this._dimension.width)/2),s||(l+=(n-this._dimension.height)/2),a={position:"absolute",left:r+"px",top:l+"px"},Util.browserInfo.ieQuirks?(a={position:"absolute",left:r+"px",top:"0px"},juic.set(a,{"margin-left":this._scrollFirst.scrollLeft-t,"margin-top":this._scrollFirst.scrollTop-e})):juic.set(a,{"margin-left":"","margin-top":""})}else{delete this._scrollFirst;var d=-this._dimension.height/2,c=-this._dimension.width/2;a={left:"",top:"",position:"","margin-left":c+"px","margin-top":d+"px"},Util.isRTL()&&(a.left="auto",a.right="35%")}SFDom.updateStyle(this._overlay,a)}this.setIframe()}},_updateTop:function(e){if(!this._doesContainerRequirePosition()){var t=jQuery(this._overlay).position().top-e;this.css({top:t+"px"})}},setIframe:function(){if(this.options.iframeUnderlay){if(this._createHiddenIframe(),!this._iframe)return;this.options.modal?juic.set(this._iframe.style,{width:"100%",height:"100%",top:SFDom.getStyle(this._shim,"top"),left:SFDom.getStyle(this._shim,"left")}):juic.set(this._iframe.style,{width:this._dimension.width+"px",height:this._dimension.height+"px",marginLeft:SFDom.getStyle(this._overlay,"margin-left"),marginTop:SFDom.getStyle(this._overlay,"margin-top"),position:SFDom.getStyle(this._overlay,"position"),top:SFDom.getStyle(this._overlay,"top"),left:SFDom.getStyle(this._overlay,"left")})}else this._removeHiddenIframe()},_createHiddenIframe:function(){if(this._overlayContainer&&!this._iframe){this._iframe=document.createElement("iframe"),juic.set(this._iframe,{style:{position:"absolute",border:"0",opacity:"0",zIndex:SFDom.getStyle(this._overlay,"z-index"),filter:"alpha(opacity=0)"},title:MSGS.COMMON_HIDDEN_FRAME_TITLE,tabIndex:-1,role:"presentation",src:IMAGES["/ui/juic/img/_.gif"]});var e=this._overlayContainer.firstChild;e?this._overlayContainer.insertBefore(this._iframe,e):this._overlayContainer.appendChild(this._iframe)}},_removeHiddenIframe:function(){this._iframe&&(this._iframe.parentNode.removeChild(this._iframe),this._iframe=null)},_doesContainerRequirePosition:function(){var e=this.options;if(e.modal||e.centered||e.viewport)return!0;var t=e.css;if(t){if(null!=t.right||null!=t.bottom)return!0;for(var n in t){var s=t[n];if("string"==typeof s&&0<s.indexOf("%"))return!0}}return!1},isTopOverlay:function(){return SFOverlayMgr.isTopOverlay(this.component)},_keypressHandler:function(e){var t=SFDOMEvent.getKeyName(e);switch(t){case"ESCAPE":if(!this.isTopOverlay())return;SFDOMEvent.stopEvent(e);var i=e.target,n=i.tagName.toUpperCase(),s=+this._overlay.style.zIndex,o=document.querySelectorAll("[ui5-responsive-popover], [ui5-dialog]"),a=function(e){return e.open&&+e.style.zIndex>s},l=Array.prototype.some.call(o,a)||-1!==c.indexOf(n);if(l)return;SFOverlayMgr.dispatch("escKeyPressed",e);}},_getClassName:function(){var e=["sf-overlay"];return this.options.modal&&e.push("modalOverlay"),this.options.centered&&e.push("centeredOverlay"),this.options.viewport?e.push("viewportOverlay"):e.push("documentOverlay"),this.options.styleClass&&e.push(this.options.styleClass),e.join(" ")},_hide:function(){if(this.isRegistered()){var e=this._model.indexOf(this),t=!!juic.$(this.id);0<=e&&this._model.removeItemAt(e),t||this.cleanup(),this._setKeyListener(!1),this._cleanUpAccessibility(),SFOverlayMgr.dispatch("overlayHidden",{component:this.component,options:this.options}),this.options.fullScreen&&this._resetBodyElements(),this.dispatch("hide"),this.closeUI5Popup()}},_setKeyListener:function(e){this._keyListening!=e&&(e?SFDOMEvent.addListener(window.document,"keydown",this._keypressHandler,this):SFDOMEvent.removeListener(window.document,"keydown",this._keypressHandler,this),this._keyListening=e)},_bringToTop:function(){this._useUI5Popups&&this._popup&&this._popup._$().css("z-index",sap.ui.core.Popup.getNextZIndex()),this._useUI5&&jQuery([this._overlay,this._shim]).css("z-index",sap.ui.core.Popup.getNextZIndex());var e=this._model.indexOf(this),t=this._model.size()-1;e<t&&this._model.move(e,t,1)},_changeDimensions:function(){this._adjustDOM()},animate:function(e,t){return juic.set(this.options,{css:e}),SFAnimUtil.animate(this._overlay,e,t)},css:function(e){juic.set(this.options,{css:e}),SFDom.updateStyle(this._overlay,e)},setOptions:function(e){var t=!1;for(var i in e){var n=e[i];switch(i){case"dispatchEscKeyPress":this.options[i]=n,this._setKeyListener(!!n);break;case"css":this.css(n);break;case"modal":case"centered":case"viewport":case"styleClass":case"fullScreen":t=!0;default:this.options[i]=n;}}t&&(this._overlayContainer.className=this._getClassName(),this._adjustDOM()),this.dispatch("optionsChanged",{options:e})},getOptions:function(){return juic.set({},this.options)},getOption:function(e){return this.options[e]},setModal:function(e){SFDom[e?"addClass":"removeClass"](this.id,"modalOverlay")},openUI5Popup:function(){var e=window.sap&&sap.ui&&sap.ui.core,i=function(){if(this.isRegistered()){this._popup||(this._popup=new sap.ui.core.Popup(t(this),this.options.modal));var e=at=sap.ui.core.Popup.Dock.LeftTop,i=document;this._popup.open(0,e,at,i),this._initStaticAreaRef(),this._popup.getContent().postRender()}}.bind(this);if(e&&!SFDefaultOverlayMgr._initAttached&&(SFDefaultOverlayMgr._initAttached=!0,sap.ui.getCore().attachInit(function(){SFDefaultOverlayMgr._ui5Init=!0})),e&&sap.ui.core.Popup&&SFDefaultOverlayMgr._ui5Init)i();else{var n=!1,s=!1;sap.ui.getCore().attachInit(function(){s&&sap.ui.require(["sap/ui/core/Popup"],i),n=!0}.bind(this)),s=!0,n&&(jQuery.sap.require("sap.ui.core.Popup"),i())}},_initStaticAreaRef:function(){if(Util.isUI5Available()){var e=jQuery(sap.ui.getCore().getStaticAreaRef());e.hasClass("sfOverlayMgr")||(e.addClass("sfOverlayMgr"),AccessibilityPrefs.isLowVisionEnabled()&&(e.addClass("globalLowVisionSupport"),e.addClass(AccessibilityPrefs.getLowVisionType())))}},closeUI5Popup:function(){this._useUI5Popups&&(this._popup&&this._popup.close(0),this.isRegistered()&&this.cleanup())}}),SFAbstractOverlayMgr.Overlay=e,window.SFOverlayMgr=new SFDefaultOverlayMgr})();function SFAbstractPositionManager(){}juic.extend(SFAbstractPositionManager,juic.EventTarget,{show:function(){throw new Error("SFAbstractPositionManager: Must implement show")},moveTo:function(){throw new Error("SFAbstractPositionManager: Must implement moveTo")}}),"undefined"==typeof SFPositionManager&&function(){var e=Math.abs;function t(){}function i(t,i,a,p){var _=SFDom.getViewportRegion(),g=SFDom.getRegion(i),u=SFDom.getRegion(t),h=SFDom.getAncestorScale(i);if(Util.isRTL()){var m=SFDom.getDocumentWidth()-_.width;0<m&&(_=new SFRegion(_.top,_.right-m,_.bottom,_.left-m))}var x=parseInt(SFDom.getStyle(document.documentElement,"padding-"+(Util.isRTL()?"left":"right")));0<x&&(_.width-=x,Util.isRTL()?_.left+=x:_.right-=x);var y=c(juic.$(t));0==u.width&&(u.width=document.getElementById(t).scrollWidth),0==u.height&&(u.height=document.getElementById(t).scrollHeight),1!=h&&(g=new SFRegion(g.top,g.left+g.width*h,g.top+g.height*h,g.left));var v={fixPoint:{origin:{originId:i.id},menu:{}},overlay:{overlayId:SFOverlayMgr.getOverlayId(t)||juic.$(t).parentNode.id,width:u.width,height:u.height}},S={positionInfo:v};return d(function(t){var i=o(a,t),d=u[t.dimensionType],c=s(i,g,d,!1),h=l(_,t,c,d),m=s(i,g,d,!0),x=l(_,t,m,d),I=n(c,h,m,x),f=I?m:c,T=I?x:h,C=I?r(t,i.origin):i.origin,D=I?r(t,i.menu):i.menu,A=(I?-1:1)*i.offset;T&&(p&&(f-=T,0>f&&(f=0)),S[t.newComponentDimension]=d-e(T)),y&&(f-=_[t.regionStart]),v.fixPoint.origin[t.direction]=C,v.fixPoint.menu[t.direction]=D,v.overlay[t.regionStart]=f}),S}function n(t,i,n,s){var o=!1;return i&&(s?o=e(s)+50<e(i):o=!0),o}function s(e,t,i,n){var s=Math.round,o=e.axis,a=e.origin,l=e.menu,d=e.offset;n&&(a=r(o,a),l=r(o,l),d*=-1);var c=d;return c+="middle"===a?(t[o.regionStart]+t[o.regionEnd])/2:t[a],"middle"===l?c-=s(i/2):"right"===l||"bottom"===l?c-=i:void 0,c}function o(e,t){return{axis:t,origin:a(e,t,"origin"),menu:a(e,t,"menu"),offset:a(e,t,"offset")}}function a(e,t,i){return e&&e[i]&&e[i][t.direction]||t[i]}function l(e,t,i,n){var s=e[t.regionStart],o=e[t.regionEnd],a=i+n;if(s<=i&&a<=o)return 0;var l=s-i,r=a-o;return l>r?-l:r}function r(e,t){return"middle"==t?"middle":t==e.regionStart?e.regionEnd:e.regionStart}function d(e){e.call(window.SFPositionManager,p.x),e.call(window.SFPositionManager,p.y)}function c(e){if(e){var t=SFDom.getStyle(e,"position");return!("fixed"!=t)||c(e.parentNode)}return!1}var p={x:{axisType:"x",direction:"horizontal",dimensionType:"width",newComponentDimension:"newComponentWidth",regionStart:"left",regionEnd:"right",origin:Util.isRTL()?"right":"left",menu:Util.isRTL()?"right":"left",offset:0},y:{axisType:"y",direction:"vertical",dimensionType:"height",newComponentDimension:"newComponentHeight",regionStart:"top",regionEnd:"bottom",origin:"bottom",menu:"top",offset:0}},_=["component","originId","fixPoint","alwaysInViewport","showRelativeToViewport"],g={component:void 0,originId:void 0,fixPoint:void 0,alwaysInViewport:void 0,showRelativeToViewport:void 0},u={component:juic.Component,originId:["string",juic.Config.htmlElementType(),null],fixPoint:["object","boolean",null],alwaysInViewport:["boolean",null],showRelativeToViewport:["boolean",null]};juic.extend(t,SFAbstractPositionManager,{showMenu:function(e,t,i){this.show(e,t,i)},show:function(e){e=juic.Config.convertArguments(arguments,_,g,u),juic.assert(e.component instanceof juic.Component,"[SFPositionManager] component must be a Component object"),SFOverlayMgr.addEventListener("overlayRendered",this,"_onOverlayRendered"),this._componentId=e.component.id,this._origin=juic.$(e.originId),this._fixPoint=e.fixPoint,this._alwaysInViewport=e.alwaysInViewport;var t="boolean"==typeof e.showRelativeToViewport?e.showRelativeToViewport:c(this._origin);this._showArrow=e.showArrow,SFOverlayMgr.show(e.component,{modal:!1,viewport:t,css:{top:0,left:0}})},_onOverlayRendered:function(e){if(SFOverlayMgr.removeEventListener("overlayRendered",this),this._origin&&window.jQuery&&window.sap&&sap.ui&&sap.ui.getCore){var t=null,i=jQuery(this._origin),n=i.closest(".sapMDialog");if(n.length){var s=sap.ui.getCore().byId(n.attr("id"));t=s&&s.oPopup}if(!t){var o=i.closest(".sf-overlay");if(o.length){var a=juic.Component._registry[o.attr("id")];t=a&&a._popup;var l=jQuery("#"+e.overlayId).closest(".sf-overlay");if(l.length){var r=juic.Component._registry[l.attr("id")],d=r&&r._popup;d&&(d._parentPopup=t)}}}if(t){for(;t._parentPopup;)t=t._parentPopup;t.setAutoCloseAreas([e.overlayId])}}this._moveMenu(this._componentId,this._origin,this._fixPoint,this._alwaysInViewport)},moveTo:function(e,t,i,n){e instanceof juic.Component&&(e=e.id),juic.assert("string"==typeof e,"[SFPositionManager] componentId must be the string id of the component."),juic.assert(i,"[SFPositionManager] originId is required.");var s=juic.$(i);s&&this._moveMenu(e,s,t,n)},_moveMenu:function(e,t,n,s){if(juic.$(e)&&juic.$(t)){var o=i(e,t,n,s),a=o.positionInfo.overlay,l=0,r=0;if(this.isFioriFDEnabled()&&this._showArrow){switch(o.positionInfo.fixPoint.menu.horizontal){case"left":l=10;break;case"right":l=-10;}switch(o.positionInfo.fixPoint.menu.vertical){case"top":r=10;break;case"bottom":r=-10;}}o.componentId=e,isNaN(a.top)||isNaN(a.left)||SFOverlayMgr.css(e,{top:a.top+r+"px",left:a.left+l+"px"}),this.dispatch("positionFixed",o)}}}),window.SFPositionManager=new t}(),"undefined"==typeof window.SFFluidLayout&&function(){function e(e){this.setOptions(e)}"none"===window.fluidPageDefaultTo||(juic.extend(e,juic.EventTarget,{_DEFAULT_MIN_LAYOUT_WIDTH:1024,_DEFAULT_MAX_LAYOUT_WIDTH:1168,_DEFAULT_FIORI3_MAX_LAYOUT_WIDTH:1280,_LAYOUT_X_PADDING:15,_DEFAULT_SCROLLBAR_WIDTH:40,_containerSize:null,_containerMaxed:!0,_pageContainerDOM:null,_MIN_HEIGHT:25,_pageContentId:"content",_headerId:"renderTopNavFixedWidthV12",_enabledResizeHeight:!1,_getPageContainer:function(){if(!this._pageContainerDOM)if(Util.isFiori3HeaderEnabled())this._pageContainerDOM=Util.gebi("contentContainer")||Util.getGlobalPlacemat();else{var e=Util.getPageContainerId();this._pageContainerDOM=juic.$(e)}return this._pageContainerDOM},_noPaddingCheck:function(){(window.fluidPageNoPadding||this.viewportWidth<=this._minLayoutWidth)&&(this._getPageContainer().style.padding="0")},initDims:function(){var e=window.SFDom;if(!e)return!1;if(Util.isFiori3HeaderEnabled()&&this.setMaxLayoutWidth(this._DEFAULT_FIORI3_MAX_LAYOUT_WIDTH),!this._getPageContainer())return!1;if(this.viewportWidth=e.getViewportWidth(),window.fluidPageDefaultTo)switch(window.fluidPageDefaultTo){case"restrictedMaximum":this.restrictedMax();break;case"minimize":this.minimize();break;case"maximize":this.maximize();}else this._makePageFluid();return this._noPaddingCheck(),!0},_makePageFluid:function(){this._getPageContainer().style.padding="",this.viewportWidth<=this._minLayoutWidth?this.minimize():this.viewportWidth>this._minLayoutWidth&&this.viewportWidth<=this._maxLayoutWidth?this.maximize():this.restrictedMax()},_getNumericStyle:function(e,t){return parseInt(SFDom.getComputedStyle(e,t),10)||0},windowResize:function(){this.initDims()&&(!0==this._containerMaxed&&this._containerSize&&"max"!=this._containerSize&&this.viewportWidth>this._containerSize&&(this._getPageContainer().style.width=this._containerSize+"px"),this._noPaddingCheck(),this._enabledResizeHeight&&this._resizeHeight(),this.dispatch("resize"))},_isFooterInsideContent:function(e){if(e)for(;e=e.parentNode;)if(e.id==this._pageContentId)return!0;return!1},_resizeHeight:function(){var e=juic.$(this._pageContentId);if(e){var t=juic.$("footer"),i=juic.$(this._headerId);this._isFooterInsideContent(t)&&(t=null);var n=SFDom.getViewportHeight(),s=t?SFDom.getMargin(t)+t.offsetHeight:0,o=i?SFDom.getMargin(i)+i.offsetHeight:0,a=SFDom.getOffsets(e);n=Math.max(this._MIN_HEIGHT,n-s-o-a),e.style.height=n+"px"}},resizePageBy:function(e){e=this._getPageContainer().offsetWidth+e,this._containerSize=e,this._hasMaxedWidth(e)?(this.maximize(),this._containerMaxed=!0):this._getPageContainer().style.width=e+"px",window.fluidPageDefaultTo=null},resizePageTo:function(e){this._containerSize=e,this._hasMaxedWidth(e)?(this.maximize(),this._containerMaxed=!0):this._getPageContainer().style.width=e+"px",window.fluidPageDefaultTo=null},restrictedMax:function(){this._getPageContainer().style.width=this._maxLayoutWidth+"px",this._getPageContainer().style.minWidth=this._maxLayoutWidth+"px",this._containerSize=this._maxLayoutWidth},maximize:function(){this._containerSize="max",this._containerMaxed=!0,this._getPageContainer().style.width="auto",this._getPageContainer().style.minWidth="auto",this._getPageContainer().style.padding="0 "+this._LAYOUT_X_PADDING+"px"},minimize:function(){var e=this._minLayoutWidth-this._DEFAULT_SCROLLBAR_WIDTH;this._containerSize=e,this._getPageContainer().style.width=e+"px",this._getPageContainer().style.minWidth=e+"px",this._noPaddingCheck()},_hasMaxedWidth:function(e){return this.viewportWidth<e},setOptions:function(e){e&&e.minWidth?this.setMinLayoutWidth(e.minWidth):this.setMinLayoutWidth(this._DEFAULT_MIN_LAYOUT_WIDTH),e&&e.maxWidth?this.setMaxLayoutWidth(e.maxWidth):this.setMaxLayoutWidth(this._DEFAULT_MAX_LAYOUT_WIDTH),e&&e.headerId&&this.setHeaderId(e.headerId),e&&e.pageContentId&&this.setPageContentId(e.pageContentId),e&&e.enabledResizeHeight&&this.setEnabledResizeHeight(e.enabledResizeHeight)},setMinLayoutWidth:function(e){this._minLayoutWidth=e},getMinLayoutWidth:function(){return this._minLayoutWidth},setMaxLayoutWidth:function(e){this._maxLayoutWidth=e},getMaxLayoutWidth:function(){return this._maxLayoutWidth},setHeaderId:function(e){this._headerId=e},getHeaderId:function(){return this._headerId},setPageContentId:function(e){this._pageContentId=e},getPageContentId:function(){return this._pageContentId},setEnabledResizeHeight:function(e){this._enabledResizeHeight=e},getEnabledResizeHeight:function(){return this._enabledResizeHeight}}),window.SFFluidLayout=new e,SFDOMEvent.ready(function(){var e=window.SFFluidLayout;e.initDims()&&(SFDOMEvent.addListener(window,"resize",e.windowResize,e,!0),setTimeout(function(){e.windowResize()},2e3))}))}();function SFLoading(e,t,i){this.register(),this._init(e,t,i)}juic.extend(SFLoading,juic.Component,{CLASS_ROUNDED_CORNERS:"globalRoundedCornersSmall",CLASS_LOADING_ICON_CONTAINER:"sfV12LoadingIconContainer",CLASS_BODY_LOADING_INDICATOR:"sfV12BodyLoadingIndicator",CLASS_SECTION_LOADING_INDICATOR:"sfV12SectionLoadingIndicator",CLASS_CENTER_LOADING_ICON:"juicBusyIndicatorPositionCenter",_init:function(e,t,i){this.setMsg(e||MSGS.COMMON_loading),this._hexColor=AccessibilityPrefs.isLowVisionEnabled()?"inherit":t||"#FFF",this.setConfig(i)},renderHtml:function(e){if(e.push("<div id=\"",this.id,"\" class=\"juicBusyIndicatorAnimation juicBusyIndicatorAnimStandard ",this.generateFDClasses("busy-indicator",["m"],!0)," ",this._loadingIndicatorType?this._loadingIndicatorType:"","\" >"),e.push("<div class=\"",this.generateFDClasses("busy-indicator__circle"),"\"></div><div class=\"",this.generateFDClasses("busy-indicator__circle"),"\"></div><div class=\"",this.generateFDClasses("busy-indicator__circle"),"\"></div>"),e.push("<div id=\"",this.id,"_msg\" role=\"alert\" class=\"hiddenAriaContent\"></div>"),e.push("</div>"),e.addAfterRenderListener)e.addAfterRenderListener(this,"_afterRender");else{var t=this;setTimeout(function(){t._afterRender()},0)}},_afterRender:function(){var e=juic.$(this.id+"_msg");e&&(e.innerHTML=juic.escapeHTML(this._msg))},setConfig:function(e){e&&e.isCenterLoadingIndicator&&(this._loadingIndicatorType=this.CLASS_CENTER_LOADING_ICON)},setMsg:function(e){this._msg=e},remove:function(){this.hide(),this.cleanup();var e=juic.$(this.id);e&&e.parentNode&&e.parentNode.removeChild(e)},hide:function(){this.dispatch("hide")}});function SFMatrixLayout(e,t){this.register(),this._init(e,t)}SFMatrixLayout.FIRST_SECTION="first",SFMatrixLayout.MIDDLE_SECTION="middle",SFMatrixLayout.LAST_SECTION="last",SFMatrixLayout.prototype=function(){var e=Math.min,t=Math.max;function i(e,t,i,n){var s=juic.$(i);if(s){var o=z[t],a=o.scrollPositionType,l=e[a],r=s[o.scrollDimensionType],d=r-s[o.clientDimensionType];if(l>d){var c=juic.$(n);c.style[o.dimensionType]=r+l-d+"px"}s[a]=l}}function n(e,t,i){var n=z[i],s=e[n.startRegionType],o=e[n.endRegionType],a=t[i];return a>=s&&a<=o}function s(e,t,i){return null!=t&&e<t?t:null!=i&&e>i?i:e}function o(e,t,i){var n=i||{};return n[z[e].dimensionType]=t+"px",n}function a(e,t){var i=o("x",e.width,t);return o("y",e.height,i)}function l(e,t){t&&(1<t.colSpan&&e.push(" colSpan=\"",t.colSpan,"\""),1<t.rowSpan&&e.push(" rowSpan=\"",t.rowSpan,"\""))}function r(e,t){t&&(1<=t.colSpan&&(e.colSpan=t.colSpan),1<=t.rowSpan&&(e.rowSpan=t.rowSpan))}function d(e,t){t&&e.push(" class=\"",t,"\"")}function c(e,t,i){return e&&null!=e[t]?e[t]:i}function p(e,t,i){var n="x"==e;return{row:n?i:t,column:n?t:i}}function _(e,t,i){for(var n=0,s=e.length;n<s;n++)e[n]>=t&&(e[n]+=i-t+1)}function g(e,i,n){for(var s=t(i-e[0],0),o=n;o>=i;o--)e.splice(s,0,o)}function u(t,i,n){for(var s=0;s<t.length;)if(t[s]>=i&&t[s]<=n){var o=e(t.length-s,n-i+1);t.splice(s,o)}else t[s]>=n&&(t[s]-=n-i+1),s++}function h(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]==t)return i;return-1}function m(e,t,i){return t&&(e.push("<td id=\"",t.id),e.push("\" class=\"",t.className,"\""),!i&&(e.push(" onmousedown=\"",t.onmousedown),e.push("\" onmouseover=\"",t.onmouseover),e.push("\" onmouseout=\"",t.onmouseout),e.push("\" ontouchstart=\"",t.ontouchstart,"\"")),l(e,t),SFDom.renderStyle(e,t.style),e.push(" unselectable=\"on\">"),t.renderSpacerMethod(e,t),e.push("</td>")),e}function x(e,t){var i=t.intersection||"x"==t.axisType?t.adjusterSize:1,n=t.intersection||"y"==t.axisType?t.adjusterSize:1;Util.browserInfo.ie?(e.push("<img src=\"",IMAGES["/ui/juic/img/_old.gif"],"\" style=\"width: ",i,"px; height: "),e.push(n,"px; visibility: hidden\">")):(e.push("<div style=\"width: ",i,"px; height: "),e.push(n,"px;\"></div>"))}function y(e,t,i){var n=T(m([],i),e);t.parentNode.replaceChild(n[0],t)}function v(e,t,i,n,s){if(s){var o=n;n instanceof Array&&(o=n[0],countCount=n.length);var a=h(t,o);i>=a&&(i+=countCount)}var l=t.length<=i,r=l?null:t[i];if(n instanceof Array)for(var d=0,c=n.length,p;d<c;d++)p=n[d],l?e.appendChild(p):e.insertBefore(p,r);else l?e.appendChild(n):e.insertBefore(n,r)}function S(e,t){if(e!=t)for(var i=!0,n=e.childNodes.length-1,s;0<=n;n--)s=e.childNodes[n],i?t.appendChild(s):t.insertBefore(s,t.firstChild),i=!1}function I(e){for(var t=[],i=0,n=e.length;i<n;i++)t[i]=e[i];return t}function f(e,t){return t.innerHTML="<table>"+e.join("")+"</table>",I(t.firstChild.rows)}function T(e,t){return t.innerHTML="<table><tr>"+e.join("")+"</tr></table>",I(t.firstChild.rows[0].cells)}function C(e,t,i){var n=z[t],s=e[n.scrollPositionType];if(0>i)return 0<s;var o=e[n.clientDimensionType],a=e[n.scrollDimensionType];return s<a-o}var D=30,A=SFMatrixLayout.MIDDLE_SECTION,M=[SFMatrixLayout.FIRST_SECTION,A,SFMatrixLayout.LAST_SECTION],w=["contentsChanged","propertiesChanged","spacingOptionsChanged","requestAdjust","intervalAdded","intervalRemoved","intervalMoved"],b=Util.isRTL(),z={x:{axisType:"x",oppositeAxisType:"y",cursorType:"col-resize",cellType:"column",spanType:"colSpan",dimensionType:"width",startRegionType:b?"right":"left",endRegionType:b?"left":"right",clientDimensionType:"clientWidth",offsetDimensionType:"offsetWidth",scrollDimensionType:"scrollWidth",scrollPositionType:"scrollLeft",paddingStart:b?"padding-right":"padding-left",paddingEnd:b?"padding-left":"padding-right",scrollBarSize:Util.browserInfo.ipad?0:17},y:{axisType:"y",oppositeAxisType:"x",cursorType:"row-resize",cellType:"row",spanType:"rowSpan",dimensionType:"height",startRegionType:"top",endRegionType:"bottom",clientDimensionType:"clientHeight",offsetDimensionType:"offsetHeight",scrollDimensionType:"scrollHeight",scrollPositionType:"scrollTop",paddingStart:"padding-top",paddingEnd:"padding-bottom",scrollBarSize:Util.browserInfo.ipad?0:17}};return juic.set(new juic.Component,{_init:function(e,t){var i=c(t,"dimension",null);this._adjusterSize=c(t,"adjusterSize",5),this._dragBothAdjusters=c(t,"dragBothAdjusters",!0),this._dragByResizing=c(t,"dragByResizing",!1),this._minimizeSpace=c(t,"minimizeSpace",!1),this._scrollableCells=c(t,"scrollableCells",!0),this._renderSpacerMethod=c(t,"renderSpacerMethod",x),this._scrollBarMgr=c(t,"scrollBarMgr"),this._hideScrollBars=c(t,"hideScrollBars",!1),this._className=c(t,"className"),this._renderSpacerMethod||(this._renderSpacerMethod=x),this._scrollBarMgr&&(this._hideScrollBars=!0,this._scrollBarMgr.setAutoScroller(this.getAutoScroller()));var n=null;n=e instanceof SFMatrixCellManager?e:new SFMatrixCellManager(e,t),this.setCellManager(n),i&&this.setDimension(i)},setCellManager:function(e){if(juic.assert(e instanceof SFMatrixCellManager,"[SFMatrixLayout] The cell manager is not a SFMatrixCellManager"),this._cellManager)for(var t=0,i=w.length;t<i;t++)this._cellManager.removeEventListener(w[t],this);this._cellManager=e;for(var t=0,i=w.length;t<i;t++)this._cellManager.addEventListener(w[t],this);this._axisData={},this._createAxisData("x"),this._createAxisData("y"),this._dimension&&this._refreshDimensions(),this._updateContent()},getCellManager:function(){return this._cellManager},cleanup:function(e){for(var t=0,i=w.length;t<i;t++)this._cellManager.removeEventListener(w[t],this);this._cellManager.cleanup(e),this.unregister(),this._autoScroller&&this._autoScroller.removeEventListener("autoScroll",this)},handleEvent:function(e){switch(e.type){case"autoScroll":this._onAutoScroll(e);break;case"resize":this.setDimension({width:e.width,height:e.height});break;case"contentsChanged":this._updateCellContent(e.rowIndex,e.columnIndex);break;case"propertiesChanged":this._updateCellProperties(e.rowIndex,e.columnIndex);break;case"spacingOptionsChanged":this._updateSpacingOptions(e.axisType,e.index,e.oldOptions);break;case"requestAdjust":this._requestAdjust(e.rowIndex,e.columnIndex,e.dimension,e.bounds);break;case"intervalAdded":this._intervalAdded(e.axisType,e.index0,e.index1);break;case"intervalRemoved":this._intervalRemoved(e.axisType,e.index0,e.index1);break;case"intervalMoved":this._intervalMoved(e.axisType,e.index0,e.index1,e.count);}},handleDragEvent:function(e){switch(e.type){case"dragStart":this._handleDragStart(e);break;case"drag":this._handleDrag(e);break;case"dragEnd":this._handleDragEnd(e);}},renderHtml:function(e){return this._cellManager.clearCache(),e.push("<div id=\"",this.id,"\""),d(e,"sfMatrixLayout"+(this._className?" "+this._className:"")),this._scrollBarMgr&&e.push(" onmouseover=\"",this.fireCode("_fireMouseOver"),"\""),e.push(">"),this._renderContent(e),e.push("</div>"),e},getDimension:function(){return this._dimension&&this._sizesAvailable?{width:this._getTotalDimensionAxis("x"),height:this._getTotalDimensionAxis("y")}:null},setDimension:function(e){juic.assert(e&&"number"==typeof e.width&&0<e.width&&"number"==typeof e.height&&0<e.height,"[SFMatrixLayout] Dimension must provide positive width and height values");var t=this.getDimension();this._dimension={width:parseInt(e.width),height:parseInt(e.height)},t&&this._dimension.width==t.width&&this._dimension.height==t.height||this._refreshDimensions()},adjustDOM:function(){var e=SFDom.getSuggestedDimension(juic.$(this.id).parentNode);e&&this.setDimension(e)},getCellDimension:function(e,t){if(juic.assert(this._sizesAvailable,"[SFMatrixLayout] Cannot get cell sizes before they are available."),this._validateIndices(e,t),this._sizesAvailable){var i=this._cellManager.getPlaceholderCell(e,t);i&&(e=i.rowIndex,t=i.columnIndex);var n=this._cellManager.getCellSpan(e,t);return{width:this._getTotalSize("x",t,t+n.colSpan,!0),height:this._getTotalSize("y",e,e+n.rowSpan,!0)}}return{width:null,height:null}},setCellDimension:function(e,t,i){this._validateIndices(e,t),this._cellManager.getSpacingManager("x").setCustomSize(t,i),this._cellManager.getSpacingManager("y").setCustomSize(e,i),this._refreshDimensions()},getSingleDimension:function(e,t){return this._validateIndex(e,t),this._sizesAvailable?this._axisData[e].sizes[t]:null},setSingleDimension:function(e,t,i){this._cellManager.getSpacingManager(e).setCustomSize(t,i),this._sizesAvailable&&this._refreshDimensions()},getAxisSizes:function(e){return this._validateAxisType(e),this._sizesAvailable?this._axisData[e].sizes.concat():null},getAllSizes:function(){return this._sizesAvailable?{y:this._axisData.y.sizes.concat(),x:this._axisData.x.sizes.concat()}:null},setAxisSizes:function(e,t){this._cellManager.getSpacingManager(e).setSizes(t),this._sizesAvailable&&this._refreshDimensions()},setAllSizes:function(e,t){e.x&&e.y?this.setAllSizes(e.y,e.x):(this._cellManager.getSpacingManager("y").setSizes(e),this._cellManager.getSpacingManager("x").setSizes(t),this._sizesAvailable&&this._refreshDimensions())},broadcast:function(e,t){this._cellManager.broadcast(e,t)},scrollTo:function(e,t){this._validateIndices(e,t);var i=this._getScrollToRegion("y",e);this._getScrollToRegion("x",t,i),this.getAutoScroller().scrollTo(i)},scrollToAxis:function(e,t){if(this._validateIndex(e,t),this._sizesAvailable&&this.getSectionName(e,t)){var i=this._getScrollToRegion(e,t);this.getAutoScroller().scrollToAxis(e,i)}},_getScrollToRegion:function(e,t,i){var n=z[e],s=this._axisData[e],o=this.getPageOffset(e,t),a=s.sizes[t];this._cellManager.isAdjustable(e,t)&&(a+=s.adjusterSize);var i=i||{};return i[n.startRegionType]=o,i[n.endRegionType]=o+a,i},getAutoScroller:function(){return this._autoScroller||(this._autoScroller=new SFAutoScroller({scrollEl:this._getSectionId(A,A),extenderEl:this._getSectionExtenderId(A,A),autoIncreaseSize:!0}),this._autoScroller.addEventListener("autoScroll",this)),this._autoScroller},getPageOffset:function(e,t){var i=this.getPageOffsets(e,t||0);return i?i[t||0]:null},getPageOffsets:function(e,t){this._validateAxisType(e);var i=juic.$(this.id);if(i&&this._sizesAvailable){var n=z[e],s=this._axisData[e],o=this._getSectionIndices(e,A),a=[],l=juic.$(this._getSectionId(A,A)),r=l[n.scrollPositionType],d=SFDom["get"+e.toUpperCase()](i),c=d;t=t||s.size-1;for(var p=0;p<s.size&&p<=t;p++)p==o[0]&&(c-=r),a.push(c),this._cellManager.isHidden(e,p)||(c+=s.sizes[p],this._cellManager.isAdjustable(e,p)&&(c+=s.adjusterSize)),p==o[o.length-1]&&(c=d+s[SFMatrixLayout.FIRST_SECTION+"Size"]+s.viewableSize);return a}return null},getSectionName:function(e,t){this._validateAxisType(e);var i=this._axisData[e],n=void 0;if(this._cellManager.isFrozen(e,t)){var s=this._getSectionIndices(e,A);t<s[0]||0==s.length?n=SFMatrixLayout.FIRST_SECTION:t>s[s.length-1]?n=SFMatrixLayout.LAST_SECTION:juic.assert(!1,"[SFMatrixLayout] Invalid frozen section in middle")}else n=A;return n},setDragByResizing:function(e){this._dragByResizing=e},_validateIndex:function(e,t){this._validateAxisType(e),juic.assert("number"==typeof t&&0<=t&&t<this._axisData[e].size,"[SFMatrixLayout] Invalid index = "+t)},_validateIndices:function(e,t){juic.assert("number"==typeof e&&0<=e&&e<this._axisData.y.size&&"number"==typeof t&&0<=t&&t<this._axisData.x.size,"[SFMatrixLayout] Invalid [rowIndex, columnIndex] = ["+e+", "+t+"]")},_validateAxisType:function(e){juic.assert(z[e],"[SFMatrixLayout] Invalid axisType: "+e)},_getCellId:function(e,t){return this.id+"cell:"+e+":"+t},_getAdjusterId:function(e,t,i,n){var s=z[e],o=p(e,t,i),a=null;return a=n?this.id+"int-adj:"+o.row+":"+o.column:this.id+s.cellType+"-adj:"+o.row+":"+o.column,a},_isAdjuster:function(e){return e&&e.id&&0<=e.id.indexOf("adj:")},_getSectionId:function(e,t){return this.id+e.charAt(0)+"-"+t.charAt(0)},_getSectionTableId:function(e,t){return this.id+e.charAt(0)+"-"+t.charAt(0)+"-tbl"},_getSectionExtenderId:function(e,t){return this.id+e.charAt(0)+"-"+t.charAt(0)+"-ext"},_intervalAdded:function(e,t,i){juic.assert(0<=t&&i>=t,"[SFMatrixLayout] Invalid interval ["+t+", "+i+"]");for(var n=!!juic.$(this.id),s=this._axisData[e],o=z[e].oppositeAxisType,a=0,l;a<M.length;a++)l=M[a],_(s[l+"Indices"],t,i);for(var a=t;a<=i;a++){var l=this.getSectionName(e,a),r=this._getSectionIndices(e,l),d=0==r.length;if(g(r,a,a),n&&d)for(var c=0;c<M.length;c++){var u=M[c],h=this._getSectionIndices(o,u);if(0<h.length){var m=p(e,l,u),x=juic.$(this._getSectionId(m.row,m.column));x.style.display=""}}}s.size+=i-t+1,this._insertDOM(e,t,i),this._sizesAvailable&&this._refreshDimensions()},_intervalRemoved:function(e,t,i){juic.assert(0<=t&&i>=t,"[SFMatrixLayout] Invalid interval ["+t+", "+i+"]");for(var n=!!juic.$(this.id),s=z[e].oppositeAxisType,o=0;o<M.length;o++){var a=M[o],l=this._getSectionIndices(e,a);if(u(l,t,i),0==l.length&&n)for(var r=0;r<M.length;r++){var d=M[r],c=p(e,a,d),_=juic.$(this._getSectionId(c.row,c.column));_.style.display="none"}}var g=this._axisData[e];g.size-=i-t+1,this._removeDOM(e,t,i),this._sizesAvailable&&this._refreshDimensions()},_intervalMoved:function(t,i,n,s){var o=this.getSectionName(t,i),a=this.getSectionName(t,n),l=this.getSectionName(t,n+s-1);juic.assert(o==a&&o==l,"[SFMatrixLayout] Cannot move a column or row across different sections");var r=this._axisData[t],d=r.sizes,c=d.splice(i,s);if(c.splice(0,0,n,0),d.splice.apply(d,c),juic.$(this.id)){for(var p=0;p<M.length;p++)"y"==t?this._moveRowDOM(o,M[p],i,n,s):this._moveColumnDOM(o,M[p],i,n,s);this._correctDOM(t,e(i,n))}},_refreshDimensions:function(){this.getDimension();for(var e in z)this._updateAxisData(e);if(!this._hideScrollBars||this._scrollBarMgr)for(var e in z)this._updateAxisDataScroll(e);this._sizesAvailable=!0,this._adjustDOM();for(var t=this._cellManager.size(),i=0,n;i<t.height;i++){n=this._cellManager.isHidden("y",i);for(var s=0,o;s<t.width;s++)o=this._cellManager.isHidden("x",s),n||o||this._cellManager.resize(i,s,this.getCellDimension(i,s))}this._updateScrollManager()},_updateContent:function(){var e=juic.$(this.id);e&&(SFDom.updateStyle(e,a(this.getDimension())),e.innerHTML=this._renderContent([]).join(""))},_updateCellContent:function(e,t){if(juic.$(this.id)){var i=this._cellManager.getPlaceholderCell(e,t);if(!i){var n=this._cellManager.getCellSpan(e,t),s=this._firstVisibleRowIndex(e,n);0>s&&(s=e);var o=this._getCellId(s,t),a=this._cellManager.get(e,t);a&&a.render?a.render(o):juic.$(o).innerHTML=a?juic.escapeHTML(a.toString()):"",this._cellManager.resize(e,t,this.getCellDimension(e,t))}}},_renderContent:function(e){e.push("<div id=\"",this.id,"adjusters\" class=\"adjusters\"></div>"),e.push("<table id=\"",this.id,"outer\" class=\"outer-table\" cellpadding=\"0\"><tbody>");for(var t=0;t<M.length;t++)this._renderSectionRow(e,M[t]);return this._scrollBarMgr&&(e.push("<tr><td colspan=\"3\">"),this._scrollBarMgr.getHorizontal().renderHtml(e),e.push("</td><td>"),this._scrollBarMgr.getSpacer().renderHtml(e),e.push("</td></tr>")),e.push("</tbody></table>"),e},_renderSectionRow:function(e,t){this._getSectionIndices("y",t);e.push("<tr>");for(var i=0;i<M.length;i++)this._renderSection(e,t,M[i]);return this._scrollBarMgr&&t==SFMatrixLayout.FIRST_SECTION&&(e.push("<td rowspan=\"3\">"),this._scrollBarMgr.getVertical().renderHtml(e),e.push("</td>")),e.push("</tr>"),e},_renderSection:function(e,t,i){var n=t==SFMatrixLayout.FIRST_SECTION,s=t==A,o=i==A,l=this._getOverflowStyle(s&&o),r=null,c=this._getSectionIndices("y",t),p=this.isFioriFDEnabled();if(this._sizesAvailable){var _=this._getSectionDimension(t,i);a(_,l),s&&o||(_.width+=o?D:0,_.height+=s?D:0,r=a(_))}0==c.length&&(l.display="none"),e.push("<td><div id=\"",this._getSectionId(t,i),"\""),d(e,t+"-row "+i+"-column"),s&&o&&this._frozenFlag&&e.push(" onscroll=\"",this.fireCode("_fireScroll"),"\""),n&&o&&l&&p&&(l.height="auto"),SFDom.renderStyle(e,l),e.push("><div id=\"",this._getSectionExtenderId(t,i),"\" class=\"extender\""),n&&o&&r&&p&&(r.height="auto"),SFDom.renderStyle(e,r),e.push("><table id=\"",this._getSectionTableId(t,i),"\" class=\"inner-table ",this.generateFDClasses("table"),p&&n&&o?" headerTable":"","\" cellpadding=\"0\"><tbody class=\"",this.generateFDClasses("table__body"),"\">");for(var g=0,u=c.length;g<u;g++)this._renderRow(e,c[g],i);return e.push("</tbody></table></div></div></td>"),e},_renderRow:function(e,t,i){var n=null,s=this._cellManager.getSpacingOption("y",t,"className")+" "+this.generateFDClasses("table__row");this._cellManager.isHidden("y",t)&&(n={display:"none"}),e.push("<tr"),d(e,s),SFDom.renderStyle(e,n),e.push(">");for(var o=this._getSectionIndices("x",i),a=0,l=o.length;a<l;a++)this._renderCell(e,t,o[a]);if(e.push("</tr>"),this._cellManager.isAdjustable("y",t)){e.push("<tr"),d(e,s),SFDom.renderStyle(e,n),e.push(">");for(var a=0,l=o.length;a<l;a++)this._renderRowAdjuster(e,t,o[a]);e.push("</tr>")}return e},_renderCell:function(e,t,i){var n=this._cellManager.get(t,i),s=this._cellManager.getPlaceholderCell(t,i),o=this._cellManager.getCellProperties(t,i),a=o.header||this._cellManager.getSpacingOption("y",t,"header")||this._cellManager.getSpacingOption("x",i,"header"),r=this._getCellStyle(t,i),c=a?"th":"td",p=null,_=this._cellManager.getSpacingOption("x",i,"className")+" "+this.generateFDClasses("table__cell"),g=this._getActualSpan(t,i),u=this._cellManager.isHidden("x",i),h=this._cellManager.isHidden("y",t),x=h||u;if(s){var y=this._cellManager.getCellSpan(s.rowIndex,s.columnIndex),v=this._firstVisibleRowIndex(s.rowIndex,y);v==t&&i==s.columnIndex?(n=this._cellManager.get(s.rowIndex,s.columnIndex),r=this._getCellStyle(s.rowIndex,s.columnIndex),g=this._getActualSpan(s.rowIndex,s.columnIndex),x=!1):x=!0}else{var y=this._cellManager.getCellSpan(t,i),v=this._firstVisibleRowIndex(t,y);h&&v>t?(n=null,g=null):x=0>=g.rowSpan||0>=g.colSpan}return x&&(p={display:"none"}),e.push("<",c),SFDom.renderStyle(e,p),d(e,_),l(e,g),e.push("><div id=\"",this._getCellId(t,i),"\""),d(e,o.className),SFDom.renderStyle(e,r),e.push(">"),n&&(n.renderHtml?n.renderHtml(e):e.push(juic.escapeHTML(n.toString()))),e.push("</div></",c,">"),m(e,this._getAdjusterInfo("x",i,t),0==this._adjusterSize),e},_getCellStyle:function(e,t){var i={},n=this._cellManager.getCellProperties(e,t);if(i.overflow=(null==n.scrollable?this._scrollableCells:n.scrollable)?"auto":"hidden",this._sizesAvailable){var s=this.getCellDimension(e,t);a(s,i)}return i},_updateCellProperties:function(e,t){var i=juic.$(this._getCellId(e,t));if(i){var n=this._cellManager.getCellProperties(e,t);i.className=n.className||"",SFDom.updateStyle(i,this._getCellStyle(e,t))}},_updateSpacingOptions:function(e,t,i){var n=this._cellManager.isHidden(e,t);n!=i.hidden&&(this._setHiddenDOM(e,t,n),this._refreshDimensions());var s=this._cellManager.isAdjustable(e,t);juic.assert(s==i.adjustable,"[SFMatrixLayout] Cannot change the adjustable property");var o=this._cellManager.getSpacingOption(e,t,"className");o!=i.className&&this._setClassName(e,t,o)},_getOverflowStyle:function(e){var t={overflow:"hidden"};if(e&&this._sizesAvailable&&!this._hideScrollBars){var i=this._isScrollRequired("x"),n=this._isScrollRequired("y");i||n?(t.overflow="",t["overflow-x"]=i?"auto":"hidden",t["overflow-y"]=n?"auto":"hidden"):(t["overflow-x"]="",t["overflow-y"]="")}return t},_renderRowAdjuster:function(e,t,i){return m(e,this._getAdjusterInfo("y",t,i)),m(e,this._getAdjusterInfo("y",t,i,!0)),e},_insertDOM:function(e,t,i){if(juic.$(this.id)){for(var n=this.getSectionName(e,t),s=z[e].oppositeAxisType,o=this._getSectionIndices(e,n),a=this._countAdjustableSpacing(e,o[0],t),l=null,r=t;r<=i;r++){if(r>t){var d=this.getSectionName(e,r);d!=l&&(l=d,adjusterCount=0)}for(var c=0;c<M.length;c++){var _=M[c],g=this._axisData[s],u=this._getSectionIndices(s,_);if(0<u.length){var l=p(e,n,_),m=juic.$(this._getSectionTableId(l.row,l.column)),x=m.tBodies[0],y=this._getScratchPad(),S=h(o,r)+a;if("y"==e){var I=f(this._renderRow([],r,_),y);v(x,x.rows,S,I)}else for(var C=0,D=0;D<u.length;D++){var A=u[D],w=this._cellManager.isAdjustable(s,A),b=T(this._renderCell([],A,r),y),E=x.rows[D+C];v(E,E.cells,S,b),w&&(E=x.rows[D+C+1],b=T(this._renderRowAdjuster([],A,r),y),v(E,E.cells,S,b),C++)}}}this._cellManager.isAdjustable(e,r)&&a++}this._correctDOM(e,t)}},_removeDOM:function(e,t,i){if(juic.$(this.id)){for(var n=z[e],s=n.oppositeAxisType,o=this._axisData[e],a=this._axisData[s],l=t;l<=i;l++)for(var r=0;r<a.size;r++){var d=p(e,l,r),c=juic.$(this._getCellId(d.row,d.column));if(c){var _=c.parentNode,g=_.parentNode,u=g.parentNode,m=h(g.cells,_),x=h(u.rows,g),y=g.cells[m+1],v=u.rows[x+1],S=this._isAdjuster(y),I=v&&this._isAdjuster(v.cells[0]);if(g.removeChild(_),"y"==e&&u.removeChild(g),S&&g.removeChild(y),I)if("y"==e)u.removeChild(v);else{var f=v.cells[m];S&&v.removeChild(v.cells[m+1]),v.removeChild(f)}}}t<o.size&&this._correctDOM(e,t)}},_setHiddenDOM:function(t,i,n){if(juic.$(this.id)){for(var s=z[t],o=z[t].oppositeAxisType,a=this._axisData[o],l=i,r=0;r<a.size;r++){var d=p(t,i,r),c=this._cellManager.getPlaceholderCell(d.row,d.column);if(c){var _=c[s.cellType+"Index"];l=e(l,_)}}if("y"==t)for(var g=this._cellManager.isAdjustable(t,i),u=n?"none":"",m=0;m<M.length;m++){var x=M[m],y=this._getSectionIndices(o,x);if(0<y.length){var v=juic.$(this._getCellId(i,y[0])),S=v.parentNode.parentNode;if(S.style.display=u,g){var I=S.parentNode,f=h(I.rows,S),T=I.rows[f+1];T.style.display=u}}}this._correctDOM(t,l,i)}},_setClassName:function(e,t,i){if(juic.$(this.id)){var n=z[e].oppositeAxisType,s=this._axisData[n];if("x"==e)for(var o=0,a;o<s.size;o++)a=juic.$(this._getCellId(o,t)),a&&(a.parentNode.className=i);else for(var l=this.getSectionName(e,t),r=this._getSectionIndices(e,l),d=h(r,t),c=this._countAdjustableSpacing(e,r[0],t),p=0;p<M.length;p++){var _=M[p],g=juic.$(this._getSectionTableId(l,_)),u=g.tBodies[0],m=u.rows[c+d];m&&(m.className=i)}}},_moveRowDOM:function(e,t,i,n,s){var o=z.y,a=this._getSectionIndices("x",t);if(0<a.length){for(var l=this._getSectionIndices("y",e),r=this._countAdjustableSpacing("y",l[0],n),d=h(l,n),c=d+r,p=[],_=0;_<s;_++){var g=juic.$(this._getCellId(i+_,a[0])),u=g.parentNode.parentNode,m=u.parentNode,x=h(m.rows,u),y=this._cellManager.isAdjustable("y",n);p.push(u);var S=this._cellManager.isAdjustable("y",n+_);S&&p.push(m.rows[x+1])}v(m,m.rows,c,p,!0)}},_moveColumnDOM:function(e,t,i,n,s){var o=z.x,a=this._getSectionIndices("y",t);if(0<a.length)for(var l=this._getSectionIndices("x",e),r=this._countAdjustableSpacing("x",l[0],n),d=h(l,n),c=d+r,p=juic.$(this._getSectionTableId(t,e)),_=juic.$(this._getCellId(a[0],l[0])),g=h(p.rows,_.parentNode.parentNode),u=0,m=0;m<a.length;m++){for(var x=g+m+u,y=a[m],S=this._cellManager.isAdjustable("y",y),I=p.rows[x],f=p.rows[x+1],T=[],C=[],D=0;D<s;D++){var A=this._cellManager.isAdjustable("x",n+D),M=juic.$(this._getCellId(y,i+D)).parentNode,w=h(I.cells,M);T.push(M),A&&T.push(I.cells[w+1]),S&&(C.push(f.cells[w]),A&&C.push(f.cells[w+1]))}S&&v(f,f.cells,c,C,!0),v(I,I.cells,c,T,!0),S&&u++}},_correctDOM:function(e,i,n){var s=this._axisData[e];n=n||s.size-1;for(var o=z[e],a=this.getSectionName(e,i),l=this._getSectionIndices(e,a),r=this._countAdjustableSpacing(e,l[0],i),d=h(l,i),c=i;c<=n;c++){if(c>i){var p=this.getSectionName(e,c);p!=a&&(a=p,r=0)}for(var _=0,g;_<M.length;_++)g=this._correctSectionDOM(e,c,r,a,M[_]),n=t(n,c+g-1);this._cellManager.isAdjustable(e,c)&&r++}this._handleMissingRow(e,i,n)},_correctSectionDOM:function(e,i,n,s,o){var a=z[e],l=a.oppositeAxisType,r=this._axisData[l],d=this._getSectionIndices(l,o),c=1;if(0<d.length)for(var _=this._getSectionIndices(e,s),g=h(_,i),u=p(e,s,o),m=juic.$(this._getSectionTableId(u.row,u.column)),x=0,y=0,v=d.length;y<v;y++){var S=d[y],I=this._cellManager.isAdjustable(l,S),f=p(e,{index:i,sectionIndex:g+n},{index:S,sectionIndex:y+x});this._correctCellDOM(m,f.row.index,f.row.sectionIndex,f.column.index,f.column.sectionIndex);var T=this._cellManager.getCellSpan(f.row.index,f.column.index);c=t(c,T[a.spanType]),I&&x++}return c},_handleMissingRow:function(e,t,i){for(var n=z[e],s=n.oppositeAxisType,o=this._axisData[s],a=t;a<=i;a++)for(var l=0;l<o.size;l++){var d=p(e,a,l),c=this._cellManager.getCellSpan(d.row,d.column);if(1<c.colSpan||1<c.rowSpan){var _=this._firstVisibleRowIndex(d.row,c);if(0<=_){var g=this._findCellWithContents(d.row,d.column,c),u=this._getActualSpan(d.row,d.column),h=juic.$(this._getCellId(_,d.column));if(g&&(g.rowIndex!=_||g.columnIndex!=d.column)){var m=juic.$(this._getCellId(g.rowIndex,g.columnIndex));m!=h&&(S(m,h),m.parentNode.style.display="none")}r(h.parentNode,u),0<u.colSpan&&0<u.rowSpan&&(h.parentNode.style.display="")}}}},_firstVisibleRowIndex:function(e,t){for(var i=0;i<t.rowSpan;i++)if(!this._cellManager.isHidden("y",e+i))return e+i;return-1},_findCellWithContents:function(e,t,i){for(var n=0;n<i.rowSpan;n++)for(var s=0,o;s<i.colSpan;s++)if(o=juic.$(this._getCellId(e+n,t+s)),0<o.childNodes.length)return{rowIndex:e+n,columnIndex:t+s};return null},_correctCellDOM:function(e,t,i,n,s){var o=e.rows[i].cells[s],a=this._getActualSpan(t,n),l=this._getScratchPad(),d=e.rows[i],c=e.rows[i+1],p=this._isCellVisible(t,n),_=this._getAdjusterInfo("x",n,t),g=this._getAdjusterInfo("y",t,n),u=this._getAdjusterInfo("y",t,n,!0);if(o.firstChild.id=this._getCellId(t,n),r(o,a),o.style.display=p?"":"none",_){var h=d.cells[s+1];y(l,h,_)}if(g){var h=c.cells[s];y(l,h,g)}if(u){var h=c.cells[s+1];y(l,h,u)}},_getActualSpan:function(e,t){var i=this._cellManager.getPlaceholderCell(e,t);if(i)return{colSpan:0,rowSpan:0};var n=this._cellManager.getCellSpan(e,t);return{colSpan:this._getActualSpanAxis("x",t,n.colSpan),rowSpan:this._getActualSpanAxis("y",e,n.rowSpan)}},_getActualSpanAxis:function(e,t,i){for(var n=!0,s=0,o=0,a;o<i;o++)a=t+i-o-1,this._cellManager.isHidden(e,a)||(s++,!n&&this._cellManager.isAdjustable(e,a)&&s++,n=!1);return s},_isCellVisible:function(e,t){var i=!0,n=this._cellManager.getPlaceholderCell(e,t);return n?i=!1:(cellSpan=this._getActualSpan(e,t),i=!(0>=cellSpan.rowSpan||0>=cellSpan.colSpan)&&(!!(1<cellSpan.rowSpan||1<cellSpan.colSpan)||!this._cellManager.isHidden("x",t)&&!this._cellManager.isHidden("y",e))),i},_isAdjusterVisible:function(e,t,i,n){var s=z[e],o=s.oppositeAxisType,a=p(e,t,i),l=this._cellManager.isHidden(e,t),r=this._cellManager.isHidden(o,i),d=!l&&!r;if(d){var c=null,_=this._cellManager.getPlaceholderCell(a.row,a.column);_?c=this._cellManager.getCellSpan(_.rowIndex,_.columnIndex):(_={rowIndex:a.row,columnIndex:a.column},c=this._cellManager.getCellSpan(a.row,a.column));var g="x"==e?_.columnIndex:_.rowIndex,u=c[s.spanType];if(d=this._isLastVisibleSpace(e,t,g+u-1),n){var h=z[o],m="x"==e?_.rowIndex:_.columnIndex;u=c[h.spanType],d=d||this._isLastVisibleSpace(o,i,m+u-1)}}return d},_isLastVisibleSpace:function(e,t,i){for(var n=i;n>t;n--)if(!this._cellManager.isHidden(e,n))return!1;return!0},_getAdjusterInfo:function(e,t,i,n){var s=z[e],o=s.oppositeAxisType,a=z[o];if(!this._cellManager.isAdjustable(e,t))return null;if(n&&!this._cellManager.isAdjustable(o,i))return null;var l=this._axisData[e],r=p(e,t,i),d={axisType:e,rowIndex:r.row,columnIndex:r.column,intersection:n,adjusterSize:l.adjusterSize,renderSpacerMethod:this._renderSpacerMethod};this._isAdjusterVisible(e,t,i,n)||(d.style={display:"none"}),d.id=this._getAdjusterId(e,t,i,n);var c=[s.cellType+"-adjuster"];return n&&c.push("intersection"),d.onmouseover=this.fireCode("_setAdjusterHover",e,t,!0),d.onmouseout=this.fireCode("_setAdjusterHover",e,t,!1),n&&this._dragBothAdjusters?(d.onmousedown=this.fireCode("_fireIntersectionDragStart",r.row,r.column),d.ontouchstart=this.fireCode("_fireIntersectionDragStart",r.row,r.column),d.onmouseover+=this.fireCode("_setAdjusterHover",o,i,!0),d.onmouseout+=this.fireCode("_setAdjusterHover",o,i,!1)):(n&&c.push("row-only"),d.onmousedown=this.fireCode("_fireAdjusterDragStart",e,t),d.ontouchstart=this.fireCode("_fireAdjusterDragStart",e,t)),d.className=c.join(" "),d},_countAdjustableSpacing:function(e,t,i,n){for(var s=0,o=t;o<i;o++)n&&this._cellManager.isHidden(e,o)||!this._cellManager.isAdjustable(e,o)||s++;return s},_getScratchPad:function(){return this._scratchPad||(this._scratchPad=document.createElement("div")),this._scratchPad},_getSectionIndices:function(e,t){return this._axisData[e][t+"Indices"]},_fireMouseOver:function(){var e=juic.$(this.id);if(this._fireMouseOverDOMCache!==e){this._fireMouseOverDOMCache=e;var t=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";SFDOMEvent.addListener(this.id,t,this._fireMouseWheel,this)}},_fireMouseWheel:function(e){var t=0;e=e||window.event,e.wheelDelta?(t=e.wheelDelta/120,window.opera&&(t=-t)):e.detail&&(t=-e.detail/3);for(var i=e.axis==e.VERTICAL_AXIS?"y":"x",n=z[i],s=(0>t?1:0<t?-1:0)*20,o=juic.$(this.id),a=SFDOMEvent.getTarget(e),l=this._scrollBarMgr.getHorizontal().id,r=this._scrollBarMgr.getVertical().id;a!=o&&!(a.id==l||a.id==r);){var d=SFDom.getStyle(a,"overflow-"+i)||SFDom.getStyle(a,"overflow");if("auto"==d&&C(a,i,s))return;a=a.parentNode}if(t&&this._isScrollRequired(i)){var c=[s];"x"==i?c.push(0):c.splice(0,0,0);var p=this.getAutoScroller();p.scrollMove.apply(p,c)&&SFDOMEvent.stopEvent(e)}},_fireScroll:function(){this._frozenFlag&&(this._setScrollOnAxis("x"),this._setScrollOnAxis("y")),this._updateScrollManager()},_setScrollOnAxis:function(e){for(var t=juic.$(this._getSectionId(A,A)),n=0,s;n<M.length;n++)if(s=M[n],s!=A){var o=p(e,A,s),a=this._getSectionId(o.row,o.column),l=this._getSectionExtenderId(o.row,o.column);i(t,e,a,l)}},_fixScrollBars:function(){var e=juic.$(this._getSectionExtenderId(A,A));if(e.style.width="",e.style.height="",this._scrollBarMgr){var t=juic.$(this._getSectionId(A,A)),i=this._isScrollRequired("x"),n=this._isScrollRequired("y");this._fixScrollBar("x",t,i,n),this._fixScrollBar("y",t,n,i)}this._fireScroll()},_fixScrollBar:function(t,i,n,s){if(n){var o=z[t],a=this._axisData[t],l=s?this._getScrollBarSize(o.oppositeAxisType):0,r=a.middleSize-a.viewableSize+l,d=i[o.scrollPositionType];i[o.scrollPositionType]=e(r,d)}},_updateScrollManager:function(){if(this._scrollBarMgr){var e=this.getDimension(),t=this.getAutoScroller().getScrollInfo(),i={};for(var n in z){var s=t&&t[n];i[n]=this._getScrollInfoAxis(n,s)}this._scrollBarMgr.update(this.getDimension(),i)}},_getScrollInfoAxis:function(t,i){if(this._isScrollRequired(t)){var n=this._axisData[t];if(i)return i.size=n.middleSize,i.position=e(n.middleSize-i.scrollArea,i.position),i;if(this._sizesAvailable)return{size:n.middleSize,scrollArea:n.viewableSize,position:0}}return null},_fireAdjusterDragStart:function(e,t,i){this._adjusterInfo={},this._adjusterInfo[e]={cellIndex:t},i=i||window.event,SFDOMEvent.stopEvent(i),SFDragDropMgr.handleDragStart(i,this,{useShim:!0,clickTimeThreshold:0,shimCursor:z[e].cursorType})},_fireIntersectionDragStart:function(e,t,i){this._adjusterInfo={x:{cellIndex:t},y:{cellIndex:e}},i=i||window.event,SFDOMEvent.stopEvent(i),SFDragDropMgr.handleDragStart(i,this,{useShim:!0,shimCursor:"move"})},_fireAdjusterMouseOver:function(e,t){this._setAdjusterHover(e,t,!0)},_fireAdjusterMouseOut:function(e,t){this._setAdjusterHover(e,t,!1)},_setAdjusterHover:function(e,t,i,n){for(var s=z[e].oppositeAxisType,o=this._axisData[s].size,a=i?"addClass":"removeClass",l="string"==typeof n?n:"hover",r=0;r<o;r++)SFDom[a](this._getAdjusterId(e,t,r),l),this._cellManager.isAdjustable(s,r)&&SFDom[a](this._getAdjusterId(e,t,r,!0),l)},_handleDragStart:function(e){var t=e.origin;for(var i in this._adjusterInfo){var n=this._axisData[i],s=this._adjusterInfo[i],o=s.cellIndex,a=n.sizes[o];s.originPoint=t,s.destinationPoint=t,this._dragByResizing?this._setAdjusterHover(i,s.cellIndex,!0,"adjusting"):this._showHoveringLine(i,o,a)}},_handleDrag:function(e){var t=e.point;this._handleDragAxis("x",t),this._handleDragAxis("y",t),this._dragByResizing&&this._refreshDimensions()},_handleDragAxis:function(e,t){var i=this._adjusterInfo[e];if(i){var s=this._axisData[e],o=i.originPoint,a=i.cellIndex,l=t[e]-o[e],r=this._cellManager.getSpacingManager(e),d=r.getBounds(a),c=d[0>l?"minSize":"maxSize"];i.destinationPoint=t;var p=this._getAdjustedSize(e,a,t);if(this._dragByResizing?r.setCustomSize(a,p):this._moveHoveringLine(e,a,p),p!=c){var o=i.originPoint,t=i.destinationPoint,_=juic.$(this._getSectionId(A,A)),g=SFDom.getRegion(_),u=n(g,o,e),h=n(g,t,e);u&&!h?(!this._scrollBarMgr&&(_.style["overflow"+e.toUpperCase()]="auto"),this.getAutoScroller().autoScrollAxis(t,e,!0)):this._stopAutoScroll(e)}}},_handleDragEnd:function(e){var t=e.point;if(this._stopAutoScroll(),!this._dragByResizing)this._hideHoveringLine();else for(var i in this._adjusterInfo){var n=this._adjusterInfo[i];this._setAdjusterHover(i,n.cellIndex,!1,"adjusting")}this._adjustAxis("x",t),this._adjustAxis("y",t),this._refreshDimensions(),this.dispatch("dimensionAdjusted")},_adjustAxis:function(e,t){var i=this._adjusterInfo[e];if(i){var n=z[e],s=i.cellIndex,o=this._getAdjustedSize(e,s,t);this._cellManager.getSpacingManager(e).setCustomSize(s,o)}},_onAutoScroll:function(){this._makingAdjustments&&(this._onAutoScrollAxis("x"),this._onAutoScrollAxis("y"),this._dragByResizing&&this._refreshDimensions()),this._fireScroll()},_onAutoScrollAxis:function(e){var t=this._adjusterInfo[e];if(t){var i=t.cellIndex,n=t.destinationPoint,s=t.adjustedSize,o=this._getAdjustedSize(e,i,n);o==s?this._stopAutoScroll(e):this._dragByResizing?this._cellManager.getSpacingManager(e).setCustomSize(i,o):this._moveHoveringLine(e,i,o)}},_getAdjustedSize:function(e,t,i){var n=Util.isRTL(),o=this._axisData[e],a=z[e],l=this.getSectionName(e,t)==SFMatrixLayout.MIDDLE_SECTION,r=this._isScrollRequired(a.oppositeAxisType)?this._getScrollBarSize(e):0,d=SFDom.getRegion(this.id+"outer");l&&(d[a.endRegionType]-=o[SFMatrixLayout.LAST_SECTION+"Size"]);var c=d[a.startRegionType]-(n?r+o.adjusterSize:0),p=d[a.endRegionType]-(n?0:r+o.adjusterSize),_=this._getAdjusterOffset(e,t),g=(n?p:c)+_,u=(n?SFDom.getViewportWidth()-r-i[e]:i[e])-Math.floor(o.adjusterSize/2),h=s(u,n?p:c,n?c:p),m=o.sizes[t]+h-g,x=this._cellManager.getSpacingManager(e).getBounds(t);return s(m,x.minSize,x.maxSize)},_getAdjusterOffset:function(e,t){var i=z[e],n=this._axisData[e],s=n.sizes[t];this._getSectionIndices(e,A).contains(t)&&(s-=juic.$(this._getSectionId(A,A))[i.scrollPositionType]);for(var o=0;o<t;o++)this._cellManager.isHidden(e,o)||(s+=n.sizes[o],this._cellManager.isAdjustable(e,o)&&(s+=n.adjusterSize));return s},_showHoveringLine:function(e,t,i){this._makingAdjustments=!0,this._adjusterInfo[e].adjustedSize=i;var n=z[e],s=z[n.oppositeAxisType],o=this._axisData[e],a=this._getAdjusterOffset(e,t),l=i-o.sizes[t];this._hoveringLines||(this._hoveringLines={});var r=juic.$(this.id+"hoveringLine:"+e);r||(r=document.createElement("div"),r.className=n.cellType+"-adjuster hovering-cell-adjuster",r.setAttribute("id",this.id+"hoveringLine:"+e),r.style.display="none",r.style.position="absolute",r.style[n.dimensionType]=o.adjusterSize+"px",r.style[s.startRegionType]="0px",r.style.zIndex="99999",juic.$(this.id+"adjusters").appendChild(r),this._hoveringLines[e]=r);var d=this.getDimension(),c=d[s.dimensionType];r.style[s.dimensionType]=c+"px",r.style[n.startRegionType]=a+l+"px",r.style.display=""},_moveHoveringLine:function(e,t,i){var n=this._hoveringLines&&this._hoveringLines[e];if(n&&this._makingAdjustments){this._adjusterInfo[e].adjustedSize=i;var s=z[e],o=this._axisData[e],a=this._getAdjusterOffset(e,t),l=i-o.sizes[t];n.style[s.startRegionType]=a+l+"px"}},_hideHoveringLine:function(){for(var e in this._makingAdjustments=!1,this._hoveringLines)this._hoveringLines[e].style.display="none"},_stopAutoScroll:function(e){this._autoScroller&&this._autoScroller.stopScrolling(e)},_createAxisData:function(e){var t=z[e],i=this._cellManager.size()[t.dimensionType],n=this._axisData[e]={size:i};n.adjusterSize="number"!=typeof this._adjusterSize&&this._adjusterSize[e]?this._adjusterSize[e]:this._adjusterSize;for(var s=0,o;s<M.length;s++)o=M[s],n[o+"Indices"]=[];for(var a=this._getSectionIndices(e,SFMatrixLayout.FIRST_SECTION),l=this._getSectionIndices(e,A),r=this._getSectionIndices(e,SFMatrixLayout.LAST_SECTION),d=!1,s=0;s<i;s++)this._cellManager.isFrozen(e,s)?(this._frozenFlag=!0,d?r.push(s):a.push(s)):(juic.assert(0==r.length,"Cannot have more than one section of unfrozen "+t.cellType+"s"),d=!0,l.push(s));return n},_updateAxisData:function(t,i){var n=z[t],s=this._axisData[t],o=this._dimension[n.dimensionType],a=this.isFioriFDEnabled(),l=this._countAdjustableSpacing(t,0,s.size,!0),r=i?this._getScrollBarSize(t):0,d=r+s.adjusterSize*l,c=a?o-d-l:o-d;s.sizes=this._cellManager.getSpacingManager(t).allocate(c);for(var p=o,_=0,g;_<M.length;_++){var u=M[_],h=this._getSectionIndices(t,u),m=0;0<h.length&&(m=this._getTotalSize(t,h[0],h[0]+h.length)),s[u+"Size"]=m,u==A?g=m:p-=m}var x=a?s.sizes.length:0,y=this._minimizeSpace?g+r+x:Number.MAX_VALUE;s.viewableSize=e(p,y)},_updateAxisDataScroll:function(e){var t=z[e],i=this._isScrollRequired(e),n=t.oppositeAxisType,s=this._isScrollRequired(n);i&&(s?"x"==e&&(this._updateAxisData("x",!0),this._updateAxisData("y",!0)):(this._updateAxisData(n,!0),this._isScrollRequired(n)&&this._updateAxisData(e,!0)))},_adjustDOM:function(){var e=juic.$(this.id);if(e&&this._sizesAvailable){var t=this._cellManager.size();SFDom.updateStyle(e,a(this.getDimension()));for(var i=0;i<t.height;i++)for(var n=0;n<t.width;n++){var s=juic.$(this._getCellId(i,n)),o=this.getCellDimension(i,n);SFDom.updateStyle(s,a(o))}for(var l=this.isFioriFDEnabled(),r=0;3>r;r++)for(var d=M[r],c=d==SFMatrixLayout.FIRST_SECTION,p=d==A,_=0;3>_;_++){var g=M[_],u=g==A,h=this._getSectionDimension(d,g),m=juic.$(this._getSectionId(d,g)),x=a(h);if(c&&u&&x&&l&&(x.height="auto"),SFDom.updateStyle(m,x),!p||!u){var y=juic.$(this._getSectionExtenderId(d,g));h.width+=u?D:0,h.height+=p?D:0;var v=a(h);c&&u&&v&&l&&(v.height="auto"),SFDom.updateStyle(y,v)}}var m=juic.$(this._getSectionId(A,A));SFDom.updateStyle(m,this._getOverflowStyle(!0)),this._fixScrollBars()}},_getSectionDimensionAxis:function(e,t){var i=z[e],n=this._axisData[e],s=i.oppositeAxisType,o=n[t+"Size"];return t==A&&(o=n.viewableSize,this._scrollBarMgr&&this._isScrollRequired(s)&&(o-=this._getScrollBarSize(s))),o},_getTotalDimensionAxis:function(e){for(var t=0,i=0;i<M.length;i++)t+=this._getSectionDimensionAxis(e,M[i]);return t},_getScrollBarSize:function(e){return this._scrollBarMgr?this._scrollBarMgr.get(e).getSize():z[e].scrollBarSize},_getSectionDimension:function(e,t){return{width:this._getSectionDimensionAxis("x",t),height:this._getSectionDimensionAxis("y",e)}},_isScrollRequired:function(e){var t=z[e],i=this._axisData[e],n=this._countAdjustableSpacing(e,0,i.size,!0),s=this._dimension[t.dimensionType]-i.adjusterSize*n,o=this._cellManager.getSpacingManager(e),a=o.getActualSize()||o.getMinimumSpace();return s<a},_getTotalSize:function(e,t,i,n){for(var s=this._axisData[e],o=0,a=!0,l=i-1;l>=t;l--)this._cellManager.isHidden(e,l)||(o+=s.sizes[l],!this._cellManager.isAdjustable(e,l)||n&&a||(o+=s.adjusterSize),a=!1);return o},_requestAdjust:function(e,t,i,n){var s=this._requestAdjustAxis("x",t,i.width,n&&n.x),o=this._requestAdjustAxis("y",e,i.height,n&&n.y);null==this._handleTimeoutId&&(s||o)&&(this._handleTimeoutId=setTimeout(Util.createCallback(this,"_batchAdjustment"),0))},_requestAdjustAxis:function(e,t,i,n){var s=this._axisData[e],o=s.sizes[t],a=!1;s.requestSizes||(s.requestSizes=[]);var l=s.requestSizes[t];return(!l||i>l)&&(s.requestSizes[t]=i,a=!0),n&&(n.minSize||n.maxSize)&&(!s.requestBounds&&(s.requestBounds=[]),l=s.requestBounds[t],l?((null==l.minSize||null!=n.minSize&&n.minSize>l.minSize)&&(l.minSize=n.minSize,a=!0),(null==l.maxSize||null!=n.maxSize&&n.maxSize<l.maxSize)&&(l.maxSize=n.maxSize,a=!0)):(s.requestBounds[t]=n,a=!0)),a},_batchAdjustment:function(){this._handleTimeoutId=null;var e=this._batchAxisAdjustment("x"),t=this._batchAxisAdjustment("y");(e||t)&&this._refreshDimensions()},_batchAxisAdjustment:function(e){var t=this._axisData[e],i=this._cellManager.getSpacingManager(e),n=t.requestSizes,s=!1;if(n&&0<n.length){t.requestSizes=null;for(var o=0,a=n.length,l;o<a;o++)l=n[o],null!=l&&(i.setCustomSize(o,l),s=!0)}var r=t.requestBounds;if(r&&0<r.length){t.requestBounds=null;for(var o=0,a=r.length,d;o<a;o++)d=r[o],null!=d&&(i.setBounds(o,d),s=!0)}return s}})}();function SFMatrixCellManager(e,t){this._init(e,t)}SFMatrixCellManager.prototype=function(){var e=Math.min,t=Math.max;function i(e,t,i){return e instanceof Array?(juic.assert(e.length==i,"spacing array has incorrect size"),new SFSpacingManager(e,t)):void juic.assert(!1,"spacing object is of incorrect type")}function n(e,t){if(e instanceof Array)return juic.assert(e.length==t,"spacing array has incorrect size"),e.concat();if(null==e){e=[];for(var i=0;i<t;i++)e.push({});return e}juic.assert(!1,"spacing object is of incorrect type")}function s(e,t,i){var n="x"==e;return{row:n?i:t,column:n?t:i}}function o(e,t,i){e&&e.addEventListener&&i.handleEvent&&(!e._allowedEvents||e._allowedEvents[t])&&e.addEventListener(t,i)}function a(e,t,i){e&&e.removeEventListener&&e.removeEventListener(t,i)}function l(e,t){this._rowIndex=e,this._columnIndex=t}var r={x:{axisType:"x",oppositeAxisType:"y",cellType:"column",dimensionType:"width",spanType:"colSpan"},y:{axisType:"y",oppositeAxisType:"x",cellType:"row",dimensionType:"height",spanType:"rowSpan"}};return l.prototype=function(){return juic.set(new juic.EventTarget,{handleEvent:function(e){this.dispatch(e.type,{displayEvent:e,rowIndex:this._rowIndex,columnIndex:this._columnIndex})},setDisplayComponent:function(e){this._component&&(a(this,"resize",this._component),a(this._component,"requestAdjust",this)),this._dimension=null,this._component=e,this._component&&(o(this,"resize",this._component),o(this._component,"requestAdjust",this))},getDisplayComponent:function(){return this._component},setPlaceholder:function(e){this._placeholder=e},getPlaceholder:function(){return this._placeholder},setCellSpan:function(e){this._cellSpan=e},getCellSpan:function(){return this._cellSpan},getPosition:function(){return{rowIndex:this._rowIndex,columnIndex:this._columnIndex}},setPosition:function(e,t){this._rowIndex=e,this._columnIndex=t},getCellProperties:function(){return this._properties||{}},setCellProperties:function(e){this._properties=e},clearCache:function(){this._dimension=null},resize:function(e){this._dimension&&e.width==this._dimension.width&&e.height==this._dimension.height||(this._dimension=e,this.dispatch("resize",e))}})}(),juic.set(new juic.EventTarget,{_init:function(e,t){juic.assert(null!=e&&e instanceof Array,"[SFMatrixCellManager] requires a 2 dimensional array of cells");var i=0;0<e.length?i=e[0].length:t&&t.columnSpacing&&(i=t.columnSpacing.length);var n=e.length;this._axisData={x:this._createAxisData("x",t&&t.columnSpacing,t&&t.columnOptions,i),y:this._createAxisData("y",t&&t.rowSpacing,t&&t.rowOptions,n)};for(var s=t&&t.cellSpans,o=0;o<n;o++)for(var a=0;a<i;a++){var l=e[o][a],r=s&&s[o]&&s[o][a];this._updateDisplayComponent(o,a,l,r)}},handleEvent:function(e){switch(e.type){case"requestAdjust":this.dispatch("requestAdjust",{rowIndex:e.rowIndex,columnIndex:e.columnIndex,bounds:{x:{minSize:e.displayEvent.minWidth,maxSize:e.displayEvent.maxWidth},y:{minSize:e.displayEvent.minHeight,maxSize:e.displayEvent.maxHeight}},dimension:{width:e.displayEvent.width,height:e.displayEvent.height}});}},get:function(e,t){return this._validateIndices(e,t),this._getCellHandler(e,t).getDisplayComponent()},set:function(e,t,i){var n=this.get(e,t);n!==i&&(this._getCellHandler(e,t).setDisplayComponent(i),this.dispatch("contentsChanged",{rowIndex:e,columnIndex:t}))},append:function(e,t,i,n){this.insertInto(e,null,t,i,n)},appendMultiple:function(e,t,i,n){this.insertMultipleInto(e,null,t,i,n)},insertInto:function(e,t,i,n,s){this.insertMultipleInto(e,t,[i],n&&[n],s&&[s])},insertMultipleInto:function(e,t,i,n,o){this._validateIndex(e,t,!0);var a=this._axisData[e],l=r[e].oppositeAxisType,d=this._axisData[l];if(juic.assert(i instanceof Array,"components must be a 2D array"),0!=i.length){juic.assert(i[0]instanceof Array&&i[0].length==d.size,"components must have 2nd dimension of size "+ +d.size),t=null==t?a.size:t;var c=i.length;if(!n){n=[];for(var p=0;p<c;p++)n.push({})}if(juic.assert(n instanceof Array&&n.length==c,"spaceOptions must be an array of size "+c),"x"==e){for(var _=[],p=0;p<c;p++)_.push(null);_.splice(0,0,t,0);for(var g=0;g<d.size;g++)this._cellHandlers[g].splice.apply(this._cellHandlers[g],_)}else{this._cellHandlers||(this._cellHandlers=[]);for(var _=[],p=0;p<c;p++)_.push([]);_.splice(0,0,t,0),this._cellHandlers.splice.apply(this._cellHandlers,_)}a.spacingManager.insertMultipleInto(t,n);var u=[t,0].concat(n);a.spacing.splice.apply(a.spacing,u),a.size+=c,this._updateCellHandlerPositions(e,t+c,a.size);for(var p=0;p<c;p++)for(var g=0;g<d.size;g++){var h=i[p][g],m=o&&o[p]&&o[p][g],x=s(e,t+p,g);this._updateDisplayComponent(x.row,x.column,h,m)}this.dispatch("intervalAdded",{axisType:e,index0:t,index1:t+c-1})}},remove:function(e,t,i,n){if(!(0>=i)){i=i||0;var s=t+i-1;this._validateIndex(e,t),this._validateIndex(e,s),juic.assert(s>=t,"[SFMatrixCellManager] Invalid indices ["+t+","+s+"]");var o=r[e],a=this._axisData[e],l=o.oppositeAxisType,d=this._axisData[l];if(a.spacingManager.remove(t,i),a.spacing.splice(t,i),a.size-=i,"x"==e)for(var c=0;c<d.size;c++)this._cleanupCellHandlers(this._cellHandlers[c].splice(t,i),n);else this._cleanupCellHandlers(this._cellHandlers.splice(t,i),n);this._updateCellHandlerPositions(e,t,a.size),this.dispatch("intervalRemoved",{axisType:e,index0:t,index1:s})}},move:function(i,n,s,o){this._validateIndex(i,n),this._validateIndex(i,s),o=o||1,this._validateIndex(i,n+o-1),this._validateIndex(i,s+o-1),juic.assert(0<=o,"count is invalid: "+o);var a=r[i],l=this._axisData[i],d=a.oppositeAxisType,c=this._axisData[d];l.spacingManager.move(n,s,o);var p=l.spacing.splice(n,o);if(p.splice(0,0,s,0),l.spacing.splice.apply(l.spacing,p),"x"==i)for(var _=0,g;_<c.size;_++)g=this._cellHandlers[_],p=g.splice(n,o),p.splice(0,0,s,0),g.splice.apply(g,p);else p=this._cellHandlers.splice(n,1),p.splice(0,0,s,0),this._cellHandlers.splice.apply(this._cellHandlers,p);var u=e(n,s),h=t(n,s,s+o-1);this._updateCellHandlerPositions(i,u,h+1),this.dispatch("intervalMoved",{axisType:i,index0:n,index1:s,count:o})},getCellSpan:function(e,t){return this._getCellHandler(e,t).getCellSpan()},getPlaceholderCell:function(e,t){var i=this._getCellHandler(e,t).getPlaceholder();return i&&i.getPosition()},getCellProperties:function(e,t){return this._validateIndices(e,t),this._getCellHandler(e,t).getCellProperties()},setCellProperties:function(e,t,i){this._validateIndices(e,t);var n=this._getCellHandler(e,t);n.setCellProperties(i),this.dispatch("propertiesChanged",{rowIndex:e,columnIndex:t})},setCellProperty:function(e,t,i,n){juic.assert(null!=i,"[SFMatrixCellManager] propertName is required");var s=this.getCellProperties(e,t);s[i]=n,this.setCellProperties(e,t,s)},getSpacingOption:function(e,t,i){this._validateIndex(e,t);var n=this._axisData[e],s=n.spacing[t];return s[i]},setSpacingOption:function(e,t,i,n){this._validateIndex(e,t);var s=this._axisData[e],o=juic.set({},s.spacing[t]);o[i]=n,this.setSpacingOptions(e,t,o)},setSpacingOptions:function(e,t,i){this._validateAxisType(e);var n=this._axisData[e],s=n.spacing[t];n.spacing[t]=i,s.hidden!=i.hidden&&n.spacingManager.setHidden(t,i.hidden),this.dispatch("spacingOptionsChanged",{axisType:e,index:t,oldOptions:s})},resize:function(e,t,i){this._validateIndices(e,t),this._getCellHandler(e,t).resize(i)},getSpacingManager:function(e){return this._validateAxisType(e),this._axisData[e].spacingManager},clearCache:function(){for(var e=this.size(),t=0;t<e.height;t++)for(var i=0;i<e.width;i++)this._cellHandlers[t][i]&&this._cellHandlers[t][i].clearCache()},broadcast:function(e,t){for(var i=this.size(),n=0;n<i.height;n++)for(var s=0,o;s<i.width;s++)o=this.get(n,s),o&&o[e]&&o[e].apply(o,t?t:[])},size:function(){return{height:this._axisData.y.size,width:this._axisData.x.size}},isAdjustable:function(e,t){return this.getSpacingOption(e,t,"adjustable")},isFrozen:function(e,t){return this.getSpacingOption(e,t,"frozen")},isHidden:function(e,t){return this.getSpacingOption(e,t,"hidden")},cleanup:function(e){this._cleanupCellHandlers(this._cellHandlers,e),this._autoScroller&&this._autoScroller.removeEventListener("autoScroll",this),this._scrollBarMgr&&this._scrollBarMgr.cleanup(),delete this._cellHandlers},_updateDisplayComponent:function(e,i,n,s){s={rowSpan:t(s&&s.rowSpan||1,1),colSpan:t(s&&s.colSpan||1,1)};var o=this._getCellHandler(e,i);if(o.setDisplayComponent(n),o.setCellSpan(s),1<s.rowSpan||1<s.colSpan)for(var a=0;a<s.rowSpan;a++)for(var l=0;l<s.colSpan;l++)(0!=a||0!=l)&&this._getCellHandler(e+a,i+l).setPlaceholder(o)},_createAxisData:function(e,t,s,o){var a={};return a.spacing=n(t,o),a.spacingManager=i(a.spacing,s,o),a.size=o,a},_updateCellHandlerPositions:function(e,t,i){for(var n=r[e].oppositeAxisType,o=s(e,{min:t,max:i},{min:0,max:this._axisData[n].size}),a=o.row.min;a<o.row.max;a++)for(var l=o.column.min;l<o.column.max;l++)this._cellHandlers[a][l].setPosition(a,l);for(var a=o.row.min;a<o.row.max;a++)for(var l=o.column.min;l<o.column.max;l++){var d=this._cellHandlers[a][l],c=d.getPlaceholder();if(c){var p=c.getPosition();(p.rowIndex>a||p.columnIndex>l)&&(this._cellHandlers[a][l]=c,this._cellHandlers[p.rowIndex][p.columnIndex]=d,d.setPosition(p.rowIndex,p.columnIndex),c.setPosition(a,l))}}},_getCellHandler:function(e,t){this._cellHandlers||(this._cellHandlers=[]),this._cellHandlers[e]||(this._cellHandlers[e]=[]);var i=this._cellHandlers[e][t];return i||(i=new l(e,t),i.addEventListener("requestAdjust",this),this._cellHandlers[e][t]=i),i},_cleanupCellHandlers:function(e,t){if(e instanceof Array)for(var i=0,n=e.length;i<n;i++)this._cleanupCellHandlers(e[i],t);else{if(t){var s=e.getDisplayComponent();s&&s.cleanup&&s.cleanup()}e.setDisplayComponent(null),e.removeEventListener("requestAdjust",this)}},_validateIndex:function(e,t,i){this._validateAxisType(e);var n=this._axisData[e];t=null==t?n.size:t;var s=n.size-(i?0:1);juic.assert("number"==typeof t&&0<=t&&t<=s,"Invalid index for "+e+" axis: "+t+", max = "+s)},_validateAxisType:function(e){juic.assert("x"==e||"y"==e,"Invalid axisType: "+e)},_validateIndices:function(e,t){var i=this.size();juic.assert("number"==typeof e&&"number"==typeof t&&i.height>e&&i.width>t,"[SFMatrixCellManager] Invalid [rowIndex, columnIndex] = ["+e+", "+t+"]")}})}();