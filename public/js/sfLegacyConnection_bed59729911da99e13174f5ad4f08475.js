juic.legacyUtil.Connect={_msxml_progid:["Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],_http_headers:{},_has_http_headers:!1,_use_default_post_header:!0,_default_post_header:"application/x-www-form-urlencoded; charset=UTF-8",_default_form_header:"application/x-www-form-urlencoded",_use_default_xhr_header:!0,_default_xhr_header:"XMLHttpRequest",_has_default_headers:!0,_isFormSubmit:!1,_default_headers:{},_poll:{},_timeOut:{},_polling_interval:50,_transaction_id:0,startEvent:new SFCustomEvent("start"),completeEvent:new SFCustomEvent("complete"),successEvent:new SFCustomEvent("success"),failureEvent:new SFCustomEvent("failure"),abortEvent:new SFCustomEvent("abort"),_customEvents:{onStart:["startEvent","start"],onComplete:["completeEvent","complete"],onSuccess:["successEvent","success"],onFailure:["failureEvent","failure"],onUpload:["uploadEvent","upload"],onAbort:["abortEvent","abort"]},setProgId:function(a){this._msxml_progid.unshift(a)},setDefaultPostHeader:function(a){"string"==typeof a?(this._default_post_header=a,this._use_default_post_header=!0):"boolean"==typeof a&&(this._use_default_post_header=a)},setDefaultXhrHeader:function(a){"string"==typeof a?this._default_xhr_header=a:this._use_default_xhr_header=a},setPollingInterval:function(a){"number"==typeof a&&isFinite(a)&&(this._polling_interval=a)},createXhrObject:function(a){var b,c,d;try{c=new XMLHttpRequest,b={conn:c,tId:a,xhr:!0}}catch(f){for(d=0;d<this._msxml_progid.length;++d)try{c=new ActiveXObject(this._msxml_progid[d]),b={conn:c,tId:a,xhr:!0};break}catch(a){}}finally{return b}},getConnectionObject:function(a){var b,c=this._transaction_id;try{a?(b={tId:c},"xdr"===a?(b.conn=this._transport,b.xdr=!0):"upload"==a&&(b.upload=!0)):b=this.createXhrObject(c),b&&this._transaction_id++}catch(a){}return b},asyncRequest:function(a,b,c,d){var e,f,g=c&&c.argument?c.argument:null,h=this;if(this._isFileUpload?f="upload":c&&c.xdr&&(f="xdr"),e=this.getConnectionObject(f),!e)return null;if(c&&c.customevents&&this.initCustomEvents(e,c),this._isFormSubmit){if(this._isFileUpload)return window.setTimeout(function(){h.uploadFile(e,c,b,d)},10),e;"GET"==a.toUpperCase()?0!==this._sFormData.length&&(b+=(-1==b.indexOf("?")?"?":"&")+this._sFormData):"POST"==a.toUpperCase()&&(d=d?this._sFormData+"&"+d:this._sFormData)}return("GET"==a.toUpperCase()&&c&&!1===c.cache&&(b+=(-1==b.indexOf("?")?"?":"&")+"rnd="+new Date().valueOf().toString()),this._use_default_xhr_header&&!this._default_headers["X-Requested-With"]&&this.initHeader("X-Requested-With",this._default_xhr_header,!0),"POST"===a.toUpperCase()&&this._use_default_post_header&&!1===this._isFormSubmit&&this.initHeader("Content-Type",this._default_post_header),e.xdr)?(this.xdr(e,a,b,c,d),e):(e.conn.open(a,b,!0),(this._has_default_headers||this._has_http_headers)&&this.setHeader(e),this.handleReadyState(e,c),e.conn.send(d||""),!0===this._isFormSubmit&&this.resetFormState(),this.startEvent.fire(e,g),e.startEvent&&e.startEvent.fire(e,g),e)},initCustomEvents:function(a,b){for(var c in b.customevents)this._customEvents[c][0]&&(a[this._customEvents[c][0]]=new SFCustomEvent(this._customEvents[c][1],b.scope?b.scope:null),a[this._customEvents[c][0]].subscribe(b.customevents[c]))},handleReadyState:function(a,b){var c=this,d=b&&b.argument?b.argument:null;b&&b.timeout&&(this._timeOut[a.tId]=window.setTimeout(function(){c.abort(a,b,!0)},b.timeout)),this._poll[a.tId]=window.setInterval(function(){a.conn&&4===a.conn.readyState&&(window.clearInterval(c._poll[a.tId]),delete c._poll[a.tId],b&&b.timeout&&(window.clearTimeout(c._timeOut[a.tId]),delete c._timeOut[a.tId]),c.completeEvent.fire(a,d),a.completeEvent&&a.completeEvent.fire(a,d),c.handleTransactionResponse(a,b))},this._polling_interval)},handleTransactionResponse:function(a,b,c){var d,e,f=b&&b.argument?b.argument:null,g=!!(a.r&&"xdr:success"===a.r.statusText),h=!!(a.r&&"xdr:failure"===a.r.statusText);try{d=void 0!==a.conn.status&&0!==a.conn.status||g?a.conn.status:h&&!c?0:13030}catch(a){d=13030}200<=d&&300>d||1223===d||g?(e=a.xdr?a.r:this.createResponseObject(a,f),b&&b.success&&(b.scope?b.success.apply(b.scope,[e]):b.success(e)),this.successEvent.fire(e),a.successEvent&&a.successEvent.fire(e)):(12002===d||12029===d||12030===d||12031===d||12152===d||13030===d?(e=this.createExceptionObject(a.tId,f,!!c&&c),b&&b.failure&&(b.scope?b.failure.apply(b.scope,[e]):b.failure(e))):(e=a.xdr?a.response:this.createResponseObject(a,f),b&&b.failure&&(b.scope?b.failure.apply(b.scope,[e]):b.failure(e))),this.failureEvent.fire(e),a.failureEvent&&a.failureEvent.fire(e));this.releaseObject(a),e=null},createResponseObject:function(a,b){var c,d,e,f,g={},h={};try{for(d=a.conn.getAllResponseHeaders(),e=d.split("\n"),c=0;c<e.length;c++)f=e[c].indexOf(":"),-1!=f&&(h[e[c].substring(0,f)]=e[c].substring(f+2).trim())}catch(a){}return g.tId=a.tId,g.status=1223==a.conn.status?204:a.conn.status,g.statusText=1223==a.conn.status?"No Content":a.conn.statusText,g.getResponseHeader=h,g.getAllResponseHeaders=d,g.responseText=a.conn.responseText,g.responseXML=a.conn.responseXML,b&&(g.argument=b),g},createExceptionObject:function(a,b,c){var d={};return d.tId=a,c?(d.status=-1,d.statusText="transaction aborted"):(d.status=0,d.statusText="communication failure"),b&&(d.argument=b),d},initHeader:function(a,b,c){var d=c?this._default_headers:this._http_headers;d[a]=b,c?this._has_default_headers=!0:this._has_http_headers=!0},setHeader:function(a){if(this._has_default_headers)for(var b in this._default_headers)this._default_headers.hasOwnProperty&&this._default_headers.hasOwnProperty(b)&&a.conn.setRequestHeader(b,this._default_headers[b]);if(this._has_http_headers){for(b in this._http_headers)this._http_headers.hasOwnProperty&&this._http_headers.hasOwnProperty(b)&&a.conn.setRequestHeader(b,this._http_headers[b]);this._http_headers={},this._has_http_headers=!1}},resetDefaultHeaders:function(){this._default_headers={},this._has_default_headers=!1},abort:function(a,b,c){var d,e=b&&b.argument?b.argument:null;if(a=a||{},a.conn)a.xhr?this.isCallInProgress(a)&&(a.conn.abort(),window.clearInterval(this._poll[a.tId]),delete this._poll[a.tId],c&&(window.clearTimeout(this._timeOut[a.tId]),delete this._timeOut[a.tId]),d=!0):a.xdr&&(a.conn.abort(a.tId),d=!0);else if(a.upload){var f="yuiIO"+a.tId,g=document.getElementById(f);g&&(g&&g.removeEventListener("load",this.uploadCallback),document.body.removeChild(g),c&&(window.clearTimeout(this._timeOut[a.tId]),delete this._timeOut[a.tId]),d=!0)}else d=!1;return!0===d&&(this.abortEvent.fire(a,e),a.abortEvent&&a.abortEvent.fire(a,e),this.handleTransactionResponse(a,b,!0)),d},isCallInProgress:function(a){return a=a||{},a.xhr&&a.conn?4!==a.conn.readyState&&0!==a.conn.readyState:a.xdr&&a.conn?a.conn.isCallInProgress(a.tId):!0===a.upload&&!!document.getElementById("yuiIO"+a.tId)},releaseObject:function(a){a&&a.conn&&(a.conn=null,a=null)}},function(){function a(a){var b=document.createElement("div");document.body.appendChild(b),b.innerHTML="<object id=\"YUIConnectionSwf\" type=\"application/x-shockwave-flash\" data=\""+a+"\" width=\"0\" height=\"0\"><param name=\"movie\" value=\""+a+"\"><param name=\"allowScriptAccess\" value=\"sameDomain\"></object>"}function b(a,b){a&&(d.startEvent.fire(a,b.argument),a.startEvent&&a.startEvent.fire(a,b.argument))}function c(a){var c=e[a.tId].o,d=e[a.tId].c;return"xdr:start"===a.statusText?void b(c,d):void(a.responseText=decodeURI(a.responseText),c.r=a,d.argument&&(c.r.argument=d.argument),this.handleTransactionResponse(c,d,!("xdr:abort"!==a.statusText)),delete e[a.tId])}var d=juic.legacyUtil.Connect,e={};d.xdr=function(a,b,f,g,c){e[parseInt(a.tId)]={o:a,c:g},c&&(g.method=b,g.data=c),a.conn.send(f,g,a.tId)},d.swf=a,d.transport=function(b){a(b),d._transport=document.getElementById("YUIConnectionSwf")},d.xdrReadyEvent=new SFCustomEvent("xdrReady"),d.xdrReady=function(){d.xdrReadyEvent.fire()},d.handleXdrResponse=c}(),function(){function a(a,b,c){var d,e,f,g,h,k,l,m,n,o,p=!1,q=[],r=0;if(this.resetFormState(),"string"==typeof a)d=document.getElementById(a)||document.forms[a];else if("object"==typeof a)d=a;else return;if(b)return this.createFrame(c?c:null),this._isFormSubmit=!0,this._isFileUpload=!0,void(this._formNode=d);for(k=0,l=d.elements.length;k<l;++k)if(e=d.elements[k],h=e.disabled,f=e.name,!h&&f)switch(f=encodeURIComponent(f)+"=",g=encodeURIComponent(e.value),e.type){case"select-one":-1<e.selectedIndex&&(o=e.options[e.selectedIndex],q[r++]=f+encodeURIComponent(o.attributes.value&&o.attributes.value.specified?o.value:o.text));break;case"select-multiple":if(-1<e.selectedIndex)for(m=e.selectedIndex,n=e.options.length;m<n;++m)o=e.options[m],o.selected&&(q[r++]=f+encodeURIComponent(o.attributes.value&&o.attributes.value.specified?o.value:o.text));break;case"radio":case"checkbox":e.checked&&(q[r++]=f+g);break;case"file":case void 0:case"reset":case"button":break;case"submit":!1===p&&(this._hasSubmitListener&&this._submitElementValue&&(q[r++]=this._submitElementValue),p=!0);break;default:q[r++]=f+g;}return this._isFormSubmit=!0,this._sFormData=q.join("&"),this.initHeader("Content-Type",this._default_form_header),this._sFormData}function b(){this._isFormSubmit=!1,this._isFileUpload=!1,this._formNode=null,this._sFormData=""}function c(){var a="yuiIO"+this._transaction_id,b=document.createElement("iframe");b.id=a,b.name=a,b.style.position="absolute",b.style.top="-1000px",b.style.left="-1000px",document.body.appendChild(b)}function d(a){var b,c,d=[],e=a.split("&");for(b=0;b<e.length;b++)c=e[b].indexOf("="),-1!=c&&(d[b]=document.createElement("input"),d[b].type="hidden",d[b].name=decodeURIComponent(e[b].substring(0,c)),d[b].value=decodeURIComponent(e[b].substring(c+1)),this._formNode.appendChild(d[b]));return d}function e(a,b,c,d){var e,g,h,j,k,l,m="yuiIO"+a.tId,n=document.getElementById(m),o=this,p=b&&b.argument?b.argument:null;if(k={action:this._formNode.getAttribute("action"),method:this._formNode.getAttribute("method"),target:this._formNode.getAttribute("target")},this._formNode.setAttribute("action",c),this._formNode.setAttribute("method","POST"),this._formNode.setAttribute("target",m),this._formNode.setAttribute("enctype","multipart/form-data"),d&&(e=this.appendPostData(d)),this._formNode.submit(),this.startEvent.fire(a,p),a.startEvent&&a.startEvent.fire(a,p),b&&b.timeout&&(this._timeOut[a.tId]=window.setTimeout(function(){o.abort(a,b,!0)},b.timeout)),e&&0<e.length)for(g=0;g<e.length;g++)this._formNode.removeChild(e[g]);for(h in k)k.hasOwnProperty&&k.hasOwnProperty(h)&&(k[h]?this._formNode.setAttribute(h,k[h]):this._formNode.removeAttribute(h));this.resetFormState(),l=function(){var c,d,e;b&&b.timeout&&(window.clearTimeout(o._timeOut[a.tId]),delete o._timeOut[a.tId]),o.completeEvent.fire(a,p),a.completeEvent&&a.completeEvent.fire(a,p),j={tId:a.tId,argument:p};try{c=n.contentWindow.document.getElementsByTagName("body")[0],d=n.contentWindow.document.getElementsByTagName("pre")[0],c&&(d?e=d.textContent?d.textContent:d.innerText:e=c.textContent?c.textContent:c.innerText),j.responseText=e,j.responseXML=n.contentWindow.document.XMLDocument?n.contentWindow.document.XMLDocument:n.contentWindow.document}catch(a){}b&&b.upload&&(b.scope?b.upload.apply(b.scope,[j]):b.upload(j)),o.uploadEvent.fire(j),a.uploadEvent&&a.uploadEvent.fire(j),n&&n.removeEventListener("load",l),setTimeout(function(){document.body.removeChild(n),o.releaseObject(a)},100)},n&&n.addEventListener("load",l),f.uploadCallback=l}var f=juic.legacyUtil.Connect;f._isFileUpload=!1,f._formNode=null,f._sFormData=null,f._submitElementValue=null,f.uploadEvent=new SFCustomEvent("upload"),f._hasSubmitListener=function(){return document.addEventListener("click",function(a){var b=SFDOMEvent.getTarget(a),c=b.nodeName.toLowerCase();("input"===c||"button"===c)&&b.type&&"submit"==b.type.toLowerCase()&&(f._submitElementValue=encodeURIComponent(b.name)+"="+encodeURIComponent(b.value))}),!0}(),f.setForm=a,f.resetFormState=b,f.createFrame=c,f.appendPostData=d,f.uploadFile=e}(),juic.legacyUtil.Connect._createXhrObject=juic.legacyUtil.Connect.createXhrObject,juic.legacyUtil.Connect.createXhrObject=function(){var b=this._createXhrObject.apply(this,arguments);return b.conn.onreadystatechange=function(){},b};