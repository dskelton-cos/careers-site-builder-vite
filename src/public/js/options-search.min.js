$(function(){function q(){r();c.on("show.bs.collapse",function(){a.attr("aria-expanded",!0);a.text(a.attr("data-lessOptions"));a.attr("aria-label",a.attr("data-lessOptions"));m||m||l||(l=!0,t());l&&p.show()});c.on("shown.bs.collapse",function(){n?c.width($(".columnizedSearchForm:visible").width()):(d.css("height",c.height()),c.css("width",d.width()),c.offset({top:d.offset().top}))});c.on("hide.bs.collapse",function(){a.attr("aria-expanded",!1);a.text(a.attr("data-moreOptions"));a.attr("aria-label",
a.attr("data-moreOptions"));$(a).focus()});c.on("hidden.bs.collapse",function(){n||d.css("height",0)});j2w.search.options.isOpen&&c.collapse("show");j2w.Search.addClearEventListener(u)}function u(b){for(b=0;b<h.facetquery.fields.length;b++)$(".optionsFacetsDD_"+h.facetquery.fields[b]).val("")}function t(){$.ajax({url:"/services/jobs/options/facetValues/",type:"POST",cache:!1,contentType:"application/json",dataType:"json",data:JSON.stringify(h),success:function(b){b=b.facets.map;for(var a=0;a<h.facetquery.fields.length;a++){for(var e=
h.facetquery.fields[a],k=e,e=b[e],f=void 0,f="optionsFacetsDD_"+k,f=f.replace(/[*+?^$.\[\]{}()|\\\/]/g,"\\$&"),f=(f=location.search.match(new RegExp("[?&]"+f+"=([^&]+)(&|$)")))&&decodeURIComponent(f[1].replace(/\+/g," ")),g=0;g<e.length;g++)v(k,e[g],f===e[g].name);"country"!==k&&"lang"!==k||w(k)}m=!0;l=!1;p.hide();x.show();n||(d.css("height",c.height()),c.css("width",d.width()))}})}function r(){$.ajax({url:"/services/jobs/options/facetValues/",type:"POST",cache:!1,contentType:"application/json",dataType:"json",
data:JSON.stringify(h),success:function(b){}})}function w(b){b=$("#optionsFacetsDD_"+b);var a=b.find("option"),c=b.val();a.sort(function(a,b){return""===a.value?-1:""===b.value||a.text>b.text?1:a.text<b.text?-1:0});b.empty().append(a);b.val(c)}function v(a,c,e){$(".optionsFacetsDD_"+a).each(function(a,b){var g=b.options,d=new Option(c.translated?c.translated:c.name,c.name);d.selected=e;g[g.length]=d})}if(j2w.search){var c=$(".optionsDiv"),x=$(".optionsFacetValues"),p=$(".optionsFacetLoading"),a=$("#options-search"),
m=!1,l=!1,n=0<$(".columnizedSearchForm").length,d=$(".moreOptionsCollapseArea"),h={page:0,keywords:"",locationsearch:"",sortby:"referencedate",sortdir:"desc",sortfield:"title",recordsperpage:25,startrow:0,facetquery:{facet:!0,mincount:1,limit:5E3,fields:j2w.search.options.facets,sort:"index",showPicklistAllLocales:j2w.search.options.showPicklistAllLocales},filterquery:{}};q()}});
