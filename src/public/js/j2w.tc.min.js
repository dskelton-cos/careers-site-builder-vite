var j2w=j2w||{};
j2w.TC=function(){var g={},h=!1,k=null,l=7,d=null,m=null,f=function(a){"undefined"!=typeof closeSocialApplyOptions&&closeSocialApplyOptions();"undefined"!=typeof closeSocialSubscribeOptions&&closeSSB();j2w.Util.recoverFromAjaxError(a)},n=function(a,c){c.action=a.targetUrl;var b=function(b,d){a.hasOwnProperty(b)&&null!==a[b]&&a[b].toString().length?c.keys[b]=a[b]:!0===d&&(c.keys[b]="")};b("correlation_Id",!0);b("company",!0);b("lang",!0);b("clientId",!0);b("socialApply",!0);b("career_ns",!0);b("site",
!0);b("externalApply_correlation_Id");j2w.TC.isApplyAction()?(b("career_job_req_id",!0),b("jobPipeline",!0)):(b("career_job_req_id"),b("jobPipeline"));j2w.TC.isSubscribeWidgetAction()?(b("navBarLevel",!0),b("login_ns",!0)):(b("navBarLevel"),b("login_ns"));b("ucc_firstname");b("ucc_lastname");b("ucc_email");b("ucc_partnerProfile");b("isInternalUser");b("brandUrl");b("alertCreated");return c},e=function(a){j2w.xhrRequest=$.ajax({type:"POST",url:"/services/cas/createpayload/",contentType:"application/json",
data:a.toJSON({exportMethod:"forRCMCAS"}),dataType:"json"}).done(function(a,b,d){if(a.success&&"true"===a.success.toString().toLowerCase()&&a.targetUrl&&a.targetUrl.length)if(b={method:"POST",action:null,keys:{}},b=n(a,b),"string"===typeof b.action){a=$("<form></form>").hide().attr({method:b.method,action:b.action,target:"_top"});for(var e in b.keys)d=$("<input />").attr({type:"hidden",name:e}).val(b.keys[e]),a.append(d);a.append('<input type="submit" />');a.appendTo($("body")).submit()}else f({status:500,
statusText:"failed"});else f(d)}).fail(function(a,b,d){410===a.status?location.reload(!0):f(a)}).always(function(){window.j2w.applyInProgress=!1})};return{init:function(a){h?a=!1:(g=a,a=h=!0);return a},Args:{get:function(a){return j2w.Args.get(a,g)}},getAction:function(){return d},getEmail:function(){return k},getFrequency:function(){return l},getSocialSource:function(){return m},getTCEvent:function(){return{action:this.getAction(),email:this.getEmail(),frequency:this.getFrequency(),socialSrc:this.getSocialSource()}},
handleJoinForm:function(a){j2w.Args.get("useCASWorkflow")&&(a.preventDefault(),a=$(a.target).find("[name=ucc_email]"),j2w.TC.collectForCASWorkflow({emailAddress:a.val(),action:"subscribeWidget",socialSrc:""}))},handleViewProfileAction:function(a){j2w.Args.get("useCASWorkflow")&&(a.preventDefault(),j2w.TC.collectForCASWorkflow({emailAddress:"",action:"viewProfile",socialSrc:""}))},isApplyAction:function(){return"apply"===d},isAwLI2Flow:function(a){var c=j2w.Apply.Args.get("applyWithLinkedIn2Config");
return"li"===a&&"object"===typeof c&&!0===c.enabled},isSubscribeAction:function(){return"subscribe"===d},isSubscribeWidgetAction:function(){return"subscribeWidget"===d},setTCEventFromOptions:function(a){a=$.extend({action:null,email:null,frequency:7,socialSrc:null},a);d=a.action;k=a.email;m=a.socialSrc;l=a.frequency},showPleaseWait:function(){switch(this.getAction()){case "subscribe":j2w.SSB&&j2w.SSB.showPleaseWait();break;case "apply":j2w.SAB&&j2w.SAB.showPleaseWait()}},collectForCASWorkflow:function(a){j2w.TC.showPleaseWait();
a=$.extend({action:"",socialSrc:"",emailAddress:"",frequency:7,awli2profile:{}},a);switch(a.socialSrc){case "li":j2w.TC.isAwLI2Flow(a.socialSrc)&&e(j2w.User.profileImport(a,this.transformToLinkedInV1(a.awli2profile)));break;case "sk":getSKUserProfile(function(c){e(j2w.User.profileImport(a,c))});break;case "xi":"object"===typeof xingUser?e(j2w.User.profileImport(a,xingUser)):(xingButtonClicked=!0,loginToXing());break;default:e(j2w.User.profileImport(a))}},transformToLinkedInV1:function(a){a._key="~";
a.distance=0;var c={name:null,country:{code:null}};a.hasOwnProperty("location")&&(a.location.hasOwnProperty("locationName")&&(c.name=a.location.locationName),a.location.hasOwnProperty("country")&&(c.country.code=a.location.country));a.location=c;c={_total:0,values:[]};a.hasOwnProperty("positions")&&(c={_total:a.positions.length,values:a.positions});a.positions=c;c={_total:0,values:[]};a.hasOwnProperty("educations")&&(c={_total:a.educations.length,values:a.educations});a.educations=c;return{_total:1,
values:[a]}},triggerStartForCAS:function(a,c,b){a.length&&a.val("");c.trigger(b)}}}();
